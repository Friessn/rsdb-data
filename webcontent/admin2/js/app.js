(function(e){function t(t){for(var s,n,o=t[0],c=t[1],l=t[2],u=0,v=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&v.push(r[n][0]),r[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(v.length)v.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},r={app:0},i=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02e2":function(e,t,a){"use strict";var s=a("06b2"),r=a.n(s);r.a},"034f":function(e,t,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},"06b2":function(e,t,a){},"0e36":function(e,t,a){"use strict";var s=a("e673"),r=a.n(s);r.a},"0ea1":function(e,t,a){"use strict";var s=a("9757"),r=a.n(s);r.a},"11d1":function(e,t,a){"use strict";var s=a("bfd8"),r=a.n(s);r.a},"12f3":function(e,t,a){"use strict";var s=a("d57c"),r=a.n(s);r.a},"1d7a":function(e,t,a){},"1dd8":function(e,t,a){"use strict";var s=a("e244"),r=a.n(s);r.a},"1e89":function(e,t,a){},"225e":function(e,t,a){},2290:function(e,t,a){},"22ec":function(e,t,a){},"249a":function(e,t,a){"use strict";var s=a("28a5"),r=a.n(s);r.a},"28a5":function(e,t,a){},"2afe":function(e,t,a){},"2b55":function(e,t,a){},"2c52":function(e,t,a){},"2e0a":function(e,t,a){"use strict";var s=a("69cc"),r=a.n(s);r.a},"2e8a":function(e,t,a){"use strict";var s=a("8f33"),r=a.n(s);r.a},"2f00":function(e,t,a){"use strict";var s=a("5479"),r=a.n(s);r.a},"30db":function(e,t,a){"use strict";var s=a("2c52"),r=a.n(s);r.a},"3bce":function(e,t,a){"use strict";var s=a("225e"),r=a.n(s);r.a},"3d2b":function(e,t,a){"use strict";var s=a("e019"),r=a.n(s);r.a},"3d53":function(e,t,a){},"3f39":function(e,t,a){"use strict";var s=a("c9b1"),r=a.n(s);r.a},"453f":function(e,t,a){"use strict";var s=a("f622"),r=a.n(s);r.a},"4c5a":function(e,t,a){},"4cd6":function(e,t,a){},"4dd6":function(e,t,a){},5479:function(e,t,a){},"55b6":function(e,t,a){"use strict";var s=a("2afe"),r=a.n(s);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e792");var s=a("2b0e"),r=a("ce5b"),i=a.n(r);a("bf40");s["default"].use(i.a,{});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{light:""}},[a("div",{staticClass:"grid-container"},[a("div",{staticClass:"grid-item-head"},[a("v-tabs",{staticStyle:{position:"relative"},attrs:{dark:"",color:"blue-grey lighten-1","slider-color":"yellow"}},[e._l(e.tabs,(function(t){return a("v-tab",{key:t.name,attrs:{to:"/"+(void 0===t.target?t.name:t.target),ripple:"",replace:""}},[void 0!==t.icon?a("v-icon",[e._v(e._s(t.icon))]):e._e(),e._v(" "+e._s(t.title)+" ")],1)})),void 0===e.identity||"login"!==e.identity.auth_method&&"jws"!==e.identity.auth_method?e._e():a("span",{staticStyle:{position:"absolute",right:"5px",top:"5px"}},[a("a",{on:{click:e.local_logout}},[a("v-icon",[e._v("meeting_room")]),e._v(" logout ")],1)])],2)],1),a("router-view",{staticClass:"grid-item-content"}),a("div",{staticClass:"grid-item-foot"},[a("span",{attrs:{id:"foot-start-1"}},[e._v("?")]),a("span",{attrs:{id:"foot-end-1"}},[e._v("?")])])],1),e.isInternetExplorer?a("div",{staticClass:"internet-explorer"},[a("h3",{staticStyle:{color:"rgba(197, 32, 32, 1)"}},[e._v("Microsoft Internet Explorer is not usable for this site.")]),e._v(" Use a browser that conforms to current web standards: "),a("br"),e._v("Mozilla Firefox "),a("br"),e._v("Google Chrome "),a("br"),e._v("Microsoft Edge ")]):e._e()])},o=[],c=a("2f62");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v={name:"App",data:function(){return{}},methods:{local_logout:function(){window.location.href="/logout?ref="+encodeURIComponent(window.location.href)}},computed:d({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{identity:function(){return this.$store.state.identity.data},tabs:function(){var e=[];return e.push({name:"overview",title:"Overview",target:"",icon:"home"}),e.push({name:"layers",title:"Layers",icon:"photo_album"}),e.push({name:"explorer",title:"Explorer",icon:"vpn_lock"}),e.push({name:"viewer",title:"Viewer",icon:"satellite"}),e.push({name:"files",title:"Files",icon:"attachment"}),e.push({name:"tools",title:"Tools",icon:"build"}),e},isInternetExplorer:function(){return void 0!==window.document.documentMode}}),mounted:function(){this.$store.dispatch("init")}},m=v,p=(a("034f"),a("2877")),f=Object(p["a"])(m,n,o,!1,null,null,null),_=f.exports,h=a("8c4f"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("div",{staticClass:"innergrid-item-main"},[a("v-layout",[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",[a("h1",{staticClass:"headline mb-0"},[e._v("Remote Sensing Database")]),a("v-divider"),a("v-card-title",[a("span",{staticClass:"component"},[a("a",{attrs:{href:"#/layers"}},[a("div",[a("img",{attrs:{src:"images/layers.png"}})]),a("div",{staticClass:"component-text"},[e._v("Layers")])])]),a("span",{staticClass:"component"},[a("a",{attrs:{href:"#/explorer"}},[a("div",[a("img",{attrs:{src:"images/catalog2.png"}})]),a("div",{staticClass:"component-text"},[e._v("Map Explorer")])])]),a("span",{staticClass:"component"},[a("a",{attrs:{href:"#/viewer"}},[a("div",[a("img",{attrs:{src:"images/rasterdb_image.png"}})]),a("div",{staticClass:"component-text"},[e._v("Layer Viewer")])])]),a("span",{staticClass:"component"},[a("a",{attrs:{href:e.old_interface_url,target:"_blank"}},[a("div",[a("img",{attrs:{src:"images/old_interface.png"}})]),a("div",{staticClass:"component-text"},[e._v("old web interface")])])])]),a("v-divider"),a("v-card-title",[a("span",{staticClass:"component"},[a("a",{attrs:{href:e.indices_processing_url,target:"_blank"}},[a("div",[a("img",{attrs:{src:"images/lidar_indices_processing.png"}})]),a("div",{staticClass:"component-text"},[e._v("LiDAR indices processing")])])]),a("span",{staticClass:"component"},[a("a",{attrs:{href:e.indices_documentation_url,target:"_blank"}},[a("div",[a("img",{attrs:{src:"images/lidar_indices_documentation.png"}})]),a("div",{staticClass:"component-text"},[e._v("LiDAR indices documentation")])])]),a("span",{staticClass:"component"},[a("a",{attrs:{href:"https://environmentalinformatics-marburg.github.io/rsdb",target:"_blank"}},[a("div",[a("img",{attrs:{src:"images/rsdb_documentation.png"}})]),a("div",{staticClass:"component-text"},[e._v("RSDB documentation")])])]),a("span",{staticClass:"component"},[a("a",{attrs:{href:"https://github.com/environmentalinformatics-marburg/rsdb/wiki",target:"_blank"}},[a("div",[a("img",{attrs:{src:"images/rsdb_wiki.png"}})]),a("div",{staticClass:"component-text"},[e._v("RSDB wiki")])])])])],1)],1)],1)],1)])},g=[],y={name:"admin-overview",data:function(){return{}},methods:{},computed:{old_interface_url:function(){return this.$store.getters.apiUrl("web")},indices_processing_url:function(){return this.$store.getters.apiUrl("web/lidar_indices/lidar_indices.html")},indices_documentation_url:function(){return this.$store.getters.apiUrl("web/lidar_indices_description/lidar_indices_description.html")}},mounted:function(){}},x=y,w=(a("ea1d"),Object(p["a"])(x,b,g,!1,null,"9103dfd4",null)),k=w.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("v-list",{staticClass:"innergrid-item-nav",attrs:{dense:""}},[e._l(e.items,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation===t.name},attrs:{to:"/layers/"+t.name,replace:""},on:{click:function(a){e.navigation=t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})),a("v-divider"),a("v-list-tile",[a("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refreshLayers()}}},[a("v-icon",[e._v("refresh")])],1),e._v(" Layers ")],1),void 0!==e.layer_tags?a("multiselect",{attrs:{options:e.layer_tags,"show-labels":!1,placeholder:"filter by tag",multiple:!0},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}):e._e(),a("v-text-field",{staticStyle:{display:"inline-block"},attrs:{label:"search",clearable:"","append-icon":"search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),0===e.filteredRasterdbs.length&&0===e.filteredPointdbs.length&&0===e.filteredPointclouds.length&&0===e.filteredPoi_groups.length&&0===e.filteredRoi_groups.length?a("div",[e._v(" no layers ")]):e._e(),0!==e.filteredRasterdbs.length?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),e._v(" "),a("b",[e._v("RasterDBs")]),e._v(" ("+e._s(e.filteredRasterdbs.length)+")")],1)],1)],1),e._l(e.filteredRasterdbs,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="rasterdbs/"+t.name},attrs:{to:"/layers/rasterdbs/"+t.name,replace:""},on:{click:function(a){e.navigation="rasterdbs/"+t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v("collections")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPointdbs.length?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),e._v(" "),a("b",[e._v("PointDBs")]),e._v(" ("+e._s(e.filteredPointdbs.length)+")")],1)],1)],1),e._l(e.filteredPointdbs,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="pointdbs/"+t.name},attrs:{to:"/layers/pointdbs/"+t.name,replace:""},on:{click:function(a){e.navigation="pointdbs/"+t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v("blur_on")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPointclouds.length?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),e._v(" "),a("b",[e._v("Pointclouds")]),e._v(" ("+e._s(e.filteredPointclouds.length)+")")],1)],1)],1),e._l(e.filteredPointclouds,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="pointclouds/"+t.name},attrs:{to:"/layers/pointclouds/"+t.name,replace:""},on:{click:function(a){e.navigation="pointclouds/"+t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v("grain")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredVectordbs.length?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),e._v(" "),a("b",[e._v("Vectordbs")]),e._v(" ("+e._s(e.filteredVectordbs.length)+")")],1)],1)],1),e._l(e.filteredVectordbs,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="vectordbs/"+t.name},attrs:{to:"/layers/vectordbs/"+t.name,replace:""},on:{click:function(a){e.navigation="vectordbs/"+t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v("category")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(void 0!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredPoi_groups.length?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("scatter_plot")]),e._v(" "),a("b",[e._v("POI groups")]),e._v(" ("+e._s(e.filteredPoi_groups.length)+")")],1)],1)],1),e._l(e.filteredPoi_groups,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="poi_groups/"+t.name},attrs:{to:"/layers/poi_groups/"+t.name,replace:""},on:{click:function(a){e.navigation="poi_groups/"+t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v("scatter_plot")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(void 0!==t.title&&""!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),0!==e.filteredRoi_groups.length?a("v-list-group",[a("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("widgets")]),e._v(" "),a("b",[e._v("ROI groups")]),e._v(" ("+e._s(e.filteredRoi_groups.length)+")")],1)],1)],1),e._l(e.filteredRoi_groups,(function(t){return a("v-list-tile",{key:t.name,class:{activeNavigation:e.navigation==="roi_groups/"+t.name},attrs:{to:"/layers/roi_groups/"+t.name,replace:""},on:{click:function(a){e.navigation="roi_groups/"+t.name}}},[a("v-list-tile-action",[a("v-icon",[e._v("widgets")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(void 0!==t.title&&""!==t.title?t.title:t.name))])],1)],1)}))],2):e._e(),"init"===e.rasterdbsMode||"load"===e.rasterdbsMode?a("v-list-tile",[a("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading rasterdbs... ")],1):e._e(),"error"===e.rasterdbsMode?a("v-list-tile",[a("v-icon",[e._v("error")]),e._v(" Could not load rasterdbs. ")],1):e._e(),"init"===e.pointdbsMode||"load"===e.pointdbsMode?a("v-list-tile",[a("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading pointdbs... ")],1):e._e(),"error"===e.pointdbsMode?a("v-list-tile",[a("v-icon",[e._v("error")]),e._v(" Could not load pointdbs. ")],1):e._e(),"init"===e.pointcloudsMode||"load"===e.pointcloudsMode?a("v-list-tile",[a("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading pointclouds... ")],1):e._e(),"error"===e.pointcloudsMode?a("v-list-tile",[a("v-icon",[e._v("error")]),e._v(" Could not load pointclouds. ")],1):e._e(),"init"===e.vectordbsMode||"load"===e.vectordbsMode?a("v-list-tile",[a("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading vectordbs... ")],1):e._e(),"error"===e.vectordbsMode?a("v-list-tile",[a("v-icon",[e._v("error")]),e._v(" Could not load vectordbs. ")],1):e._e(),"init"===e.poi_groupsMode||"load"===e.poi_groupsMode?a("v-list-tile",[a("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading poi groups... ")],1):e._e(),"error"===e.poi_groupsMode?a("v-list-tile",[a("v-icon",[e._v("error")]),e._v(" Could not load poi groups. ")],1):e._e(),"init"===e.roi_groupsMode||"load"===e.roi_groupsMode?a("v-list-tile",[a("ring-loader",{attrs:{color:"#000000",size:"20px"}}),e._v(" loading roi groups... ")],1):e._e(),"error"===e.roi_groupsMode?a("v-list-tile",[a("v-icon",[e._v("error")]),e._v(" Could not load roi groups. ")],1):e._e()],2),a("div",{staticClass:"innergrid-item-main"},[a("router-view")],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.rasterdbsError,callback:function(t){e.rasterdbsError=t},expression:"rasterdbsError"}},[e._v(" "+e._s(e.rasterdbsErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.rasterdbsError=!1}}},[e._v("Close")])],1)],1)},O=[],S=a("8e5f"),P=a.n(S),T=(a("e607"),a("c0e3")),C=function(){var e=new Intl.Collator(void 0,{numeric:!0}).compare;return function(t,a){return e(void 0===t.title||""===t.title?t.name:t.title,void 0===a.title||""===a.title?a.name:a.title)}}(),j={name:"admin-layers",components:{RingLoader:T["a"],Multiselect:P.a},data:function(){return{navigation:"overview",selectedTags:[],searchText:void 0}},methods:{refreshLayers:function(){this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("vectordbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh"),this.$store.dispatch("layer_tags/refresh")}},computed:{items:function(){var e=[];return e.push({name:"overview",title:"overview",icon:"apps"}),e},layer_tags:function(){return this.$store.state.layer_tags.data},filterFun:function(){var e=this.tagFilterFun,t=this.searchFilterFun;return function(a){return e(a)&&t(a)}},tagFilterFun:function(){if(0===this.selectedTags.length)return function(){return!0};if(1===this.selectedTags.length){var e=this.selectedTags[0];return function(t){var a=t.tags;return void 0!==a&&a.indexOf(e)>=0}}var t=this.selectedTags;return function(e){var a=e.tags;return void 0!==a&&t.every((function(e){return a.indexOf(e)>=0}))}},searchFilterFun:function(){var e=this.searchText;return void 0===e||null===e||0===e.length?function(){return!0}:(e=e.trim().toLowerCase(),""==e?function(){return!0}:function(t){return t.name.toLowerCase().indexOf(e)>=0||void 0!==t.title&&t.title.toLowerCase().indexOf(e)>=0})},filteredRasterdbs:function(){return void 0===this.rasterdbs?[]:this.rasterdbs.filter(this.filterFun).sort(C)},rasterdbs:function(){return this.$store.state.rasterdbs.data},rasterdbsMode:function(){return this.$store.state.rasterdbs.mode},rasterdbsError:{get:function(){return"error"===this.$store.state.rasterdbs.mode&&this.$store.state.rasterdbs.messageActive},set:function(e){0==e&&this.$store.commit("rasterdbs/closeMessage")}},rasterdbsErrorMessage:function(){return this.$store.state.rasterdbs.message},filteredPointdbs:function(){return void 0===this.pointdbs?[]:this.pointdbs.filter(this.filterFun).sort(C)},pointdbs:function(){return this.$store.state.pointdbs.data},pointdbsMode:function(){return this.$store.state.pointdbs.mode},pointdbsError:{get:function(){return"error"===this.$store.state.pointdbs.mode&&this.$store.state.pointdbs.messageActive},set:function(e){0==e&&this.$store.commit("pointdbs/closeMessage")}},pointdbsErrorMessage:function(){return this.$store.state.pointdbs.message},filteredPointclouds:function(){return void 0===this.pointclouds?[]:this.pointclouds.filter(this.filterFun).sort(C)},pointclouds:function(){return this.$store.state.pointclouds.data},pointcloudsMode:function(){return this.$store.state.pointclouds.mode},pointcloudsError:{get:function(){return"error"===this.$store.state.pointclouds.mode&&this.$store.state.pointclouds.messageActive},set:function(e){0==e&&this.$store.commit("pointclouds/closeMessage")}},pointcloudsErrorMessage:function(){return this.$store.state.rasterdbs.message},filteredVectordbs:function(){return void 0===this.vectordbs?[]:this.vectordbs.filter(this.filterFun).sort(C)},vectordbs:function(){return this.$store.state.vectordbs.data},vectordbsMode:function(){return this.$store.state.vectordbs.mode},vectordbsError:{get:function(){return"error"===this.$store.state.vectordbs.mode&&this.$store.state.vectordbs.messageActive},set:function(e){0==e&&this.$store.commit("vectordbs/closeMessage")}},vectordbsErrorMessage:function(){return this.$store.state.vectordbs.message},filteredPoi_groups:function(){return void 0===this.poi_groups?[]:this.poi_groups.filter(this.filterFun).sort(C)},poi_groups:function(){return this.$store.state.poi_groups.data},poi_groupsMode:function(){return this.$store.state.poi_groups.mode},poi_groupsError:{get:function(){return"error"===this.$store.state.poi_groups.mode&&this.$store.state.poi_groups.messageActive},set:function(e){0==e&&this.$store.commit("poi_groups/closeMessage")}},poi_groupsErrorMessage:function(){return this.$store.state.poi_groups.message},filteredRoi_groups:function(){return void 0===this.roi_groups?[]:this.roi_groups.filter(this.filterFun).sort(C)},roi_groups:function(){return this.$store.state.roi_groups.data},roi_groupsMode:function(){return this.$store.state.roi_groups.mode},roi_groupsError:{get:function(){return"error"===this.$store.state.roi_groups.mode&&this.$store.state.roi_groups.messageActive},set:function(e){0==e&&this.$store.commit("roi_groups/closeMessage")}},roi_groupsErrorMessage:function(){return this.$store.state.roi_groups.message}},mounted:function(){this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("pointdbs/init"),this.$store.dispatch("pointclouds/init"),this.$store.dispatch("vectordbs/init"),this.$store.dispatch("poi_groups/init"),this.$store.dispatch("roi_groups/init"),this.$store.dispatch("layer_tags/init")}},M=j,$=(a("66db"),Object(p["a"])(M,E,O,!1,null,"e176b628",null)),R=$.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",{staticClass:"headline mb-0",staticStyle:{"text-align":"center"}},[e._v(" Layers overview ")]),a("v-divider",{staticClass:"meta-divider"}),a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),e._v(" RasterDB")],1)]),a("v-card-text",[e._v(" Layers of this type store spatial "),a("b",[e._v("pixel data")]),e._v(" as rasters that are organised in points in time and in bands. ")]),a("v-btn",{on:{click:function(t){return e.$router.push({path:"/upload"})}}},[a("v-icon",[e._v("cloud_upload")]),e._v("upload")],1),e._v(" Insert raster-file data (e.g. GeoTIFF) into new or existing RasterDB-layers. ")],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),e._v(" PointDB")],1)]),a("v-card-text",[e._v(" Layers of this type store spatial point cloud points. Especially suitable for "),a("b",[e._v("LiDAR data")]),e._v(". ")])],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),e._v(" Pointcloud")],1)]),a("v-card-text",[e._v(" Layers of this type store spatial "),a("b",[e._v("point cloud points")]),e._v(". Points may contain a variety of attribues such as RGB color values. ")])],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),e._v(" VectorDB")],1)]),a("v-card-text",[e._v(" Layers of this type store spatial "),a("b",[e._v("general vector data")]),e._v(". ")]),a("admin-vectordb-create",{on:{created_vectordb:function(t){return e.$router.push({path:"/layers/vectordbs/"+t})}}}),e._v(" Add an empty VectorDB-layer. ")],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("scatter_plot")]),e._v(" POI group")],1)]),a("v-card-text",[e._v(" Groups of this type store vector data: spatial "),a("b",[e._v("Points")]),e._v(" with name. "),a("br"),e._v("From a vectordb-layer a POI-group of same name can be autogenerated by extracting point-features from vector-data. ")])],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("h3",{staticClass:"headline mb-0"},[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("widgets")]),e._v(" ROI group")],1)]),a("v-card-text",[e._v(" Groups of this type store vector data: "),a("b",[e._v("Polygons")]),e._v(" with name and spatial vertex points. "),a("br"),e._v("From a vectordb-layer a ROI-group of same name can be autogenerated by extracting polygon-features from vector-data. ")])],1)],1)],1)],1)],1)},D=[],N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"create new VectorDB layer"},slot:"activator"},[a("v-icon",[e._v("add")]),e._v(" create ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("create new VectorDB layer")])]),a("v-card-text",[a("v-text-field",{attrs:{label:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("i",[e._v("Space, not latin chars and other special chars are not allowed. You may replace space chars by underscore. "),a("br"),e._v("Allowed chars: 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_")])],1),a("v-card-text",[void 0!==e.identity?a("span",[e._v("Your roles: "),e._l(e.identity.roles,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])}))],2):e._e(),e.isAdmin?a("div",[e._v("Your are "),a("b",[e._v("admin")]),e._v(", so you are able read/modify layers independent of specified roles!")]):e._e(),a("br"),a("br"),e._v("Specified roles can "),a("b",[e._v("read")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}}),a("br"),e._v("Specified roles can "),a("b",[e._v("modify")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}}),a("br"),a("i",[e._v("Note: Only users that have one of the the read/modify roles are able to view/change created vector layer!")]),a("br"),e.name?e._e():a("span",{staticStyle:{color:"red"}},[e._v("ERROR: You need to specify a name for the new layer.")]),a("br"),0==e.selectedRoles.length||0==e.selectedRolesMod.length?a("span",{staticStyle:{color:"red"}},[e._v("ERROR: You need to specify at least one role for read and for modify.")]):e._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:!e.name||0==e.selectedRoles.length||0==e.selectedRolesMod.length},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},z=[],L=a("bc3a"),I=a.n(L);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){V(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var G={name:"admin-vectordb-create",props:[],components:{Multiselect:P.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,name:"",selectedRoles:[],selectedRolesMod:[],createdAclRoles:[]}},methods:{refresh:function(){this.$store.dispatch("acl_roles/refresh")},execute:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs");I.a.post(t,{create_vectordb:{name:e.name,acl:this.selectedRoles,acl_mod:this.selectedRolesMod}}).then((function(t){console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh"),e.$emit("created_vectordb",e.name)})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh")}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)}},computed:B({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{identity:function(){return this.$store.state.identity.data},acl_roles:function(){return void 0===this.availableRoles?this.createdAclRoles:this.availableRoles.concat(this.createdAclRoles)},availableRoles:function(){var e=void 0===this.$store.state.acl_roles?[]:this.$store.state.acl_roles.data;return void 0===this.identity?e:this.identity.roles.concat(e)}}),watch:{dialog:function(){this.dialog&&(this.selectedRoles=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0],this.selectedRolesMod=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0],this.refresh())},identity:function(){0==this.selectedRoles.length&&(this.selectedRoles=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0]),0==this.selectedRolesMod.length&&(this.selectedRolesMod=void 0===this.identity||0==this.identity.roles.length?[]:this.identity.roles[0])}},mounted:function(){this.refresh()}},q=G,U=(a("a851"),Object(p["a"])(q,N,z,!1,null,"ba31bdf4",null)),W=U.exports;function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var K={name:"admin-layers-overview",components:{"admin-vectordb-create":W},data:function(){return{}},methods:{},computed:H({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{rasterdbs:function(){return this.$store.state.rasterdbs.data}}),mounted:function(){this.$store.dispatch("rasterdbs/init")}},Q=K,Z=(a("55b6"),Object(p["a"])(Q,A,D,!1,null,"713a2ded",null)),X=Z.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("transition",{attrs:{name:"fade"}},[e.busy?a("div",{staticClass:"div-busy"},[a("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),a("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[a("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.rasterdb:e.meta.title)+" "),a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[a("v-icon",[e._v("zoom_in")])],1)],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?a("span",[a("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),a("b",[e._v(e._s(e.rasterdb))])]):e._e()]),e.metaError?a("div",[a("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-rasterdb-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),a("div",{staticClass:"meta-content",staticStyle:{poisition:"relative"}},[a("a",{attrs:{href:"#/viewer/"+e.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[a("img",{key:e.meta.name,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/raster.png?width=200"),alt:""}})]),a("table",{staticStyle:{"padding-right":"420px"}},[a("tr",[e._m(0),a("td",[0===e.meta.description.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.description))])])]),a("tr",[e._m(1),a("td",[void 0===e.meta.acquisition_date?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.acquisition_date))])])]),a("tr",[e._m(2),a("td",[void 0===e.meta.corresponding_contact?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.corresponding_contact))])])]),a("tr",[e._m(3),a("td",[e._l(e.optArray(e.meta.tags),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-rasterdb-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(4),a("td",[void 0===e.meta.ref.code||0===e.meta.ref.code.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.ref.code))])])]),a("tr",[e._m(5),a("td",[void 0===e.meta.ref.proj4||0===e.meta.ref.proj4.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.ref.proj4))])])])])]),a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-rasterdb-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),a("div",{staticClass:"meta-content"},[a("table",e._l(e.meta.associated,(function(t,s){return a("tr",{key:s},[a("td",[a("b",[e._v(e._s(s)+":")])]),a("td",e._l(e.optArray(t),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb layer info"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud layer info"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group layer info"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group layer info"}},[a("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)])],1),e.meta.bands.length>0?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Bands ("+e._s(e.meta.bands.length)+") ")]),a("v-data-table",{staticClass:"meta-content",attrs:{headers:e.bandsTableHeaders,items:e.meta.bands,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.index))]),a("td",[e._v(e._s(t.item.title))]),a("td",[e._v(e._s(t.item.wavelength))]),a("td",[e._v(e._s(t.item.fwhm))])]}}],null,!1,2436351214)})],1):e._e(),e.meta.timestamps.length>1||1===e.meta.timestamps.length&&0!=e.meta.timestamps[0].timestamp?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Dates ("+e._s(e.meta.timestamps.length)+") ")]),a("v-data-table",{staticClass:"meta-content",attrs:{headers:e.timestampTableHeaders,items:e.meta.timestamps,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.datetime))]),a("td",[e._v(e._s(t.item.timestamp))])]}}],null,!1,1749790962)})],1):e._e(),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),void 0!==e.meta.ref?a("div",{staticClass:"meta-content"},[a("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[a("thead",[a("tr",[a("th",[e._v("Pixel size "),a("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(6),a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),e._m(7)])]),a("tbody",[a("tr",[a("td",[e._v(e._s(e.pixelSizeText))]),void 0!==e.meta.ref.internal_rasterdb_extent?a("td",[e._v(e._s(e.meta.ref.internal_rasterdb_extent[2]-e.meta.ref.internal_rasterdb_extent[0]+1)+" "),a("b",[e._v("x")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[3]-e.meta.ref.internal_rasterdb_extent[1]+1))]):a("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_extent&&void 0!==e.meta.ref.pixel_size?a("td",[e._v(e._s(((e.meta.ref.internal_rasterdb_extent[2]-e.meta.ref.internal_rasterdb_extent[0]+1)*e.meta.ref.pixel_size.x).toPrecision(8))+" "),a("b",[e._v("x")]),e._v(" "+e._s(((e.meta.ref.internal_rasterdb_extent[3]-e.meta.ref.internal_rasterdb_extent[1]+1)*e.meta.ref.pixel_size.y).toPrecision(8)))]):a("td",[e._v("none")]),void 0!==e.meta.ref.extent?a("td",[e._v(e._s(e.meta.ref.extent[0].toPrecision(8))),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.extent[1].toPrecision(8))+" "),a("b",[e._v("-")]),e._v(" "+e._s(e.meta.ref.extent[2].toPrecision(8))),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.extent[3].toPrecision(8)))]):a("td",[e._v("none")])])])]),void 0===e.meta.tile_count?a("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[a("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.tile_count?a("div",[a("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[e._m(8),a("tbody",[a("tr",[void 0!==e.meta.tile_count?a("td",[e._v(e._s(e.meta.tile_count))]):a("td",[e._v("none")]),e._m(9),void 0!==e.meta.ref.internal_rasterdb_offset?a("td",[e._v(e._s(e.meta.ref.internal_rasterdb_offset.x.toPrecision(8))),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_offset.y.toPrecision(8)))]):a("td",[e._v("none")]),void 0!==e.meta.ref.internal_rasterdb_extent?a("td",[e._v(e._s(e.meta.ref.internal_rasterdb_extent[0])),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[1])+" "),a("b",[e._v("-")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[2])),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.ref.internal_rasterdb_extent[3]))]):a("td",[e._v("none")])])])]),a("table",{staticClass:"table-details"},[e._m(10),a("tbody",[a("tr",[void 0!==e.meta.storage_size?a("td",[e._v(e._s(e.meta.storage_size))]):a("td",[e._v("none")]),void 0!==e.meta.storage_internal_free_size?a("td",[e._v(e._s(e.meta.storage_internal_free_size))]):a("td",[e._v("none")]),void 0!==e.meta.tile_size_stats?a("td",[e._v("min: "+e._s(e.meta.tile_size_stats.min)+" mean: "+e._s(e.meta.tile_size_stats.mean)+" max: "+e._s(e.meta.tile_size_stats.max))]):a("td",[e._v("none")])])])])]):e._e()],1):e._e(),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.isAdmin?a("admin-rasterdb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(11),a("td",[e._l(e.meta.acl,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),a("tr",[e._m(12),a("td",[e._l(e.meta.acl_mod,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),a("div",{staticClass:"meta-content"},[a("a",{attrs:{href:this.urlPrefix+"../../web/wms_access/wms_access.html",target:"_blank"}},[e._v("WMS access info")])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?a("div",{staticClass:"meta-content"},[a("b",[e._v("Manage:")]),a("admin-rasterdb-bands",{attrs:{meta:e.meta},on:{changed:e.refresh}}),a("admin-rasterdb-dialog-remove-timestamps",{attrs:{meta:e.meta},on:{changed:e.refresh}}),a("br"),a("br"),a("admin-rasterdb-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},te=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("geo code:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v("pixel")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v("coordinates")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Tiles "),a("div",{staticClass:"header-unit"},[e._v("count")])]),a("th",[e._v("Tile size "),a("div",{staticClass:"header-unit"},[e._v("pixel")])]),a("th",[e._v("Tile reference point "),a("div",{staticClass:"header-unit"},[e._v("coordinates")])]),a("th",[e._v("Internal extent "),a("div",{staticClass:"header-unit"},[e._v("pixel")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[e._v("256 "),a("b",[e._v("x")]),e._v(" 256")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Storage size "),a("div",{staticClass:"header-unit"},[e._v("bytes")])]),a("th",[e._v("Storage internal free size "),a("div",{staticClass:"header-unit"},[e._v("bytes")])]),a("th",[e._v("Tile size "),a("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("modify roles:")])])}],ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set Infos of "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[a("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"acquisition date"},model:{value:e.newAcquisition_date,callback:function(t){e.newAcquisition_date=t},expression:"newAcquisition_date"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),a("v-card-text",[e._v(" Tags "),a("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},se=[];function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){ne(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oe(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var ce={name:"admin-rasterdb-dialog-set-info",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:ie({},Object(c["c"])({availableTags:function(e){return e.layer_tags.data}}),{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=oe(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");I.a.post(t,{meta:{title:e.newTitle,description:e.newDescription,acquisition_date:e.newAcquisition_date,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},le=ce,de=Object(p["a"])(le,ae,se,!1,null,null,null),ue=de.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set projection of "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[void 0==e.newCode||null==e.newCode||e.newCode.startsWith("EPSG:")?e._e():a("span",{staticStyle:{color:"red"}},[a("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" Projection code SHOULD start with "),a("b",[e._v("EPSG:")])],1),a("v-text-field",{attrs:{label:"projection code"},model:{value:e.newCode,callback:function(t){e.newCode=t},expression:"newCode"}}),e._v(" Code may be an "),a("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" identifier (e.g. 'EPSG:4326') ")],1),a("v-card-text",[a("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),a("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),a("v-card-text",[e._v(" Ensure same projection for projection code and proj4 ! ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},me=[],pe={name:"admin-rasterdb-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newCode=this.meta.ref.code,this.newProj4=this.meta.ref.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");I.a.post(t,{meta:{code:e.newCode,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},fe=pe,_e=Object(p["a"])(fe,ve,me,!1,null,null,null),he=_e.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set Associated layers of "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" PointDB-layer: This RasterDB layer is visualisation of that PointDB. (either PointDB or PointCloud) "),a("multiselect",{attrs:{options:e.pointdbs,placeholder:"select pointdb-layer","allow-empty":!0},model:{value:e.selectedPointdb,callback:function(t){e.selectedPointdb=t},expression:"selectedPointdb"}}),a("br"),e._v(" PointCloud-layer: This RasterDB layer is visualisation of that PointCloud. (either PointDB or PointCloud) "),a("multiselect",{attrs:{options:e.pointclouds,placeholder:"select pointcloud-layer","allow-empty":!0},model:{value:e.selectedPointcloud,callback:function(t){e.selectedPointcloud=t},expression:"selectedPointcloud"}}),a("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing. "),a("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),a("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing. "),a("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ge=[];function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){we(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function we(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ke={name:"admin-rasterdb-dialog-set-associated",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedPointdb:void 0,selectedPointcloud:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:xe({},Object(c["b"])({pointdbs:"pointdbs/names",pointclouds:"pointclouds/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedPointdb=this.meta.associated.PointDB,this.selectedPointcloud=this.meta.associated.pointcloud,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),a={};void 0!==this.selectedPointdb&&(a.PointDB=this.selectedPointdb),void 0!==this.selectedPointcloud&&(a.pointcloud=this.selectedPointcloud),a.poi_groups=this.selectedPoi_groups,a.roi_groups=this.selectedRoi_groups,I.a.post(t,{meta:{associated:a}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ee=ke,Oe=Object(p["a"])(Ee,be,ge,!1,null,null,null),Se=Oe.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set access control of "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-divider"),a("v-card-text",[e._v(" Specified roles can "),a("b",[e._v("read")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),a("v-card-text",[e._v(" Specified roles can "),a("b",[e._v("modify")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Te=[];function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){Me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var $e={name:"admin-rasterdb-dialog-set-acl",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:je({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.$store.getters.apiUrl("api/roles")).then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set");I.a.post(t,{meta:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Re=$e,Ae=Object(p["a"])(Re,Pe,Te,!1,null,null,null),De=Ae.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"Delete this raster layer. This can not be undone."},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("DELETE "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[e._v(" Delete this raster layer. "),a("b",[e._v("This can not be undone.")])]),a("v-card-text",[e._v(" Are you sure? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ze=[],Le={name:"admin-rasterdb-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/delete");I.a.post(t,{action:{delete_rasterdb:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Ie=Le,Fe=Object(p["a"])(Ie,Ne,ze,!1,null,null,null),Be=Fe.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{display:"inline-block"}},[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"open dialog to select and remove timestamps of this rasterdb layer"},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("timestamps ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("remove timestamps of "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-data-table",{staticClass:"meta-content",attrs:{headers:e.timestampTableHeaders,items:e.timestamps,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.remove,expression:"props.item.remove"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.item.remove)?e._i(t.item.remove,null)>-1:t.item.remove},on:{change:function(a){var s=t.item.remove,r=a.target,i=!!r.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);r.checked?o<0&&e.$set(t.item,"remove",s.concat([n])):o>-1&&e.$set(t.item,"remove",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t.item,"remove",i)}}}),e._v("remove timestamp")]),a("td",[e._v(e._s(t.item.datetime))]),a("td",[e._v(e._s(t.item.timestamp))]),a("td",{class:{remove:t.item.remove}},[e._v(e._s(t.item.remove?"remove timestamp":"(keep timestamp)"))])]}}])}),a("br"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),a("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Ge=[],qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Task Console")])]),"READY"===e.remote_task.status?a("v-icon",{attrs:{color:"yellow"}},[e._v("directions_walk")]):e._e(),"RUNNING"===e.remote_task.status?a("v-icon",{attrs:{color:"black"}},[e._v("directions_run")]):e._e(),"DONE"===e.remote_task.status?a("v-icon",{attrs:{color:"green"}},[e._v("done")]):e._e(),"ERROR"===e.remote_task.status?a("v-icon",{attrs:{color:"red"}},[e._v("error")]):e._e(),e._v(" "+e._s(e.remote_task.status)+" "),a("span",{staticStyle:{"padding-left":"50px"}},["READY"!==e.remote_task.status&&"RUNNING"!==e.remote_task.status||e.remote_task.canceled||!e.remote_task.cancelable?e._e():a("span",[a("v-btn",{attrs:{icon:""},on:{click:function(t){return e.cancel(e.remote_task.id)}}},[a("v-icon",[e._v("cancel")]),e._v(" cancel")],1)],1),e.remote_task.canceled||e.remote_task.cancelable?e._e():a("span",[e._v("---")]),e.remote_task.canceled?a("span",[e._v("cancel requested")]):e._e()]),a("br"),e._v(" id: "+e._s(e.id)+", time "+e._s((e.remote_task.runtime/1e3).toFixed())+" s "),a("br"),e._v(" "+e._s(e.remote_task.message)+" "),a("v-card-actions",[a("v-spacer"),"error"===e.status?a("span",[e._v("error "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1):e._e()],1),a("span",{staticStyle:{color:"grey"}},[a("v-icon",[e._v("event_note")]),e._v(" Click outside of this box to close it. "),a("br"),e._v("Task continues to run and can be viewed on status view.")],1),a("hr"),a("b",[e._v("Log Messages")]),e._l(e.log,(function(t,s){return a("div",{key:s},[e._v(e._s(t))])}))],2)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ue=[],We=a("a34a"),Je=a.n(We);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(Object(a),!0).forEach((function(t){Ke(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qe(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(s,r)}function Ze(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){Qe(i,s,r,n,o,"next",e)}function o(e){Qe(i,s,r,n,o,"throw",e)}n(void 0)}))}}var Xe={name:"admin-task-console",props:{id:Number,closeOnDone:Boolean},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task:{},status:"init",log:[]}},methods:{refresh:function(){},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},query_remote_task:function(){this.queryLog(this.id);var e=this;I.a.get(this.urlPrefix+"../../api/remote_tasks/"+this.id).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.remote_task.active?(e.status="running",window.setTimeout((function(){e.query_remote_task()}),1e3)):("DONE"===e.remote_task.status?(e.status="done",e.closeOnDone&&(e.dialog=!1),e.$emit("done")):(e.status="error",console.log("error"),e.$emit("error")),console.log(t))})).catch((function(t){e.setErrorMessage=e.errorToText(t),e.status="error",e.dialog&&window.setTimeout((function(){e.query_remote_task()}),1e3)}))},cancel:function(e){var t=this;return Ze(Je.a.mark((function a(){var s;return Je.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log(e),s=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/cancel"),a.next=5,I.a.post(s);case 5:t.refresh(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),console.log(a.t0);case 11:return a.prev=11,a.finish(11);case 13:case"end":return a.stop()}}),a,null,[[0,8,11,13]])})))()},queryLog:function(e){var t=this;return Ze(Je.a.mark((function a(){var s,r;return Je.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log(e),s=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/log"),a.next=5,I.a.get(s);case 5:r=a.sent,t.log=r.data.split("\n"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:return a.prev=12,a.finish(12);case 14:case"end":return a.stop()}}),a,null,[[0,9,12,14]])})))()}},computed:Ye({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}})),watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()},id:function(){this.setErrorMessage=void 0,void 0===this.id?(this.status="init",this.dialog=!1,this.remote_task={}):(this.status="init",this.dialog=!0,this.query_remote_task())}},mounted:function(){this.refresh()}},et=Xe,tt=Object(p["a"])(et,qe,Ue,!1,null,null,null),at=tt.exports,st={name:"admin-rasterdb-dialog-remove-timestamps",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,timestampTableHeaders:[{text:"",align:"left",sortable:!1},{text:"date",align:"left",value:"datetime"},{text:"timestamp",align:"left",value:"timestamp"},{text:"action",align:"left",value:"remove"}],timestamps:[],remote_task_id:void 0}},methods:{refresh:function(){this.timestamps=this.meta.timestamps.map((function(e){return{timestamp:e.timestamp,datetime:e.datetime,remove:!1}}))},execute:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks"),a=this.timestamps.filter((function(e){return e.remove})).map((function(e){return e.timestamp}));I.a.post(t,{remote_task:{task_rasterdb:"remove_timestamps",rasterdb:e.meta.name,timestamps:a}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1;var a=t.data.remote_task;e.remote_task_id=a.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},rt=st,it=(a("2e0a"),Object(p["a"])(rt,Ve,Ge,!1,null,"91c3f8ac",null)),nt=it.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{display:"inline-block"}},[a("v-dialog",{attrs:{lazy:"",absolute:"","min-width":"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"open dialog to edit band infos of this rasterdb layer"},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("bands ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Manage bands of "),a("i",[e._v("RasterDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-data-table",{staticClass:"meta-content",attrs:{headers:e.bandTableHeaders,items:e.bands,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.remove,expression:"props.item.remove"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.item.remove)?e._i(t.item.remove,null)>-1:t.item.remove},on:{change:function(a){var s=t.item.remove,r=a.target,i=!!r.checked;if(Array.isArray(s)){var n=null,o=e._i(s,n);r.checked?o<0&&e.$set(t.item,"remove",s.concat([n])):o>-1&&e.$set(t.item,"remove",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t.item,"remove",i)}}}),e._v("remove band")]),a("td",[e._v(e._s(t.item.index))]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.title,expression:"props.item.title"}],attrs:{placeholder:"title"},domProps:{value:t.item.title},on:{input:function(a){a.target.composing||e.$set(t.item,"title",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.visualisation,expression:"props.item.visualisation"}],attrs:{placeholder:"visualisation"},domProps:{value:t.item.visualisation},on:{input:function(a){a.target.composing||e.$set(t.item,"visualisation",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.vis_min,expression:"props.item.vis_min"}],attrs:{placeholder:"vis_min"},domProps:{value:t.item.vis_min},on:{input:function(a){a.target.composing||e.$set(t.item,"vis_min",a.target.value)}}})]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.vis_max,expression:"props.item.vis_max"}],attrs:{placeholder:"vis_max"},domProps:{value:t.item.vis_max},on:{input:function(a){a.target.composing||e.$set(t.item,"vis_max",a.target.value)}}})]),a("td",{class:{remove:t.item.remove}},[e._v(e._s(t.item.remove?"remove band":"(keep band)"))])]}}])}),a("v-card-text",[a("b",[e._v("Edit")]),e._v(" band titles by click on band title entry. "),a("br"),a("b",[e._v("Remove")]),e._v(" bands by checkbox, all data of that band at all timestamps will be removed. ")]),a("br"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.execute()}}},[e._v("Execute")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),a("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},ct=[];function lt(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(s,r)}function dt(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){lt(i,s,r,n,o,"next",e)}function o(e){lt(i,s,r,n,o,"throw",e)}n(void 0)}))}}var ut={name:"admin-rasterdb-dialog-bands",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandTableHeaders:[{text:"",align:"left",sortable:!1},{text:"index",align:"left",value:"index"},{text:"title",align:"left",value:"title"},{text:"visualisation",align:"left",value:"visualisation"},{text:"vis_min",align:"left",value:"vis_min"},{text:"vis_max",align:"left",value:"vis_max"},{text:"action",align:"left",value:"remove"}],bands:[],remote_task_id:void 0}},methods:{refresh:function(){this.bands=this.meta.bands.map((function(e){return{index:e.index,title:e.title,visualisation:e.visualisation,vis_min:e.vis_min,vis_max:e.vis_max}}))},execute:function(){var e=this;return dt(Je.a.mark((function t(){var a,s;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/set"),t.prev=1,t.next=4,I.a.post(a,{meta:{bands:e.bands}});case 4:s=t.sent,console.log(s),e.bands.filter((function(e){return e.remove})).length>0?e.execute_bands_remove():(e.$emit("changed"),e.dialog=!1),t.next=16;break;case 9:t.prev=9,t.t0=t["catch"](1),e.setError=!0,e.setErrorMessage="Error setting property",console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 16:case"end":return t.stop()}}),t,null,[[1,9]])})))()},execute_bands_remove:function(){var e=this;return dt(Je.a.mark((function t(){var a,s,r,i;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters.apiUrl("api/remote_tasks"),s=e.bands.filter((function(e){return e.remove})).map((function(e){return e.index})),t.prev=2,t.next=5,I.a.post(a,{remote_task:{task_rasterdb:"remove_bands",rasterdb:e.meta.name,bands:s}});case 5:r=t.sent,console.log(r),e.$emit("changed"),e.dialog=!1,i=r.data.remote_task,e.remote_task_id=i.id,t.next=22;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0),console.log(t.t0),e.$emit("changed"),e.dialog=!1;case 22:case"end":return t.stop()}}),t,null,[[2,13]])})))()},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},vt=ut,mt=(a("6f24"),Object(p["a"])(vt,ot,ct,!1,null,"89c42bb4",null)),pt=mt.exports,ft=a("8a5d");function _t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function ht(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(a),!0).forEach((function(t){bt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function bt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var gt={name:"admin-rasterdb-detail",components:{"admin-rasterdb-dialog-set-info":ue,"admin-rasterdb-dialog-set-projection":he,"admin-rasterdb-dialog-set-associated":Se,"admin-rasterdb-dialog-set-acl":De,"admin-rasterdb-dialog-delete":Be,"admin-rasterdb-dialog-remove-timestamps":nt,"admin-rasterdb-bands":pt,PulseLoader:ft["a"]},props:["rasterdb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,bandsTableHeaders:[{text:"index",align:"left",value:"index"},{text:"title",align:"left",value:"title"},{text:"wavelength",align:"left",value:"wavelength"},{text:"fwhm",align:"left",value:"fwhm"}],timestampTableHeaders:[{text:"date",align:"left",value:"datetime"},{text:"timestamp",align:"left",value:"timestamp"}],panel:[!0,!0]}},methods:{refresh:function(e){var t=this;this.$store.dispatch("rasterdbs/refresh");var a=this.$store.getters.apiUrl("rasterdb/"+t.rasterdb+"/meta.json"),s={};e&&(s.tile_count=!0,s.storage_size=!0,s.storage_internal_free_size=!0,s.tile_size_stats=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",I.a.get(a,{params:s}).then((function(e){t.meta=e.data,t.busy=!1,t.busyMessage=void 0})).catch((function(e){t.metaError=!0,t.metaErrorMessage="getting meta data: "+t.errorToText(e),t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},computed:ht({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{pixelSizeText:function(){return void 0===this.meta||void 0===this.meta.ref||void 0===this.meta.ref.pixel_size?"not set":this.meta.ref.pixel_size.x===this.meta.ref.pixel_size.y?+this.meta.ref.pixel_size.x.toPrecision(8)+" x "+ +this.meta.ref.pixel_size.x.toPrecision(8):+this.meta.ref.pixel_size.x.toPrecision(8)+" x "+ +this.meta.ref.pixel_size.y.toPrecision(8)},modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0!==this.meta&&void 0!==this.meta.ref&&void 0!==this.meta.ref.unit&&void 0!==this.meta.ref.unit.name?this.meta.ref.unit.name:"projection units"}}),mounted:function(){this.refresh()},watch:{rasterdb:function(){this.refresh()}}},yt=gt,xt=(a("7e60"),Object(p["a"])(yt,ee,te,!1,null,"26aa23e4",null)),wt=xt.exports,kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("transition",{attrs:{name:"fade"}},[e.busy?a("div",{staticClass:"div-busy"},[a("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),a("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[a("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.pointcloud:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[a("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?a("span",[a("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),a("b",[e._v(e._s(e.pointcloud))])]):e._e()]),e.metaError?a("div",[a("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-pointcloud-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),a("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?a("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[a("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),a("table",{staticStyle:{"padding-right":"420px"}},[a("tr",[e._m(0),a("td",[0===e.meta.description.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.description))])])]),a("tr",[e._m(1),a("td",[void 0===e.meta.acquisition_date?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.acquisition_date))])])]),a("tr",[e._m(2),a("td",[void 0===e.meta.corresponding_contact?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.corresponding_contact))])])]),a("tr",[e._m(3),a("td",[e._l(e.optArray(e.meta.tags),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-pointcloud-dialog-set-projection",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Projection ")],1),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(4),a("td",[void 0===e.meta.code||0===e.meta.code.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.code))])])]),a("tr",[e._m(5),a("td",[void 0===e.meta.proj4||0===e.meta.proj4.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.proj4))])])])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-pointcloud-dialog-set-associated",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Associated ")],1),a("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?a("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),a("table",e._l(e.meta.associated,(function(t,s){return a("tr",{key:s},[a("td",[a("b",[e._v(e._s(s)+":")])]),a("td",e._l(e.optArray(t),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[a("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),a("div",{staticClass:"meta-content"},[a("div",{staticStyle:{"padding-bottom":"10px"}},[a("b",[e._v("point attributes:")]),e._l(e.meta.attributes,(function(t){return a("span",{key:t},[a("span",{staticClass:"point-attributes"},[e._v(e._s(t))])])}))],2),a("table",{staticClass:"table-details",staticStyle:{display:"inline-block"}},[a("thead",[a("tr",[a("th",[e._v("Point precision "),a("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),a("th",[e._v("Tile size "),a("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]),void 0!==e.meta.range?a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v(e._s(e.projection_units))])]):e._e(),void 0!==e.meta.extent?a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v("coordinates")])]):e._e()])]),a("tbody",[a("tr",[a("td",[e._v(e._s(1/e.meta.cell_scale))]),a("td",[e._v(e._s(e.meta.cell_size)+" "),a("b",[e._v("x")]),e._v(" "+e._s(e.meta.cell_size))]),void 0!==e.meta.range?a("td",[e._v(e._s(e.meta.range.x)+" "),a("b",[e._v("x")]),e._v(" "+e._s(e.meta.range.y))]):e._e(),void 0!==e.meta.extent?a("td",[e._v(e._s(e.meta.extent[0].toPrecision(8))),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.extent[1].toPrecision(8))+" "),a("b",[e._v("-")]),e._v(" "+e._s(e.meta.extent[2].toPrecision(8))),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.extent[3].toPrecision(8)))]):e._e()])])]),void 0===e.meta.storage_internal_free_size?a("v-btn",{staticStyle:{"vertical-align":"top"},on:{click:function(t){return e.refresh(!0)}}},[a("v-icon",[e._v("arrow_drop_down")]),e._v(" more")],1):e._e(),void 0!==e.meta.storage_internal_free_size?a("table",{staticClass:"table-details"},[a("thead",[a("tr",[void 0!==e.meta.cell_count?a("th",[e._v("Tiles "),a("div",{staticClass:"header-unit"},[e._v("count")])]):e._e(),void 0!==e.meta.cell_offset?a("th",[e._v("Tile reference point "),a("div",{staticClass:"header-unit"},[e._v("coordinates")])]):e._e(),void 0!==e.meta.cell_range?a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v("tiles")])]):e._e(),void 0!==e.meta.cell_extent?a("th",[e._v("Extent "),a("div",{staticClass:"header-unit"},[e._v("tile coordinates")])]):e._e()])]),a("tbody",[a("tr",[void 0!==e.meta.cell_count?a("td",[e._v(e._s(e.meta.cell_count))]):e._e(),void 0!==e.meta.cell_offset?a("td",[e._v(e._s(e.meta.cell_offset.x.toPrecision(8))),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_offset.y.toPrecision(8)))]):e._e(),void 0!==e.meta.cell_range?a("td",[e._v(e._s(e.meta.cell_range.x)+" "),a("b",[e._v("x")]),e._v(" "+e._s(e.meta.cell_range.y))]):e._e(),void 0!==e.meta.cell_extent?a("td",[e._v(e._s(e.meta.cell_extent[0])),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_extent[1])+" "),a("b",[e._v("-")]),e._v(" "+e._s(e.meta.cell_extent[2])),a("b",[e._v(",")]),e._v(" "+e._s(e.meta.cell_extent[3]))]):e._e()])])]):e._e(),a("div",[e._v(".")]),void 0!==e.meta.storage_internal_free_size?a("table",{staticClass:"table-details"},[e._m(6),a("tbody",[a("tr",[void 0!==e.meta.storage_size?a("td",[e._v(e._s(e.meta.storage_size))]):a("td",[e._v("none")]),void 0!==e.meta.storage_internal_free_size?a("td",[e._v(e._s(e.meta.storage_internal_free_size))]):a("td",[e._v("none")]),void 0!==e.meta.cell_size_stats?a("td",[e._v("min: "+e._s(e.meta.cell_size_stats.min)+" mean: "+e._s(e.meta.cell_size_stats.mean)+" max: "+e._s(e.meta.cell_size_stats.max))]):a("td",[e._v("none")])])])]):e._e()],1),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.isAdmin?a("admin-pointcloud-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(7),a("td",[e._l(e.meta.acl,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),a("tr",[e._m(8),a("td",[e._l(e.meta.acl_mod,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),a("div",{staticClass:"meta-content"},[a("v-btn",{on:{click:e.app_lidar_indices}},[a("v-icon",[e._v("folder_open")]),e._v(" LiDAR indices processing")],1),a("a",{attrs:{href:this.urlPrefix+"../../web/lidar_indices_description/lidar_indices_description.html",target:"_blank"}},[e._v("Indices Description")])],1),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),e.modify?a("div",{staticClass:"meta-content"},[a("admin-pointcloud-dialog-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1):e._e()],1):e._e()],1)},Et=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("geo code:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Storage size "),a("div",{staticClass:"header-unit"},[e._v("bytes")])]),a("th",[e._v("Storage internal free size "),a("div",{staticClass:"header-unit"},[e._v("bytes")])]),a("th",[e._v("Tile size "),a("div",{staticClass:"header-unit"},[e._v("bytes")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("modify roles:")])])}],Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set Infos of "),a("i",[e._v("PointCloud")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[a("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"acquisition date"},model:{value:e.newAcquisition_date,callback:function(t){e.newAcquisition_date=t},expression:"newAcquisition_date"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),a("v-card-text",[e._v(" Tags "),a("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},St=[];function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Tt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(a),!0).forEach((function(t){Ct(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jt(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var Mt={name:"admin-pointcloud-dialog-set-description",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:Tt({},Object(c["c"])({availableTags:function(e){return e.layer_tags.data}}),{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=jt(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);I.a.post(t,{pointcloud:{title:e.newTitle,description:e.newDescription,acquisition_date:e.newAcquisition_date,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},$t=Mt,Rt=Object(p["a"])($t,Ot,St,!1,null,null,null),At=Rt.exports,Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set projection of "),a("i",[e._v("PointCloud")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[void 0==e.newCode||null==e.newCode||e.newCode.startsWith("EPSG:")?e._e():a("span",{staticStyle:{color:"red"}},[a("v-icon",{attrs:{color:"red"}},[e._v("warning")]),e._v(" Projection code SHOULD start with "),a("b",[e._v("EPSG:")])],1),a("v-text-field",{attrs:{label:"projection code"},model:{value:e.newCode,callback:function(t){e.newCode=t},expression:"newCode"}}),e._v(" Code may be an "),a("a",{attrs:{href:"https://epsg.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("EPSG")]),e._v(" identifier (e.g. 'EPSG:4326') ")],1),a("v-card-text",[a("v-text-field",{attrs:{label:"PROJ.4"},model:{value:e.newProj4,callback:function(t){e.newProj4=t},expression:"newProj4"}}),a("a",{attrs:{href:"http://proj4.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PROJ.4")]),e._v(" description (e.g. '+proj=longlat +datum=WGS84 +no_defs ') ")],1),a("v-card-text",[e._v(" Ensure same projection for projection code and proj4 ! ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Nt=[],zt={name:"admin-pointcloud-dialog-set-projection",props:["meta"],data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){this.newCode=this.meta.code,this.newProj4=this.meta.proj4},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);I.a.post(t,{pointcloud:{code:e.newCode,proj4:e.newProj4}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Lt=zt,It=Object(p["a"])(Lt,Dt,Nt,!1,null,null,null),Ft=It.exports,Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set Associated layers of "),a("i",[e._v("PointCloud")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",{staticStyle:{"min-height":"400px"}},[e._v(" RasterDB-layer: Raster-visualisation of this pointcloud. "),a("multiselect",{attrs:{options:e.rasterdbs,placeholder:"select rasterdb-layer","allow-empty":!0},model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}}),a("br"),e._v(" POI-groups: Groups of named geo-points that can be used for processing this pointcloud. "),a("multiselect",{attrs:{options:e.poi_groups,placeholder:"select poi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedPoi_groups,callback:function(t){e.selectedPoi_groups=t},expression:"selectedPoi_groups"}}),a("br"),e._v(" ROI-groups: Groups of named polygons that can be used for processing this pointcloud. "),a("multiselect",{attrs:{options:e.roi_groups,placeholder:"select roi-groups","allow-empty":!0,multiple:!0},model:{value:e.selectedRoi_groups,callback:function(t){e.selectedRoi_groups=t},expression:"selectedRoi_groups"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Vt=[];function Gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function qt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(a),!0).forEach((function(t){Ut(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ut(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Wt={name:"admin-pointcloud-dialog-set-associated",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRasterdb:void 0,selectedPoi_groups:[],selectedRoi_groups:[]}},computed:qt({},Object(c["b"])({rasterdbs:"rasterdbs/names",poi_groups:"poi_groups/names",roi_groups:"roi_groups/names"})),methods:{refresh:function(){this.selectedRasterdb=this.meta.associated.rasterdb,this.selectedPoi_groups=this.meta.associated.poi_groups,this.selectedRoi_groups=this.meta.associated.roi_groups,this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name),a={};void 0!==this.selectedRasterdb&&(a.rasterdb=this.selectedRasterdb),a.poi_groups=this.selectedPoi_groups,a.roi_groups=this.selectedRoi_groups,I.a.post(t,{pointcloud:{associated:a}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},Jt=Wt,Ht=Object(p["a"])(Jt,Bt,Vt,!1,null,null,null),Yt=Ht.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set access control of "),a("i",[e._v("PointCloud")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-divider"),a("v-card-text",[e._v(" Specified roles can "),a("b",[e._v("read")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),a("v-card-text",[e._v(" Specified roles can "),a("b",[e._v("modify")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Qt=[];function Zt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Xt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(a),!0).forEach((function(t){ea(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ta={name:"admin-pointcloud-dialog-set-projection",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,newCode:"",newProj4:"",setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:Xt({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../pointclouds/"+e.meta.name;I.a.post(t,{pointcloud:{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},aa=ta,sa=Object(p["a"])(aa,Kt,Qt,!1,null,null,null),ra=sa.exports,ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"Delete this PointCloud layer. This can not be undone."},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("DELETE "),a("i",[e._v("PointCloud")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[e._v(" Delete this PointCloud layer. "),a("b",[e._v("This can not be undone.")])]),a("v-card-text",[e._v(" Are you sure? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},na=[],oa={name:"admin-pointcloud-dialog-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("pointclouds/"+e.meta.name);I.a.post(t,{pointcloud:{delete_pointcloud:e.meta.name}}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ca=oa,la=Object(p["a"])(ca,ia,na,!1,null,null,null),da=la.exports;function ua(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function va(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(a),!0).forEach((function(t){ma(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ua(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ma(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var pa={name:"admin-pointcloud-detail",components:{"admin-pointcloud-dialog-set-info":At,"admin-pointcloud-dialog-set-projection":Ft,"admin-pointcloud-dialog-set-associated":Yt,"admin-pointcloud-dialog-set-acl":ra,"admin-pointcloud-dialog-delete":da,PulseLoader:ft["a"]},props:["pointcloud"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(e){var t=this;this.$store.dispatch("pointclouds/refresh");var a=this.$store.getters.apiUrl("pointclouds/"+t.pointcloud),s={};e&&(s.extent=!0,s.cell_count=!0,s.storage_size=!0,s.storage_internal_free_size=!0,s.cell_size_stats=!0),t.metaError=!1,t.metaErrorMessage=void 0,t.busy=!0,t.busyMessage="loading ...",I.a.get(a,{params:s}).then((function(e){t.meta=e.data.pointcloud,t.busy=!1,t.busyMessage=void 0})).catch((function(e){console.log(e),t.metaError=!0,t.metaErrorMessage="ERROR getting meta: "+e,t.meta=void 0,t.busy=!1,t.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.urlPrefix+"../../web/lidar_indices/lidar_indices.html";window.open(e,"_blank")}},computed:va({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix},projection_units:function(){return void 0!==this.meta.projection_unit&&void 0!==this.meta.projection_unit.name?this.meta.projection_unit.name:"projection units"}}),watch:{pointcloud:function(){this.refresh()}},mounted:function(){this.refresh()}},fa=pa,_a=(a("6c90"),Object(p["a"])(fa,kt,Et,!1,null,"23588c4a",null)),ha=_a.exports,ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("transition",{attrs:{name:"fade"}},[e.busy?a("div",{staticClass:"div-busy"},[a("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),a("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[a("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.vectordb:e.meta.title)+" "),a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/vectorviewer/"+e.vectordb,target:"_blank",title:"open layer in viewer on new tab"}},[a("v-icon",[e._v("zoom_in")])],1)],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?a("span",[a("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),a("b",[e._v(e._s(e.vectordb))])]):e._e()]),e.metaError?a("div",[a("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.modify?a("admin-vectordb-dialog-set-info",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Info ")],1),a("div",{staticClass:"meta-content",staticStyle:{poisition:"relative"}},[a("a",{attrs:{href:"#/vectorviewer/"+e.vectordb,target:"_blank",title:"open layer in viewer on new tab"}},[a("img",{key:e.meta.name,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("vectordbs/"+e.meta.name+"/raster.png?width=400&height=600&datatag="+e.meta.datatag),alt:""}})]),a("table",{staticStyle:{"padding-right":"420px"}},[a("tr",[e._m(0),a("td",[0===e.meta.description.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.description))])])]),a("tr",[e._m(1),a("td",[void 0===e.meta.corresponding_contact?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.corresponding_contact))])])]),a("tr",[e._m(2),a("td",[e._l(e.optArray(e.meta.tags),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Content "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.meta.data_filenames.length>0,expression:"meta.data_filenames.length > 0"}],staticStyle:{"font-size":"0.7em"},attrs:{href:e.urlPrefix+"../../vectordbs/"+e.meta.name+"/package.zip",download:e.meta.name+".zip",title:"download as ZIP-file"}},[a("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download)")],1)]),a("div",{staticClass:"meta-content"},[e.meta.data_filenames.length>0?a("table",e._l(e.meta.data_filenames,(function(t){return a("tr",{key:t},[a("td",{class:t===e.meta.data_filename?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.data_filename?a("td",[e._v(" <--")]):e._e()])})),0):e._e(),0===e.meta.data_filenames.length?a("div",{staticStyle:{color:"grey"}},[a("b",[e._v("no files.")]),e._v(' Click "Manage Files" to upload files. ')]):e._e()]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(3),a("td",[e._v(e._s(e.meta.details.epsg))])]),a("tr",[e._m(4),a("td",[e._v(e._s(e.meta.details.proj4))])]),a("tr",[e._m(5),a("td",e._l(e.meta.details.attributes,(function(t){return a("span",{key:t},[a("span",{class:t===e.meta.name_attribute?"name-attribute":"attributes"},[e._v(e._s(t))])])})),0)]),a("tr",[e._m(6),e.meta.structured_access.poi||e.meta.structured_access.roi?e._e():a("td",[e._v("none")]),e.meta.structured_access.poi?a("td",[e._v("POI-group")]):e._e(),e.meta.structured_access.roi?a("td",[e._v("ROI-group")]):e._e()])]),a("admin-vectordb-dialog-data-table",{attrs:{meta:e.meta},on:{changed:e.refresh}})],1),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e.isAdmin?a("admin-vectordb-dialog-set-acl",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e._v(" Access control ")],1),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(7),a("td",[e._l(e.meta.acl,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),a("tr",[e._m(8),a("td",[e._l(e.meta.acl_mod,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl_mod.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),e.modify?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Actions ")]),a("div",{staticClass:"meta-content"},[a("b",[e._v("Manage:")]),e.modify?a("admin-vectordb-dialog-files",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e.modify?a("admin-vectordb-attributes",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e(),e.modify?a("admin-vectordb-structured-access",{attrs:{meta:e.meta},on:{changed:function(t){e.refresh(),e.$store.dispatch("poi_groups/refresh"),e.$store.dispatch("roi_groups/refresh")}}}):e._e(),a("br"),a("br"),a("br"),e.modify?a("admin-vectordb-delete",{attrs:{meta:e.meta},on:{changed:e.refresh}}):e._e()],1)],1):e._e()],1):e._e()],1)},ga=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("attributes:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("structured access:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("modify roles:")])])}],ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"Delete this vector layer. This can not be undone."},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("delete_forever")]),e._v("delete entire layer ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("DELETE "),a("i",[e._v("VectorDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[e._v(" Delete this vector layer. "),a("b",[e._v("This can not be undone.")])]),a("v-card-text",[e._v(" Are you sure? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"red--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.delete_layer()}}},[e._v("Delete")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},xa=[],wa={name:"admin-vectordb-delete",props:["meta"],data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){},delete_layer:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name);I.a.delete(t).then((function(t){console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh"),e.$emit("changed")})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t),e.dialog=!1,e.$store.dispatch("vectordbs/refresh")}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ka=wa,Ea=Object(p["a"])(ka,ya,xa,!1,null,null,null),Oa=Ea.exports,Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{display:"inline-block"}},[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"Upload new files or remove existing files"},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Files ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Upload / Remove Files")])]),a("v-card-text",[a("uploader",{ref:"uploader",staticClass:"uploader-example",attrs:{options:e.options},on:{"file-success":e.fileFinished}},[a("uploader-unsupport"),a("uploader-drop",[a("p",[a("b",[e._v("Upload")]),e._v(" (possibly multiple files at once) - Drop files here or")]),a("uploader-btn",[a("v-icon",[e._v("cloud_upload")]),e._v("select files")],1)],1),a("uploader-list")],1),a("br"),a("hr"),a("b",[e._v("Files in layer:")]),a("br"),a("br"),e.meta.data_filenames.length>0?a("table",e._l(e.meta.data_filenames,(function(t){return a("tr",{key:t},[a("td",{class:t===e.meta.data_filename?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.data_filename?a("td",[e._v(" <--")]):a("td"),t===e.meta.data_filename?a("td",[a("b",[e._v("(anchor)")])]):a("td",[a("button",{staticClass:"button-set-anchor",on:{click:function(a){return e.setAnchorFile(t)}}},[e._v("set anchor")])]),a("td",[a("button",{staticClass:"button-delete",on:{click:function(a){return e.deleteFile(t)}}},[e._v("delete file")])])])})),0):e._e(),0===e.meta.data_filenames.length?a("div",[e._v(" no data files ")]):e._e(),a("hr"),a("br"),a("i",[e._v('"anchor" should point to the vector-file that should be visualised. '),a("br"),e._v('For shapefile format anchor needs to be set to the ".shp"-file. '),a("br"),e._v('".gpkg"-files (GeoPackage) are also supported. ')])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),a("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Pa=[],Ta=a("ef55"),Ca=a.n(Ta);s["default"].use(Ca.a);var ja={name:"admin-vectordb-dialog-files",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1,options:{target:void 0,testChunks:!1,chunkSize:10485760,simultaneousUploads:1}}},methods:{refresh:function(){this.options.target=this.$store.getters.apiUrl("vectordbs/"+this.meta.name+"/files")},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},fileFinished:function(){this.need_refresh_catalog_entry=!0,console.log("fileFinished"),this.$emit("changed")},deleteFile:function(e){var t=this;this.need_refresh_catalog_entry=!0;var a=this.$store.getters.apiUrl("vectordbs/"+t.meta.name+"/files/"+e);I.a.delete(a).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},setAnchorFile:function(e){var t=this;this.need_refresh_catalog_entry=!0;var a=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);I.a.post(a,{data_filename:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var a=t.data.remote_task;e.remote_task_id=a.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){if(this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1),void 0!==this.$refs.uploader){var e=this.$refs.uploader.files.slice(0);for(var t in e)e[t].removeFile(e[t])}}},mounted:function(){this.refresh()}},Ma=ja,$a=(a("6541"),Object(p["a"])(Ma,Sa,Pa,!1,null,null,null)),Ra=$a.exports,Aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{display:"inline-block"}},[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"Set name attibute"},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Attributes ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set name attribute")])]),a("v-card-text",[a("br"),a("hr"),a("b",[e._v("Attributes:")]),a("br"),a("br"),a("table",e._l(e.meta.details.attributes,(function(t){return a("tr",{key:t},[a("td",{class:t===e.meta.name_attribute?"data-filename-primary":"data-filename-other"},[e._v(e._s(t))]),t===e.meta.name_attribute?a("td",[e._v(" <--")]):a("td"),t===e.meta.name_attribute?a("td",[a("b",[e._v("(name attribute)")])]):a("td",[a("button",{staticClass:"button-set-anchor",on:{click:function(a){return e.setNameAttribute(t)}}},[e._v("set name attribute")])])])})),0),0===e.meta.details.attributes.length?a("div",[e._v(" no attributes ")]):e._e(),a("hr"),a("br"),a("i",[e._v('"name attribute" denotes the attribut that should be used as name of a vector feature. ')])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),a("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Da=[];s["default"].use(Ca.a);var Na={name:"admin-vectordb-attributes",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},fileFinished:function(){this.need_refresh_catalog_entry=!0,console.log("fileFinished"),this.$emit("changed")},setNameAttribute:function(e){var t=this;this.need_refresh_catalog_entry=!0;var a=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);I.a.post(a,{name_attribute:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refresh:function(){},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var a=t.data.remote_task;e.remote_task_id=a.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){if(this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1),void 0!==this.$refs.uploader){var e=this.$refs.uploader.files.slice(0);for(var t in e)e[t].removeFile(e[t])}}},mounted:function(){this.refresh()}},za=Na,La=(a("2f00"),Object(p["a"])(za,Aa,Da,!1,null,null,null)),Ia=La.exports,Fa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{display:"inline-block"}},[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px",persistent:e.blocked},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"Set name attibute"},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("Structured Access ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("set structured access")])]),a("v-card-text",[a("br"),a("hr"),a("b",[e._v("enable/disable access types:")]),a("br"),a("br"),a("table",[a("tr",[a("td",[a("v-switch",{attrs:{label:"POI-group"},model:{value:e.structured_access_poi,callback:function(t){e.structured_access_poi=t},expression:"structured_access_poi"}})],1),a("td",{staticStyle:{"padding-left":"20px"}},[a("i",[e._v("view of named "),a("b",[e._v("points")]),e._v(" (Points Of Interest)")])])]),a("tr",[a("td",[a("v-switch",{attrs:{label:"ROI-group"},model:{value:e.structured_access_roi,callback:function(t){e.structured_access_roi=t},expression:"structured_access_roi"}})],1),a("td",{staticStyle:{"padding-left":"20px"}},[a("i",[e._v("view of named "),a("b",[e._v("polygons")]),e._v(" (Regions Of Interest)")])])])]),0===e.meta.details.attributes.length?a("div",[e._v(" no attributes ")]):e._e(),a("hr"),a("br"),a("p",[a("b",[e._v("Name")]),e._v(" of POI-group / ROI-group is identical to "),a("b",[e._v("vector layer name")]),e._v(".")]),a("p",[a("b",[e._v("Names")]),e._v(' for POIs and ROIs are determined by vector layer "'),a("b",[e._v("name attribute")]),e._v('" (may be set by "manage attributes" dialog).')]),a("p",[e._v("For "),a("b",[e._v("POIs")]),e._v(" just "),a("b",[e._v("point vector features")]),e._v(" are included in resulting POI collection. (Other geometry types will be ignored.)")]),a("p",[e._v("For "),a("b",[e._v("ROIs")]),e._v(" just "),a("b",[e._v("polygon vector features")]),e._v(' are included in resulting ROI collection. Multi-polygons and "holes" are not supported. (Other geometry types will be ignored.)')]),a("p",[e._v("Projection is identical to source vector layer projection.")])]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat",disabled:e.blocked},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.blocked},nativeOn:{click:function(t){return e.apply(t)}}},[e._v("Apply")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1),a("admin-task-console",{attrs:{id:e.remote_task_id,closeOnDone:""},on:{done:function(t){return e.$emit("changed")},error:function(t){return e.$emit("changed")}}})],1)},Ba=[];function Va(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(s,r)}function Ga(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){Va(i,s,r,n,o,"next",e)}function o(e){Va(i,s,r,n,o,"throw",e)}n(void 0)}))}}s["default"].use(Ca.a);var qa={name:"admin-vectordb-structured-access",props:["meta"],components:{"admin-task-console":at},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,remote_task_id:void 0,need_refresh_catalog_entry:!1,structured_access_poi:!1,structured_access_roi:!1,blocked:!1}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},setNameAttribute:function(e){var t=this;this.need_refresh_catalog_entry=!0;var a=this.$store.getters.apiUrl("vectordbs/"+t.meta.name);I.a.post(a,{name_attribute:e}).then((function(e){console.log(e),t.$emit("changed")})).catch((function(e){console.log(e),console.log(t.errorToText(e)),t.setError=!0,t.setErrorMessage="Error: "+t.errorToText(e),console.log(e),t.$emit("changed")}))},refresh:function(){this.structured_access_poi=this.meta.structured_access.poi,this.structured_access_roi=this.meta.structured_access.roi,this.need_refresh_catalog_entry=!1},refreshCatalogEntry:function(){var e=this,t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:{task_vectordb:"refresh_catalog_entry",vectordb:e.meta.name}}).then((function(t){console.log(t);var a=t.data.remote_task;e.remote_task_id=a.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))},apply:function(){var e=this;return Ga(Je.a.mark((function t(){var a,s;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blocked=!0,t.prev=1,a=e.$store.getters.apiUrl("vectordbs/"+e.meta.name),t.next=5,I.a.post(a,{structured_access:{poi:e.structured_access_poi,roi:e.structured_access_roi}});case 5:s=t.sent,console.log(s),e.dialog=!1,t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),console.log(e.errorToText(t.t0)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t.t0);case 16:return t.prev=16,e.blocked=!1,e.$emit("changed"),t.finish(16);case 20:case"end":return t.stop()}}),t,null,[[1,10,16,20]])})))()}},computed:{},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog?this.refresh():this.need_refresh_catalog_entry&&(this.refreshCatalogEntry(),this.need_refresh_catalog_entry=!1)}},mounted:function(){this.refresh()}},Ua=qa,Wa=(a("8890"),Object(p["a"])(Ua,Fa,Ba,!1,null,null,null)),Ja=Wa.exports,Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set Infos of "),a("i",[e._v("VectorDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-card-text",[a("v-text-field",{attrs:{label:"title"},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"description"},model:{value:e.newDescription,callback:function(t){e.newDescription=t},expression:"newDescription"}})],1),a("v-card-text",[a("v-text-field",{attrs:{label:"corresponding contact"},model:{value:e.new_corresponding_contact,callback:function(t){e.new_corresponding_contact=t},expression:"new_corresponding_contact"}})],1),a("v-card-text",[e._v(" Tags "),a("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},Ya=[];function Ka(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Qa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(a),!0).forEach((function(t){Za(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ka(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Za(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xa(e){return void 0===e?[]:Array.isArray(e)?e:[e]}var es={name:"admin-vectordb-dialog-set-info",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,newTitle:"",newDescription:"",newAcquisition_date:"",new_corresponding_contact:"",setError:!1,setErrorMessage:void 0,selectedTags:[],createdTags:[]}},computed:Qa({},Object(c["c"])({availableTags:function(e){return void 0===e.layer_tags.data?[]:e.layer_tags.data}}),{layer_tags:function(){return void 0===this.availableTags?this.createdTags:this.availableTags.concat(this.createdTags)}}),methods:{createTag:function(e){this.createdTags.push(e),this.selectedTags.push(e)},refresh:function(){this.newTitle=this.meta.title,this.newDescription=this.meta.description,this.newAcquisition_date=void 0===this.meta.acquisition_date?"":this.meta.acquisition_date,this.new_corresponding_contact=void 0===this.meta.corresponding_contact?"":this.meta.corresponding_contact,this.selectedTags=Xa(this.meta.tags),this.$store.dispatch("layer_tags/refresh")},set:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name);I.a.post(t,{title:e.newTitle,description:e.newDescription,corresponding_contact:e.new_corresponding_contact,tags:e.selectedTags}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){e.setError=!0,e.setErrorMessage="Error setting property",console.log(t),e.$emit("changed"),e.dialog=!1}))}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ts=es,as=Object(p["a"])(ts,Ha,Ya,!1,null,null,null),ss=as.exports,rs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"indigo--text",attrs:{slot:"activator",icon:"",title:"edit"},slot:"activator"},[a("v-icon",[e._v("create")])],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Set access control of "),a("i",[e._v("VectorDB")]),e._v(" "),a("b",[e._v(e._s(e.meta.name))])])]),a("v-divider"),a("v-card-text",[e._v(" Specified roles can "),a("b",[e._v("read")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}})],1),a("v-card-text",[e._v(" Specified roles can "),a("b",[e._v("modify")]),e._v(" layer data. "),a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.selectedRolesMod,callback:function(t){e.selectedRolesMod=t},expression:"selectedRolesMod"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.set(t)}}},[e._v("Set")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},is=[];function ns(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function os(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(a),!0).forEach((function(t){cs(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ns(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function cs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ls={name:"admin-vectordb-dialog-set-acl",props:["meta"],components:{Multiselect:P.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,selectedRoles:[],selectedRolesMod:[],availableRoles:[],createdAclRoles:[]}},computed:os({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{acl_roles:function(){return this.availableRoles.concat(this.createdAclRoles)}}),methods:{createAclRole:function(e){this.createdAclRoles.push(e),this.selectedRoles.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.selectedRolesMod.push(e)},refresh:function(){var e=this;this.selectedRoles=this.meta.acl,this.selectedRolesMod=this.meta.acl_mod,I.a.get(this.urlPrefix+"../../api/roles").then((function(t){e.availableRoles=t.data.roles})).catch((function(e){console.log(e)}))},set:function(){var e=this,t=this.urlPrefix+"../../vectordbs/"+e.meta.name;I.a.post(t,{acl:e.selectedRoles,acl_mod:e.selectedRolesMod}).then((function(t){console.log(t),e.$emit("changed"),e.dialog=!1})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.$emit("changed"),e.dialog=!1}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data}},watch:{meta:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},ds=ls,us=Object(p["a"])(ds,rs,is,!1,null,null,null),vs=us.exports,ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"create new VectorDB layer"},slot:"activator"},[a("v-icon",[e._v("storage")]),e._v(" open data table ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("Data Table")])]),a("v-data-table",{attrs:{headers:e.headers,items:e.data},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.attributes.length,(function(s,r){return a("td",{key:r},[e._v(e._s(t.item[r]))])}))}}])}),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},ps=[],fs={name:"admin-vectordb-dialog-data-table",props:["meta"],components:{},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,attributes:["a","b","c"],data:[]}},methods:{errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)},refresh:function(){var e=this,t=this.$store.getters.apiUrl("vectordbs/"+e.meta.name+"/table.json");I.a.get(t,{}).then((function(t){console.log(t),e.attributes=t.data.attributes,e.data=t.data.data})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t)}))}},computed:{headers:function(){return this.attributes.map((function(e){return{text:e,value:1}}))}},watch:{meta:function(){this.dialog&&this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.dialog&&this.refresh()}},_s=fs,hs=Object(p["a"])(_s,ms,ps,!1,null,"3ea43876",null),bs=hs.exports;function gs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function ys(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(a),!0).forEach((function(t){xs(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gs(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ws={name:"admin-vectordb-detail",components:{PulseLoader:ft["a"],"admin-vectordb-delete":Oa,"admin-vectordb-dialog-files":Ra,"admin-vectordb-attributes":Ia,"admin-vectordb-structured-access":Ja,"admin-vectordb-dialog-set-info":ss,"admin-vectordb-dialog-set-acl":vs,"admin-vectordb-dialog-data-table":bs},props:["vectordb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(){var e=this;this.$store.dispatch("vectordbs/refresh");var t=this.urlPrefix+"../../vectordbs/"+e.vectordb;e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data.vectordb,e.busy=!1,e.busyMessage=void 0})).catch((function(t){e.metaError=!0,e.metaErrorMessage="getting meta data: "+e.errorToText(t),e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},computed:ys({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{},Object(c["b"])({isAdmin:"identity/isAdmin"}),{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),mounted:function(){this.refresh()},watch:{vectordb:function(){this.refresh()}}},ks=ws,Es=(a("249a"),Object(p["a"])(ks,ba,ga,!1,null,"5993e42e",null)),Os=Es.exports,Ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("transition",{attrs:{name:"fade"}},[e.busy?a("div",{staticClass:"div-busy"},[a("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),a("div",{staticStyle:{"text-align":"center","padding-right":"400px"}},[a("h3",{staticClass:"headline mb-0"},[e._v(" "+e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.pointdb:e.meta.title)+" "),void 0!==e.meta&&void 0!==e.meta.associated.rasterdb?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[a("v-icon",[e._v("zoom_in")])],1):e._e()],1),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?a("span",[a("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),a("b",[e._v(e._s(e.pointdb))])]):e._e()]),e.metaError?a("div",[a("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),a("div",{staticClass:"meta-content"},[void 0!==e.meta.associated.rasterdb?a("a",{attrs:{href:"#/viewer/"+e.meta.associated.rasterdb,target:"_blank",title:"open layer in viewer on new tab"}},[a("img",{key:e.meta.associated.rasterdb,staticClass:"thumbnail",attrs:{src:e.$store.getters.apiUrl("rasterdb/"+e.meta.associated.rasterdb+"/raster.png?width=200"),alt:""}})]):e._e(),a("table",{staticStyle:{"padding-right":"420px"}},[a("tr",[e._m(0),a("td",[0===e.meta.description.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.description))])])]),a("tr",[e._m(1),a("td",[void 0===e.meta.acquisition_date?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.acquisition_date))])])]),a("tr",[e._m(2),a("td",[void 0===e.meta.corresponding_contact?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.corresponding_contact))])])]),a("tr",[e._m(3),a("td",[e._l(e.optArray(e.meta.tags),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Projection ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(4),a("td",[void 0===e.meta.epsg||0===e.meta.epsg.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.epsg))])])]),a("tr",[e._m(5),a("td",[void 0===e.meta.proj4||0===e.meta.proj4.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.proj4))])])])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Associated ")]),a("div",{staticClass:"meta-content"},[0===Object.keys(e.meta.associated).length?a("span",{staticStyle:{color:"grey"}},[e._v(" (none) ")]):e._e(),a("table",e._l(e.meta.associated,(function(t,s){return a("tr",{key:s},[a("td",[a("b",[e._v(e._s(s)+":")])]),a("td",e._l(e.optArray(t),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))]),"PointDB"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointdbs/"+t,title:"go to pointdb"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"pointcloud"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/pointclouds/"+t,title:"go to pointcloud"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"rasterdb"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/rasterdbs/"+t,title:"go to rasterdb"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"poi_groups"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/poi_groups/"+t,title:"go to POI group"}},[a("v-icon",[e._v("open_in_new")])],1):e._e(),"roi_groups"===s?a("v-btn",{staticClass:"indigo--text",attrs:{icon:"",href:"#/layers/roi_groups/"+t,title:"go to ROI group"}},[a("v-icon",[e._v("open_in_new")])],1):e._e()],1)})),0)])})),0)]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Details ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(6),a("td",[e._v(e._s(e.meta.classified))])]),a("tr",[e._m(7),a("td",[e._v(e._s(e.meta.classified_vegetation))])]),a("tr",[e._m(8),a("td",[e._v(e._s(e.meta.tile_size))])])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(9),a("td",[e._l(e.meta.acl,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Applications ")]),a("div",{staticClass:"meta-content"},[a("v-btn",{on:{click:e.app_lidar_indices}},[a("v-icon",[e._v("folder_open")]),e._v(" LiDAR indices processing")],1),a("a",{attrs:{href:this.urlPrefix+"../../web/lidar_indices_description/lidar_indices_description.html",target:"_blank"}},[e._v("Indices Description")])],1)],1):e._e()],1)},Ps=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("acquisition date:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("corresponding contact:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("ground classified:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("vegetation classified:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tile size:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles:")])])}];function Ts(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Cs(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(a),!0).forEach((function(t){js(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ts(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function js(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ms={name:"admin-pointdb-detail",components:{PulseLoader:ft["a"]},props:["pointdb"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0}},methods:{refresh:function(){var e=this,t=this.$store.getters.apiUrl("pointdb/info.json?db="+e.pointdb+"&statistics=false");e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},app_lidar_indices:function(){var e=this.$store.getters.apiUrl("web/lidar_indices/lidar_indices.html");window.open(e,"_blank")}},computed:Cs({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify},urlPrefix:function(){return this.$store.state.identity.urlPrefix}}),watch:{pointdb:function(){this.refresh()}},mounted:function(){this.refresh()}},$s=Ms,Rs=(a("adfc"),Object(p["a"])($s,Ss,Ps,!1,null,"e3bf4ce6",null)),As=Rs.exports,Ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("transition",{attrs:{name:"fade"}},[e.busy?a("div",{staticClass:"div-busy"},[a("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),a("div",{staticStyle:{"text-align":"center"}},[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.poi_group:e.meta.title))]),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?a("span",[a("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),a("b",[e._v(e._s(e.poi_group))])]):e._e()]),e.metaError?a("div",[a("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(0),a("td",[0===e.meta.description.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.description))])])]),a("tr",[e._m(1),a("td",[e._l(e.optArray(e.meta.tags),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),a("tr",[e._m(2),a("td",[0===e.meta.epsg.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.epsg))])])]),a("tr",[e._m(3),a("td",[0===e.meta.proj4.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.proj4))])])])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(4),a("td",[e._l(e.meta.acl,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("v-card-title",[e._v(" "+e._s(e.meta.pois.length)+" POIs "),a("v-spacer"),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.meta.pois,"hide-actions":"",search:e.search,"custom-filter":e.filterFunc,"custom-sort":e.sortFunc},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),a("td",[e._v(e._s(t.item.x)+", "+e._s(t.item.y))])]}}],null,!1,947854177)})],1):e._e()],1)},Ns=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles:")])])}];function zs(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Ls(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(a),!0).forEach((function(t){Is(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zs(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Is(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Fs={name:"admin-poi_group-detail",components:{PulseLoader:ft["a"]},props:["poi_group"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,headers:[{text:"name",value:"name"},{text:"position",value:"position"}],search:void 0}},methods:{refresh:function(){var e=this,t=this.urlPrefix+"../../poi_groups/"+e.poi_group;e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data.poi_group,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},filterFunc:function(e,t){return e.filter((function(e){return e.name.search(new RegExp(t,"i"))>=0}))},cmpFunc:function(e,t){var a=new Intl.Collator(void 0,{numeric:!0}).compare;switch(console.log(e),e){case"position":return function(e,a){var s=e.x-a.x,r=0===s?e.y-a.y:s;return t?-r:r};default:return function(e,s){var r=a(e.name,s.name);return t?-r:r}}},sortFunc:function(e,t,a){return e.sort(this.cmpFunc(t,a))}},computed:Ls({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{},Object(c["b"])({isAdmin:"identity/isAdmin"}),{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),watch:{poi_group:function(){this.refresh()}},mounted:function(){this.refresh()}},Bs=Fs,Vs=(a("712e"),Object(p["a"])(Bs,Ds,Ns,!1,null,"141ce6b6",null)),Gs=Vs.exports,qs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("transition",{attrs:{name:"fade"}},[e.busy?a("div",{staticClass:"div-busy"},[a("pulse-loader"),e._v(e._s(e.busyMessage)+" ")],1):e._e()]),a("div",{staticStyle:{"text-align":"center"}},[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(void 0===e.meta||void 0===e.meta.title||""===e.meta.title?e.roi_group:e.meta.title))]),void 0!==e.meta&&void 0!==e.meta.title&&""!==e.meta.title?a("span",[a("span",{staticStyle:{"user-select":"none"}},[e._v("id: ")]),a("b",[e._v(e._s(e.roi_group))])]):e._e()]),e.metaError?a("div",[a("b",[e._v("ERROR")]),e._v(" "+e._s(e.metaErrorMessage)+" ")]):e._e(),void 0!=e.meta?a("div",[a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Info ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(0),a("td",[0===e.meta.description.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.description))])])]),a("tr",[e._m(1),a("td",[e._l(e.optArray(e.meta.tags),(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.optArray(e.meta.tags).length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]),a("tr",[e._m(2),a("td",[0===e.meta.epsg.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.epsg))])])]),a("tr",[e._m(3),a("td",[0===e.meta.proj4.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):a("span",[e._v(e._s(e.meta.proj4))])])])])]),a("v-divider",{staticClass:"meta-divider"}),a("h3",{staticClass:"subheading mb-0"},[e._v(" Access control ")]),a("div",{staticClass:"meta-content"},[a("table",[a("tr",[e._m(4),a("td",[e._l(e.meta.acl,(function(t){return a("span",{key:t},[a("span",{staticClass:"meta-list"},[e._v(e._s(t))])])})),0===e.meta.acl.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)])])]),a("v-divider",{staticClass:"meta-divider"}),a("v-card-title",[e._v(" "+e._s(e.meta.rois.length)+" ROIs "),a("v-spacer"),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.meta.rois,"hide-actions":"",search:e.search,"custom-filter":e.filterFunc},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.name))]),a("td",[e._v(e._s(t.item.center[0])+", "+e._s(t.item.center[1]))]),a("td",[e._v(e._s(t.item.polygon.length-1))])]}}],null,!1,530476886)})],1):e._e()],1)},Us=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("EPSG:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("Proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles:")])])}];function Ws(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Js(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(a),!0).forEach((function(t){Hs(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ws(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Hs(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ys={name:"admin-roi_group-detail",components:{PulseLoader:ft["a"]},props:["roi_group"],data:function(){return{meta:void 0,metaError:!1,metaErrorMessage:void 0,busy:!1,busyMessage:void 0,headers:[{text:"name",value:"name"},{text:"center position",value:"center"},{text:"point count",value:"polygon"}],search:void 0}},methods:{refresh:function(){var e=this,t=this.$store.getters.apiUrl("roi_groups/"+e.roi_group);e.metaError=!1,e.metaErrorMessage=void 0,e.busy=!0,e.busyMessage="loading ...",I.a.get(t).then((function(t){e.meta=t.data.roi_group,e.busy=!1,e.busyMessage=void 0})).catch((function(t){console.log(t),e.metaError=!0,e.metaErrorMessage="ERROR getting meta: "+t,e.meta=void 0,e.busy=!1,e.busyMessage=void 0}))},optArray:function(e){return void 0===e?[]:Array.isArray(e)?e:[e]},filterFunc:function(e,t){return e.filter((function(e){return e.name.search(new RegExp(t,"i"))>=0}))}},computed:Js({},Object(c["b"])({isAdmin:"identity/isAdmin"}),{modify:function(){return void 0!==this.meta&&void 0!=this.meta.modify&&this.meta.modify}}),watch:{roi_group:function(){this.refresh()}},mounted:function(){this.refresh()}},Ks=Ys,Qs=(a("e7b2"),Object(p["a"])(Ks,qs,Us,!1,null,"25866a6f",null)),Zs=Qs.exports,Xs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main"},[a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"olmap-explorer"}}),a("div",{staticClass:"innergrid-container",class:[e.filter_focus?"innergrid-item-nav-fill":"innergrid-item-nav-compact"]},[a("v-list",{staticClass:"innergrid-item-nav"},[a("v-list-tile",[void 0!==e.layer_tags?a("multiselect",{attrs:{options:e.layer_tags,"show-labels":!1,placeholder:"filter by tag",multiple:!0},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}}):e._e()],1),a("v-list-tile",[a("v-text-field",{staticStyle:{display:"inline-block"},attrs:{label:"search",clearable:"","append-icon":"search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),a("v-list-tile",[a("v-btn",{staticStyle:{display:"inline-block"},attrs:{title:"zoom to all (filtered) layers"},on:{click:function(t){return e.zoomToEntries()}}},[a("v-icon",[e._v("control_camera")]),e._v("zoom fit")],1),a("v-btn",{staticStyle:{display:"inline-block"},attrs:{title:"select all (filtered) layers, even layers that are not visible on the map"},on:{click:function(t){return e.selectAllLayers()}}},[a("v-icon",[e._v("select_all")]),e._v("select all")],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,s){return a("div",{key:s},[a("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,s){return a("v-snackbar",{key:s,attrs:{value:"true"}},[e._v(" "+e._s(t)),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(s)}}},[e._v("Close")])],1)})),a("div",{staticClass:"hoverEntries"},[a("b",[e._v("hovered layers")]),e._l(e.hoverEntries,(function(t){return a("div",{key:t.name},[e._v(e._s(void 0===t.title?t.name:t.title))])}))],2),a("admin-explorer-selected",{attrs:{entries:e.selectedEntries,selectedTags:e.selectedTags,searchText:e.searchText}})],2)])},er=[],tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("div",{staticClass:"selectedEntries"},[a("div",{attrs:{id:"container"}},[a("v-btn",{attrs:{title:"go back to layer explorer map",icon:""},on:{click:function(t){e.show=!1}}},[a("v-icon",[e._v("arrow_back")])],1),a("h3",{staticClass:"headline mb-0",staticStyle:{"text-align":"center"}},[e._v(" Selected Layers ")]),a("v-btn",{attrs:{title:"go back to layer explorer map",icon:""},on:{click:function(t){e.show=!1}}},[a("v-icon",[e._v("cancel")])],1)],1),a("v-divider",{staticClass:"meta-divider"}),e.selectedTags.length>0?a("span",[e._v("by tags "),a("b",e._l(e.selectedTags,(function(t){return a("span",{key:t},[e._v(e._s(t))])})),0)]):e._e(),void 0!==e.searchText&&e.searchText.length>0?a("span",[e._v(" of search "),a("b",[e._v(e._s(e.searchText))])]):e._e(),a("v-data-table",{staticClass:"meta-content",attrs:{headers:e.tableHeaders,items:e.entries,pagination:e.pagination,"custom-sort":e.sortFunc,"hide-actions":""},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("v-icon",{staticStyle:{"user-select":"none"},attrs:{title:t.item.type}},[e._v(e._s(e.getIcon(t.item)))]),void 0!==e.getMapLink(t.item)?a("a",{attrs:{href:e.getMapLink(t.item),title:"view on map",target:"_blank"}},[a("v-icon",{staticStyle:{"user-select":"none",color:"blue"}},[e._v("zoom_in")])],1):e._e()],1),a("td",[void 0!==e.getLink(t.item)?a("a",{attrs:{href:e.getLink(t.item),title:"view details",target:"_blank"}},[e._v(e._s(t.item.name))]):e._e()]),a("td",[e._v(e._s(void 0!==t.item.title?t.item.title:""))]),a("td",[e._v(e._s(t.item.description))])]}}],null,!1,1350650275)})],1):e._e()},ar=[],sr={name:"admin-explorer-selected",props:["entries","selectedTags","searchText"],data:function(){return{show:!1,tableHeaders:[{text:"type",align:"left",value:"type"},{text:"ID",align:"left",value:"name"},{text:"Title",align:"left",value:"title"},{text:"Description",align:"left",value:"description"}],pagination:{rowsPerPage:-1,sortBy:"title"}}},methods:{onShow:function(){this.show=!0},getIcon:function(e){switch(e.type){case"RasterDB":return"collections";case"PointDB":return"blur_on";case"pointcloud":return"grain";case"vectordb":return"category";default:return"device_unknown"}},getLink:function(e){switch(e.type){case"RasterDB":return"#/layers/rasterdbs/"+e.name;case"PointDB":return"#/layers/pointdbs/"+e.name;case"pointcloud":return"#/layers/pointclouds/"+e.name;case"vectordb":return"#/layers/vectordbs/"+e.name;default:return}},getMapLink:function(e){switch(e.type){case"RasterDB":return"#/viewer/"+e.name;case"PointDB":return void 0!==e.associated&&void 0!==e.associated.rasterdb?"#/viewer/"+e.associated.rasterdb:void 0;case"pointcloud":return void 0!==e.associated&&void 0!==e.associated.rasterdb?"#/viewer/"+e.associated.rasterdb:void 0;case"vectordb":return"#/vectorviewer/"+e.name;default:return}},sortFunc:function(e,t,a){console.log("index "+t);var s=(new Intl.Collator).compare;return e.sort((function(e,r){var i=e[t],n=r[t],o=s(void 0===i?e.name:i,void 0===n?r.name:n);return a?-o:o}))}},watch:{},mounted:function(){this.$parent.$on("admin-explorer-selected-show",this.onShow)}},rr=sr,ir=(a("7ac7"),Object(p["a"])(rr,tr,ar,!1,null,"507879a8",null)),nr=ir.exports,or=(a("5bc0"),a("5eee")),cr=a("3e6b"),lr=a("480c"),dr=a("5831"),ur=a("d0e9"),vr=a("a2c7"),mr=a("256f"),pr=a("5bc3"),fr=a("4cdf"),_r=a("21bc"),hr=a("9d47"),br=a("020f"),gr=a("83a6"),yr=a("8682"),xr=a("6c77"),wr=a("ce2c"),kr=a("a568");function Er(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Or(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(a),!0).forEach((function(t){Sr(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Er(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Sr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Pr=mr["j"]("EPSG:4326"),Tr=mr["j"]("EPSG:3857"),Cr={name:"admin-explorer",components:{RingLoader:T["a"],Multiselect:P.a,"admin-explorer-selected":nr},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,catalogLayer:void 0,catalog:[],hoverEntries:[],selectedEntries:[],selectedTags:[],searchText:"",filter_focus:!1}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return s["default"].set(this.notifications,t,e),t},removeNotification:function(e){s["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return s["default"].set(this.messages,t,e),t},removeMessage:function(e){s["default"].delete(this.messages,e)},refreshCatalog:function(){var e=this,t=this.addMessage("loading catalog of layers ...");I.a.get(this.urlPrefix+"../../api/catalog.json").then((function(a){e.catalog=a.data,e.removeMessage(t)})).catch((function(){e.addnotification("ERROR loading catalog"),e.removeMessage(t)}))},refreshCatalogSource:function(e){var t=[];e.forEach((function(e){var a=e.polygon;if(void 0!==a){var s=new pr["a"]([a]);s.transform(Pr,Tr),t.push(new fr["a"]({geometry:s,entry:e}))}}));var a=new dr["a"]({features:t});this.catalogLayer.setSource(a),this.zoomToEntries()},zoomToEntries:function(){console.log("zoomToEntries");var e=180,t=90,a=-180,s=-90;this.filteredCatalog.forEach((function(r){var i=r.polygon;void 0!==i&&i.forEach((function(r){var i=r[0],n=r[1];i<e&&(e=i),n<t&&(t=n),a<i&&(a=i),s<n&&(s=n)}))}));var r=[e,t,a,s];console.log(r);var i=mr["g"]([e,t]),n=mr["g"]([a,s]),o=[i[0],i[1],n[0],n[1]];console.log(o),this.olmap.getView().fit(o)},selectAllLayers:function(){var e=this;e.selectedEntries=this.filteredCatalog,e.$emit("admin-explorer-selected-show")}},computed:Or({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{layer_tags:function(){return this.$store.state.layer_tags.data},filteredCatalog:function(){return this.catalog.filter(this.filterFun)},filterFun:function(){var e=this.tagFilterFun,t=this.searchFilterFun;return function(a){return e(a)&&t(a)}},tagFilterFun:function(){if(0===this.selectedTags.length)return function(){return!0};if(1===this.selectedTags.length){var e=this.selectedTags[0];return function(t){var a=t.tags;return void 0!==a&&a.indexOf(e)>=0}}var t=this.selectedTags;return function(e){var a=e.tags;return void 0!==a&&t.every((function(e){return a.indexOf(e)>=0}))}},searchFilterFun:function(){var e=this.searchText;return void 0===e||null===e||0===e.length?function(){return!0}:(e=e.trim().toLowerCase(),""==e?function(){return!0}:function(t){return t.name.toLowerCase().indexOf(e)>=0||void 0!==t.title&&t.title.toLowerCase().indexOf(e)>=0})}}),watch:{filteredCatalog:function(){this.refreshCatalogSource(this.filteredCatalog)}},mounted:function(){var e=this;document.getElementById("foot-start-1").innerHTML="WGS 84/Pseudo-Mercator",document.getElementById("foot-end-1").innerHTML="",this.$store.dispatch("layer_tags/init");var t=new gr["a"]({color:"rgba(255,255,255,0.0)"}),a=new yr["a"]({color:"rgb(95, 112, 245)",width:2}),s=[new xr["c"]({image:new wr["a"]({fill:t,stroke:a,radius:5}),fill:t,stroke:a})];this.catalogLayer=new cr["a"]({style:s}),this.olmap=new or["a"]({target:"olmap-explorer",layers:[new lr["a"]({source:new ur["b"]}),this.catalogLayer],view:new vr["a"]({center:mr["g"]([11,20.82]),zoom:3}),controls:_r["a"]({attributionOptions:{collapsible:!1}}).extend([new hr["a"],new br["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(kr["i"])(e,4)}})])}),this.refreshCatalog(),this.olmap.on("pointermove",(function(t){var a=[],s=e.catalogLayer.getSource().getFeaturesAtCoordinate(t.coordinate);s.forEach((function(e){a.push(e.get("entry"))})),e.hoverEntries=a})),this.olmap.on("click",(function(t){console.log("click");var a=[],s=e.catalogLayer.getSource().getFeaturesAtCoordinate(t.coordinate);s.forEach((function(e){a.push(e.get("entry"))})),e.selectedEntries=a,e.$emit("admin-explorer-selected-show")}))},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?"}},jr=Cr,Mr=(a("7120"),a("cb36"),Object(p["a"])(jr,Xs,er,!1,null,"2f59cc4e",null)),$r=Mr.exports,Rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main",class:e.selectedBackgroundClass},[a("div",{style:{height:"100%",paddingLeft:e.olmap_viewer_padding_left+"px"},attrs:{id:"olmap-viewer"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.transactionRunCount>0,expression:"transactionRunCount > 0"}],staticClass:"busy",staticStyle:{"margin-left":"100px"}},[a("img",{attrs:{src:"images/busy.svg"}}),e._v(" Processing ... "+e._s(e.transactionRunCount>1?"("+e.transactionRunCount+" queued)":"")+" "),a("b",[e._v(e._s(e.transactionRunCount>1?"Please wait until processing finished.":""))])]),a("div",{staticClass:"innergrid-container"},[a("v-list",{staticClass:"innergrid-item-nav",attrs:{dense:"",id:"innergrid-item-nav"}},[a("v-toolbar",[e._v(" Mouse"),a("br"),e._v("Modus "),a("v-btn-toggle",{staticStyle:{border:"1px solid #8d8d88"},attrs:{mandatory:""},model:{value:e.mouseModusButtonState,callback:function(t){e.mouseModusButtonState=t},expression:"mouseModusButtonState"}},[a("v-btn",{attrs:{flat:"",value:"move",title:"move map by mouse (press and hold left mouse button)"}},[a("v-icon",[e._v("open_with")]),e._v("move ")],1),a("v-btn",{attrs:{flat:"",value:"select",title:"select an extent on map (press and hold left mouse button)"}},[a("v-icon",[e._v("settings_overscan")]),e._v("select ")],1)],1),a("div",{staticStyle:{"padding-right":"10px"}}),a("v-btn",{attrs:{fab:"",title:"change viewer settings"},on:{click:e.onSettingsDialog}},[a("v-icon",[e._v("settings_applications")])],1)],1),a("admin-viewer-select",{directives:[{name:"show",rawName:"v-show",value:e.selectShow,expression:"selectShow"}],attrs:{currentLayerWMS_opacity:e.layerWMS_opacity,currentRasterdb:e.rasterdb,currentTimestamp:e.timestamp,currentProduct:e.product,meta:e.meta},on:{"selected-rasterdb":function(t){e.selectedRasterdb=t},"selected-timestamp":function(t){e.selectedTimestamp=t},"selected-product":function(t){e.selectedProduct=t},"selected-layerwms-opacity":function(t){e.layerWMS_opacity=t},close:function(t){e.selectShow=!1}}}),a("admin-viewer-tools",{attrs:{selectedExtent:e.selectedExtent,meta:e.meta,epsgCode:e.epsgCode,currentVectordb:e.vectordb},on:{"tool-raster-export-show":function(t){e.toolRasterExportShow=!0},"tool-point-export-show":function(t){e.toolPointExportShow=!0},"tool-point-raster-export-show":function(t){e.toolPointRasterExportShow=!0},"selected-vectordb":function(t){e.selectedVectordb=t}}})],1)],1),a("admin-viewer-settings",{directives:[{name:"show",rawName:"v-show",value:e.settingsDialog,expression:"settingsDialog"}],ref:"settingsDialog",on:{close:function(t){e.settingsDialog=!1},"selected-background":function(t){e.selectedBackground=t},"selected-format":function(t){e.selectedFormat=t},"selected-gamma":function(t){e.selectedGamma=t},"sync-bands":function(t){e.syncBands=t},"selected-mapping":function(t){e.selectedOneBandMapping=t},"show-labels":function(t){e.showLabels=t},"value-range-min":function(t){e.valueRangeMin=t},"value-range-max":function(t){e.valueRangeMax=t}}}),void 0!==e.meta?a("admin-viewer-raster-export",{directives:[{name:"show",rawName:"v-show",value:e.toolRasterExportShow,expression:"toolRasterExportShow"}],attrs:{meta:e.meta,selectedExtent:e.selectedExtent,preselectedTimestamp:e.selectedTimestamp},on:{close:function(t){e.toolRasterExportShow=!1},"select-full-extent":function(t){return e.selectFullExtent()}}}):e._e(),void 0!==e.meta?a("admin-viewer-point-export",{directives:[{name:"show",rawName:"v-show",value:e.toolPointExportShow,expression:"toolPointExportShow"}],attrs:{pointdb:e.meta.associated.PointDB,pointcloud:e.meta.associated.pointcloud,selectedExtent:e.selectedExtent},on:{close:function(t){e.toolPointExportShow=!1}}}):e._e(),void 0!==e.meta?a("admin-viewer-point-raster-export",{directives:[{name:"show",rawName:"v-show",value:e.toolPointRasterExportShow,expression:"toolPointRasterExportShow"}],attrs:{pointdb:e.meta.associated.PointDB,pointcloud:e.meta.associated.pointcloud,selectedExtent:e.selectedExtent},on:{close:function(t){e.toolPointRasterExportShow=!1}}}):e._e(),a("v-dialog",{attrs:{value:e.featureDetailsShow,lazy:"",persistent:"","max-width":"500px"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Attributes")]),a("v-card-text",e._l(e.selectedFeatures,(function(t){return a("table",{key:t.getId()},e._l(e.table.attributes,(function(s,r){return a("tr",{key:r},[a("td",[a("b",[e._v(e._s(s))])]),a("td",[e._v(e._s(e.featureToTableEntry(t.getId())[r]))])])})),0)})),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.featureDetailsShow=!1}}},[e._v("Close")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,s){return a("div",{key:s},[a("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,s){return a("v-snackbar",{key:s,attrs:{value:"true"}},[e._v(" "+e._s(t)),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(s)}}},[e._v("Close")])],1)}))],2)},Ar=[],Dr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[void 0!==e.rasterdbs?a("div",[a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("collections")]),a("b",[e._v("Raster Layer")]),a("multiselect",{attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a layer",allowEmpty:!0},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.title)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.title)+" ")]}}],null,!1,39431062),model:{value:e.selectedRasterdb,callback:function(t){e.selectedRasterdb=t},expression:"selectedRasterdb"}})],1):e._e(),void 0!==e.meta&&e.meta.timestamps.length>0&&(e.meta.timestamps.length>1||0!==e.meta.timestamps[0].timestamp)?a("div",[a("b",[e._v("Time")]),e.meta.timestamps.length>1?a("multiselect",{attrs:{options:e.meta.timestamps,searchable:!0,"show-labels":!1,placeholder:"pick a time",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.datetime)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.datetime)+" ")]}}],null,!1,408378550),model:{value:e.selectedTimestamp,callback:function(t){e.selectedTimestamp=t},expression:"selectedTimestamp"}}):e._e(),1===e.meta.timestamps.length?a("div",[e._v(" "+e._s(e.meta.timestamps[0].datetime)+" ")]):e._e()],1):e._e(),e.styles.length>0?a("div",[a("b",[e._v("Raster Visualisation")]),e.styles.length>1?a("multiselect",{attrs:{options:e.styles,label:"title",searchable:!0,"show-labels":!1,placeholder:"pick a band",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.name)+" - "+e._s(a.title)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.name)+" - "+e._s(a.title)+" ")]}}],null,!1,654599382),model:{value:e.selectedProduct,callback:function(t){e.selectedProduct=t},expression:"selectedProduct"}}):e._e(),void 0!==e.selectedProduct&&null!==e.selectedProduct&&"custom"===e.selectedProduct.name?a("div",[e._v(" custom: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.customProductText,expression:"customProductText"}],staticClass:"text-input",attrs:{type:"text",id:"name",name:"name",placeholder:"type text, e.g. [b1,b2,b3]",title:"e.g. for RGB visualisation with bands 1,3,5 type: [b1,b3,b5]"},domProps:{value:e.customProductText},on:{input:function(t){t.target.composing||(e.customProductText=t.target.value)}}})]):e._e(),1===e.styles.length?a("div",[e._v(" "+e._s(e.styles[0].name)+" - "+e._s(e.styles[0].title)+" ")]):e._e(),a("v-slider",{staticStyle:{"padding-right":"15px","margin-top":"0px"},attrs:{label:"opacity",min:"0",max:"1",step:"0","hide-details":!0},model:{value:e.selectedLayerWMS_opacity,callback:function(t){e.selectedLayerWMS_opacity=t},expression:"selectedLayerWMS_opacity"}})],1):e._e()])},Nr=[];function zr(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Lr(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r,i=!0,n=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}}}function Lr(e,t){if(e){if("string"===typeof e)return Ir(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ir(e,t):void 0}}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}var Fr={name:"admin-viewer-select",props:["currentRasterdb","currentTimestamp","currentProduct","meta","currentLayerWMS_opacity"],components:{Multiselect:P.a},data:function(){return{selectedRasterdb:void 0,selectedProduct:void 0,selectedTimestamp:void 0,selectedLayerWMS_opacity:1,customProductText:void 0}},methods:{refreshSelectedRasterdb:function(){if(void 0!==this.rasterdbs)if(void 0!==this.currentRasterdb){var e,t=zr(this.rasterdbs);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.name===this.currentRasterdb)return void(this.selectedRasterdb=a)}}catch(s){t.e(s)}finally{t.f()}this.selectedRasterdb=void 0}else this.selectedRasterdb=null;else this.selectedRasterdb=void 0},refreshSelectedTimestamp:function(){if(void 0!==this.selectedRasterdb&&null!==this.selectedRasterdb&&void 0!==this.meta&&this.meta.name===this.selectedRasterdb.name&&0!==this.meta.timestamps.length)if(void 0!==this.currentTimestamp){var e,t=zr(this.meta.timestamps);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.timestamp===this.currentTimestamp)return void(this.selectedTimestamp=a)}}catch(s){t.e(s)}finally{t.f()}this.selectedTimestamp=void 0}else this.selectedTimestamp=null;else this.selectedTimestamp=void 0},refreshSelectedProduct:function(){if(void 0!==this.selectedRasterdb&&null!==this.selectedRasterdb&&void 0!==this.meta&&this.meta.name===this.selectedRasterdb.name&&0!==this.styles.length)if(void 0!==this.currentProduct){var e,t=zr(this.styles);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.name===this.currentProduct)return void(this.selectedProduct=a)}}catch(s){t.e(s)}finally{t.f()}this.selectedProduct=void 0}else this.selectedProduct=null;else this.selectedProduct=void 0},emitSelectedProduct:function(){if(void 0!==this.selectedProduct&&null!==this.selectedProduct&&"custom"===this.selectedProduct.name){var e={name:this.customProductText,title:"custom"};this.$emit("selected-product",e)}else this.$emit("selected-product",this.selectedProduct)}},computed:{rasterdbs:function(){var e=this.$store.state.rasterdbs.data;return void 0===e?[]:e.slice().sort((function(e,t){return e.title.localeCompare(t.title)}))},styles:function(){return void 0===this.meta?[]:this.meta.wms.styles.concat({name:"custom",title:"user defined"})}},watch:{rasterdbs:function(){this.refreshSelectedRasterdb()},currentRasterdb:function(){this.refreshSelectedRasterdb()},selectedRasterdb:function(){this.$emit("selected-rasterdb",this.selectedRasterdb),this.refreshSelectedTimestamp(),this.refreshSelectedProduct()},meta:function(){this.refreshSelectedTimestamp(),this.refreshSelectedProduct()},currentTimestamp:function(){this.refreshSelectedTimestamp()},selectedTimestamp:function(){this.$emit("selected-timestamp",this.selectedTimestamp)},currentProduct:function(){this.refreshSelectedProduct()},selectedProduct:function(){this.emitSelectedProduct()},customProductText:function(){this.emitSelectedProduct()},currentLayerWMS_opacity:function(){this.selectedLayerWMS_opacity=this.currentLayerWMS_opacity},selectedLayerWMS_opacity:function(){this.$emit("selected-layerwms-opacity",this.selectedLayerWMS_opacity)}},mounted:function(){this.$store.dispatch("rasterdbs/init"),this.refreshSelectedRasterdb(),this.refreshSelectedTimestamp(),this.refreshSelectedProduct()}},Br=Fr,Vr=(a("3f39"),Object(p["a"])(Br,Dr,Nr,!1,null,"0528ce32",null)),Gr=Vr.exports,qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-btn",{on:{click:function(t){return e.$emit("tool-raster-export-show")}}},[a("v-icon",[e._v("cloud_download")]),e._v(" export")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.meta&&void 0!==e.meta.associated&&(void 0!==e.meta.associated.PointDB||void 0!==e.meta.associated.pointcloud),expression:"meta !== undefined && meta.associated !== undefined && (meta.associated.PointDB !== undefined  || meta.associated.pointcloud !== undefined)"}],staticStyle:{"font-size":"0.8em"}},[e._v(" ! just visualisation raster ! ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.epsgCode,expression:"epsgCode !== undefined"}]},[a("br"),a("hr"),a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("category")]),a("b",[e._v("Vector Layer")]),void 0!==e.vectordbs?a("multiselect",{attrs:{options:e.vectordbs,"track-by":"name",label:"name",allowEmpty:!0,searchable:!1,"show-labels":!1,placeholder:""},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},model:{value:e.selectedVectordb,callback:function(t){e.selectedVectordb=t},expression:"selectedVectordb"}}):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?a("a",{attrs:{href:e.urlPrefix+"../../vectordbs/"+e.selectedVectordb.name+"/package.zip",download:e.selectedVectordb.name+".zip",title:"download as ZIP-file"}},[a("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download vector layer)")],1):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.epsgCode,expression:"epsgCode === undefined"}],staticStyle:{color:"#db4c11",padding:"10px","background-color":"#0000000d"},attrs:{title:"Set an EPSG-code for this raster-layer to enable feature 'vector overlay'!"}},[e._v(" ! missing EPSG-code ! ")]),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.PointDB?a("div",[a("br"),a("hr"),a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("blur_on")]),a("b",[e._v("Associated PointDB")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewPointsPointdb}},[a("v-icon",[e._v("3d_rotation")]),e._v(" view points")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewSurfacePointdb}},[a("v-icon",[e._v("360")]),e._v(" view surface")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-export-show")}}},[a("v-icon",[e._v("save_alt")]),e._v(" export points")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-raster-export-show")}}},[a("v-icon",[e._v("get_app")]),e._v(" export surface")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),a("br")],1):e._e(),void 0!==e.meta&&void 0!==e.meta.associated&&void 0!==e.meta.associated.pointcloud?a("div",[a("br"),a("hr"),a("v-icon",{staticStyle:{"font-size":"1em"}},[e._v("grain")]),a("b",[e._v("Associated PointCloud")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewPointsPointcloud}},[a("v-icon",[e._v("3d_rotation")]),e._v(" view points")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:e.viewSurfacePointcloud}},[a("v-icon",[e._v("360")]),e._v(" view surface")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select position)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at center of selection)")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-export-show")}}},[a("v-icon",[e._v("save_alt")]),e._v(" export points")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")]),a("br"),a("v-btn",{attrs:{disabled:void 0===e.selectedExtent},on:{click:function(t){return e.$emit("tool-point-raster-export-show")}}},[a("v-icon",[e._v("get_app")]),e._v(" export surface")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0===e.selectedExtent,expression:"selectedExtent === undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(select extent)")]),a("span",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.selectedExtent,expression:"selectedExtent !== undefined"}],staticStyle:{"font-size":"0.7em"}},[e._v("(at selection)")])],1):e._e()],1)},Ur=[];function Wr(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=Jr(e))){var t=0,a=function(){};return{s:a,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r,i=!0,n=!1;return{s:function(){s=e[Symbol.iterator]()},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,r=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw r}}}}function Jr(e,t){if(e){if("string"===typeof e)return Hr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Hr(e,t):void 0}}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}var Yr={name:"admin-viewer-tools",props:["meta","selectedExtent","epsgCode","currentVectordb"],components:{Multiselect:P.a},data:function(){return{selectedVectordb:null}},methods:{viewPointsPointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,a=(e[1]+e[3])/2,s=this.meta.associated.PointDB,r="db="+s+"&x="+t+"&y="+a,i=this.urlPrefix+"../../web/pointcloud_view/pointcloud_view.html#/?"+r;console.log(this.urlPrefix),console.log(i),window.open(i,"_blank")},viewPointsPointcloud:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,a=(e[1]+e[3])/2,s=this.meta.associated.pointcloud,r="pointcloud="+s+"&x="+t+"&y="+a,i=this.urlPrefix+"../../web/pointcloud_view/pointcloud_view.html#/?"+r;console.log(this.urlPrefix),console.log(i),window.open(i,"_blank")},viewSurfacePointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,a=(e[1]+e[3])/2,s=this.meta.associated.PointDB,r="db="+s+"&x="+t+"&y="+a,i=this.urlPrefix+"../../web/height_map_view/height_map_view.html?"+r;console.log(this.urlPrefix),console.log(i),window.open(i,"_blank")},viewSurfacePointcloud:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=(e[0]+e[2])/2,a=(e[1]+e[3])/2,s=this.meta.associated.pointcloud,r="pointcloud="+s+"&x="+t+"&y="+a,i=this.urlPrefix+"../../web/height_map_view/height_map_view.html?"+r;console.log(this.urlPrefix),console.log(i),window.open(i,"_blank")},exportPointsPointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=this.meta.associated.PointDB,a="db="+t+"&modus=ext&xmin="+e[0]+"&ymin="+e[1]+"&xmax="+e[2]+"&ymax="+e[3],s=this.urlPrefix+"../../web/point_processing/point_processing.html#/?"+a;console.log(this.urlPrefix),console.log(s),window.open(s,"_blank")},exportSurfacePointdb:function(){console.log(this.selectedExtent);var e=this.selectedExtent,t=this.meta.associated.PointDB,a="db="+t+"&modus=ext&xmin="+e[0]+"&ymin="+e[1]+"&xmax="+e[2]+"&ymax="+e[3],s=this.urlPrefix+"../../web/raster_point_processing/raster_point_processing.html#/?"+a;console.log(this.urlPrefix),console.log(s),window.open(s,"_blank")},refreshSelectedVectordb:function(){if(void 0!==this.vectordbs)if(void 0!==this.currentVectordb){var e,t=Wr(this.vectordbs);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.name===this.currentVectordb)return void(this.selectedVectordb=a)}}catch(s){t.e(s)}finally{t.f()}this.selectedVectordb=void 0}else this.selectedVectordb=null;else this.selectedVectordb=void 0}},computed:{vectordbs:function(){return this.$store.state.vectordbs.data},urlPrefix:function(){return this.$store.state.identity.urlPrefix}},watch:{vectordbs:function(){this.refreshSelectedVectordb()},currentVectordb:function(){this.refreshSelectedVectordb()},selectedVectordb:function(){this.$emit("selected-vectordb",this.selectedVectordb)}},mounted:function(){this.$store.dispatch("vectordbs/init")}},Kr=Yr,Qr=Object(p["a"])(Kr,qr,Ur,!1,null,"a6a76702",null),Zr=Qr.exports,Xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"raster-export-container"},[a("h1",[e._v("Export Raster Data "),a("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("close")])],1)],1),void 0===e.selectedExtent?a("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[e._m(0),a("br"),a("br"),e._v("To Export raster data you need to first select an extent on the map. "),a("br"),a("v-btn",{staticStyle:{maring:"0px"},attrs:{title:"close box"},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("close")]),e._v("Close")],1),e._v(" export dialog and select extent: "),a("br"),e._v("Set mouse-modus to 'select' and create extent by pressing left mouse button and moving mouse. "),a("br"),a("br"),a("br"),a("v-btn",{staticStyle:{maring:"0px"},attrs:{title:"select all raster pixels in current layer"},on:{click:function(t){return e.$emit("select-full-extent")}}},[a("v-icon",[e._v("select_all")]),e._v("select full extent")],1),e._v(" "),a("b",[e._v("Note: ")]),e._v(" If the layer is large selecting full extent may not be optimal. ")],1):e._e(),void 0!==e.selectedExtent?a("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[a("h3",[e._v("selected extent")]),a("div",[a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v(" "),a("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),a("b",[e._v("Scale")]),a("br"),a("multiselect",{attrs:{options:e.scaleDivs,"show-labels":!1,allowEmpty:!1,placeholder:"scale of source raster to output"},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.option;return[e._v(" 1:"+e._s(a)+" ")]}},{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" 1:"+e._s(a)+" ")]}}],null,!1,1463501430),model:{value:e.scaleDiv,callback:function(t){e.scaleDiv=t},expression:"scaleDiv"}}),a("b",[e._v("size")]),e._v(" "+e._s(e.xpixels)+" x "+e._s(e.ypixels)+" = "+e._s(e.pixelCountText)+" "),a("br"),a("br"),a("b",[e._v("Mode")]),a("br"),a("multiselect",{attrs:{options:e.modes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),a("br"),"direct_bands"===e.mode.id?a("div",[a("b",[e._v("Arrangement")]),a("br"),e._v(" raster-file at one timestamp with multiple bands "),a("br"),a("br"),a("b",[e._v("File-Format")]),a("br"),a("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}})],1):e._e(),"direct_bands"===e.mode.id&&void 0!==e.preselectedTimestamp&&null!==e.preselectedTimestamp&&(0!==e.preselectedTimestamp.timestamp||e.preselectedTimestamp.length>1)?a("div",[a("br"),a("b",[e._v("timestamp")]),e._v(": "+e._s(e.preselectedTimestamp.datetime)+" "),a("br")]):e._e(),void 0!==e.meta&&"zip"===e.mode.id?a("div",[a("b",[e._v("Arrangement")]),a("br"),a("multiselect",{attrs:{options:e.zip_arrangements,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.zip_arrangement,callback:function(t){e.zip_arrangement=t},expression:"zip_arrangement"}}),a("br"),a("br"),a("b",[e._v("Timestamps")]),a("br"),a("multiselect",{attrs:{multiple:"",options:e.meta.timestamps,trackBy:"timestamp",label:"datetime",searchable:!1,placeholder:"(all timestamps)",closeOnSelect:!1},model:{value:e.selectedTimestamps,callback:function(t){e.selectedTimestamps=t},expression:"selectedTimestamps"}})],1):e._e(),a("br"),a("b",[e._v("Bands")]),a("br"),void 0!==e.meta?a("div",[a("multiselect",{attrs:{multiple:"",options:e.meta.bands,trackBy:"index",label:"index",searchable:!1,placeholder:"(all bands)",closeOnSelect:!1},scopedSlots:e._u([{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.index)+" - "+e._s(a.title)+" ")]}},{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.index)+" - "+e._s(a.title)+" ")]}}],null,!1,1139301430),model:{value:e.selectedBands,callback:function(t){e.selectedBands=t},expression:"selectedBands"}})],1):e._e(),a("br"),a("br"),"direct_bands"===e.mode.id?a("div",[a("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download as raster file",href:e.downloadLink,download:e.downloadFilename}},[a("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1)]):e._e(),"zip"===e.mode.id?a("div",[a("b",[e._v("Compression")]),a("br"),a("multiselect",{attrs:{options:e.compressions,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"id",label:"title"},model:{value:e.compression,callback:function(t){e.compression=t},expression:"compression"}}),a("v-btn",{on:{click:function(t){return e.zip_download()}}},[a("v-icon",[e._v("cloud_download")]),e._v("Download")],1),a("a",{ref:"zip_download_link",attrs:{hidden:""}},[e._v("hidden link")])],1):e._e(),a("br"),a("br"),"direct_bands"===e.mode.id?a("admin-viewer-raster-export-format-description",{attrs:{"output-type":e.outputType}}):e._e()],1):e._e()])])},ei=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",[a("b",{staticStyle:{color:"red"}},[e._v("No extent selected.")])])}],ti=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),a("hr"),a("h3",{class:{disabled:"GeoTIFF - data"!==e.outputType}},[e._v("GeoTIFF - data")]),a("br"),e._v(" TIFF raster file format with projection information (GeoTIFF) "),a("br"),e._v(" As this format is intended for GIS-software general image-processing"),a("br"),e._v(" applications may not be able to read that files. "),a("br"),a("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),a("br"),a("br"),e._v(" Tested with: "),a("a",{attrs:{href:"http://gdal.org/"}},[e._v("GDAL")]),e._v(", "),a("a",{attrs:{href:"https://qgis.org/"}},[e._v("QGIS")]),e._v(", "),a("a",{attrs:{href:"https://cran.r-project.org/web/packages/raster/"}},[e._v("R raster")]),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"GeoTIFF - tiled data (experimental)"!==e.outputType}},[e._v("GeoTIFF - tiled data (experimental)")]),a("br"),e._v(" TIFF raster file format with projection information and tiled data (experimental). "),a("br"),e._v(" As this format is intended for GIS-software general image-processing"),a("br"),e._v(" applications may not be able to read that files. "),a("br"),a("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),a("br"),a("br"),e._v(" Experimental tiled output. "),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"GeoTIFF - visualisation"!==e.outputType}},[e._v("GeoTIFF - visualisation")]),a("br"),e._v(" TIFF image file format with projection information (transparency as alpha channel, GeoTIFF) "),a("br"),e._v(" Up to three bands are rendered: "),a("ul",[a("li",[e._v("one band: raser band is rendered to one-band greyscale image (8-bit).")]),a("li",[e._v("two bands: raster bands are rendered to three band red-green-blue image (3x8 bit) with interpolated green.")]),a("li",[e._v("three or more bands: Raster data of first three bands is rendered to three band red-green-blue image (3x8 bit).")])]),a("br"),e._v(" This format is intended for visualisation only. "),a("br"),e._v(" Pixel values are mapped non-linearly to image range (0 - 255) "),a("br"),e._v("to present hight detail in resulting image. "),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"PNG - visualisation"!==e.outputType}},[e._v("PNG - visualisation")]),a("br"),e._v(" PNG image file format (transparency as alpha channel, no projection information) "),a("br"),e._v(" Files can be displayed in web browsers. "),a("br"),a("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"JPEG - visualisation"!==e.outputType}},[e._v("JPEG - visualisation")]),a("br"),e._v(" JPEG image file format (small file size with lossy image compression, no projection information, no transparency information) "),a("br"),e._v(" Files can be displayed in web browsers. "),a("br"),a("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"rDAT - data"!==e.outputType}},[e._v("rDAT - data")]),a("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),a("br"),e._v(" Extensive meta data is preserved by this format. "),a("br"),e._v("e.g. band names, wavelength "),a("br"),a("br"),e._v(' For compatibility with R rasters all bands need to be of same data type. For output "biggest" data type is chosen. '),a("br"),a("br"),e._v(" example: "),a("br"),a("i",[e._v("load file in "),a("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as RasterLayer (one band) or as RasterStack (multiple bands) and plot it.")]),a("br"),a("br"),a("pre",[e._v('library(RSDB)\nr <- read.rdat("c:/downloads/raster.rdat")\nplot(r)\n      ')])])],1)},ai=[],si={name:"admin-viewer-raster-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},ri=si,ii=(a("11d1"),Object(p["a"])(ri,ti,ai,!1,null,"610c7c5a",null)),ni=ii.exports,oi={name:"admin-viewer-raster-export",props:["meta","selectedExtent","preselectedTimestamp"],components:{Multiselect:P.a,"admin-viewer-raster-export-format-description":ni},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:["GeoTIFF - data","GeoTIFF - tiled data (experimental)","rDAT - data","PNG - visualisation","JPEG - visualisation","GeoTIFF - visualisation"],outputType:"GeoTIFF - data",modes:[{id:"zip",title:"zip-file (for arbitrarily large rasters)"},{id:"direct_bands",title:"raster-file (for small rasters only)"}],mode:void 0,zip_arrangements:[{id:"multiband",title:"multiband: one raster-file per timestamp"},{id:"timeseries",title:"timeseries: one raster-file per band (files with multiple timestamps as file-bands)"},{id:"separate_timestamp_band",title:"separate: raster-files for each timestamp and band (one band raster-files)"},{id:"separate_band_timestamp",title:"separate: raster-files for each band and timestamp (one band raster-files)"}],zip_arrangement:{id:"multiband",title:"multiband: one raster-file per timestamp"},compressions:[{id:"0",title:"0 - no compression (fastest)"},{id:"1",title:"1 - compression (fast)"},{id:"2",title:"2 - compression (fast)"},{id:"3",title:"3 - compression (fast)"},{id:"4",title:"4 - compression (fast)"},{id:"5",title:"5 - compression (fast)"},{id:"6",title:"6 - compression (compromise)"},{id:"7",title:"7 - compression (slow)"},{id:"8",title:"8 - compression (slower)"},{id:"9",title:"9 - best compression (slowest)"}],compression:{id:"0",title:"0 - no compression (fastest)"},selectedBands:[],selectedTimestamps:[],scaleDivs:[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536],scaleDiv:1,user_timestamp:void 0}},methods:{toQuery:function(e){var t="";for(var a in e)0==t.length?t="?":t+="&",t+=a+"="+e[a];return t},zip_download:function(){var e=this,t=this.$store.getters.apiUrl("rasterdb/"+e.meta.name+"/packages"),a={ext:[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax],compression:e.compression.id,div:e.scaleDiv,arrangement:e.zip_arrangement.id};e.selectedBands.length>0&&(a.bands=e.selectedBands.map((function(e){return e.index}))),I.a.post(t,{package:a}).then((function(t){var a=t.data.package;console.log(a),console.log("start");var s=e.$refs.zip_download_link;console.log(s);var r=e.urlPrefix+"../../rasterdb/"+e.meta.name+"/packages/"+a.zip_file_url;s.href=r,s.download=a.zip_file_name,s.click(),console.log(s),console.log("stop")})).catch((function(e){console.log(e)}))}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/this.meta.ref.pixel_size.x)/this.scaleDiv)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/this.meta.ref.pixel_size.y)/this.scaleDiv)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){var e=this.$store.getters.apiUrl("rasterdb"),t="raster.tiff",a=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),s={ext:a};switch(void 0!==this.user_timestamp&&null!==this.user_timestamp&&(s.timestamp=this.user_timestamp.timestamp),this.outputType){case"GeoTIFF - data":t="raster.tiff";break;case"GeoTIFF - tiled data (experimental)":t="raster.tiff",s.format="tiff:banded:tiled";break;case"GeoTIFF - visualisation":t="raster.tiff",s.visualisation=!0;break;case"PNG - visualisation":t="raster.png",s.visualisation=!0;break;case"rDAT - data":t="raster.rdat";break;case"JPEG - visualisation":t="raster.jpg";break;default:throw"unknown output type"}this.selectedBands.length>0&&(s.band=this.selectedBands.map((function(e){return e.index})).join(" ")),1!==this.scaleDiv&&(s.div=this.scaleDiv);var r=e+"/"+this.meta.name+"/"+t+this.toQuery(s);return r},downloadFilename:function(){var e="";switch(this.outputType){case"GeoTIFF - data":e=".tiff";break;case"GeoTIFF - tiled data (experimental)":e=".tiff";break;case"GeoTIFF - visualisation":e=".tiff";break;case"PNG - visualisation":e=".png";break;case"rDAT - data":e=".rdat";break;case"JPEG - visualisation":e=".jpg";break;default:throw"unknown output type"}var t=this.meta.name;return void 0!==this.user_timestamp&&null!==this.user_timestamp&&0!==this.user_timestamp.timestamp&&(t+="__"+this.user_timestamp.datetime.split("-").join("_").split(":").join("_")),t+e}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])},preselectedTimestamp:function(){this.user_timestamp=this.preselectedTimestamp}},mounted:function(){this.mode=this.modes[0]}},ci=oi,li=(a("ead8"),Object(p["a"])(ci,Xr,ei,!1,null,"2b276d78",null)),di=li.exports,ui=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"point-export-container"},[a("h1",[e._v("Export Point Data "),a("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("close")])],1)],1),void 0!==e.selectedExtent?a("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[a("h3",[e._v("selected extent")]),a("div",[a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v(" "),a("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),a("br"),a("b",[e._v("File-Format")]),a("br"),a("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"name",label:"title"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),a("br"),a("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download points as file",href:e.downloadLink,download:e.downloadFilename}},[a("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1),a("br"),a("br"),a("br"),a("admin-viewer-point-export-format-description",{attrs:{"output-type":e.outputType}})],1):e._e()])])},vi=[],mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),a("hr"),a("h3",{class:{disabled:"zip"!==e.outputType.name}},[e._v("ZIP (experimantal)")]),a("br"),e._v(" ZIP file containing las files (described in section LAS) "),a("br"),a("br"),e._v("Contained las files are tiles of 1x1km size. All tiles covering the requested extent are returned. "),a("br"),e._v("Tiles are cropped by extend, so parts of tiles outside of extend are empty. "),a("br"),a("hr"),a("hr"),a("h3",{class:{disabled:"LAS"!==e.outputType.name}},[e._v("LAS")]),a("br"),e._v(" LAS point file format "),a("br"),a("br"),a("a",{attrs:{href:"https://www.asprs.org/committee-general/laser-las-file-format-exchange-activities.html"}},[e._v("LAS")]),e._v(" version 1.2 Point Data Format 0 "),a("br"),a("br"),e._v("Tested with: "),a("a",{attrs:{href:"https://www.liblas.org/"}},[e._v("libLAS")]),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"xyz"!==e.outputType.name}},[e._v("xyz")]),a("br"),e._v(" xyz text based point format. "),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"rDAT"!==e.outputType.name}},[e._v("rDAT")]),a("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),a("br"),e._v(" Extensive meta data is preserved by this format. "),a("br"),e._v("e.g. projection "),a("br"),a("br"),e._v(" example: "),a("br"),a("i",[e._v("load file in "),a("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as data.frame and plot it.")]),a("br"),a("br"),a("pre",[e._v('library(RSDB)\ndf <- read.rdat("points.rdat")\nlibrary(rgl)\nplot3d(df$x, df$y, df$z)\n      ')])])],1)},pi=[],fi={name:"admin-viewer-point-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},_i=fi,hi=(a("b7b4"),Object(p["a"])(_i,mi,pi,!1,null,"98371938",null)),bi=hi.exports,gi={name:"admin-viewer-point-export",props:["pointdb","pointcloud","selectedExtent"],components:{Multiselect:P.a,"admin-viewer-point-export-format-description":bi},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:[{name:"zip",title:".zip - containing tiled .las files (for arbitrarily large data)"},{name:"LAS",title:".las - binary file (for small datasets only)"},{name:"xyz",title:".xyz - text file (for small datasets only)"},{name:"rDAT",title:".rDAT - binary file (for small datasets only)"}],outputType:void 0}},methods:{toQuery:function(e){var t="";for(var a in e)0==t.length?t="?":t+="&",t+=a+"="+e[a];return t}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/1)/1)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/1)/1)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){if(void 0!==this.pointdb){var e=this.urlPrefix+"../../pointdb",t="unknown",a=[this.user_xmin,this.user_xmax,this.user_ymin,this.user_ymax].join(","),s={db:this.pointdb,ext:a};switch(this.outputType.name){case"LAS":t="points.las",s.format="las";break;case"xyz":t="points.xyz",s.format="xyz";break;case"rDAT":t="points.rdat",s.format="rdat";break;case"zip":t="points.zip",s.format="zip";break;default:throw s.format="unknown","unknown output type "+this.outputType.name}var r=e+"/"+t+this.toQuery(s);return r}if(void 0!==this.pointcloud){var i=this.urlPrefix+"../../pointclouds",n="unknown",o=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),c={ext:o};switch(this.outputType.name){case"LAS":n="points.las";break;case"xyz":n="points.xyz";break;case"rDAT":n="points.rdat";break;case"zip":n="points.zip";break;default:throw"unknown output type "+this.outputType.name}var l=i+"/"+this.pointcloud+"/"+n+this.toQuery(c);return l}return"error"},downloadFilename:function(){var e="";switch(this.outputType.name){case"LAS":e=".las";break;case"xyz":e=".xyz";break;case"rDAT":e=".rdat";break;case"zip":e=".zip";break;default:throw"unknown output type "+this.outputType.name}var t=void 0!==this.pointdb?this.pointdb:void 0!==this.pointcloud?this.pointcloud:"raster";return t+e}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])}},mounted:function(){this.outputType=this.outputTypes.find((function(e){return"zip"===e.name}))}},yi=gi,xi=(a("12f3"),Object(p["a"])(yi,ui,vi,!1,null,"e725c612",null)),wi=xi.exports,ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"point-export-container"},[a("h1",[e._v("Export Raster of processed point-cloud data"),a("v-btn",{staticStyle:{maring:"0px"},attrs:{flat:"",icon:"",color:"indigo",title:"close box"},on:{click:function(t){return e.$emit("close")}}},[a("v-icon",[e._v("close")])],1)],1),void 0!==e.selectedExtent?a("div",{staticStyle:{display:"inline-block","white-space":"nowrap","padding-top":"20px"}},[a("h3",[e._v("selected extent")]),a("div",[a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmin",box:""},model:{value:e.user_xmin,callback:function(t){e.user_xmin=t},expression:"user_xmin"}}),e._v(" , "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymin",box:""},model:{value:e.user_ymin,callback:function(t){e.user_ymin=t},expression:"user_ymin"}}),e._v(" - "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"xmax",box:""},model:{value:e.user_xmax,callback:function(t){e.user_xmax=t},expression:"user_xmax"}}),e._v(" , "),a("v-text-field",{staticStyle:{width:"150px",display:"inline-block"},attrs:{label:"ymax",box:""},model:{value:e.user_ymax,callback:function(t){e.user_ymax=t},expression:"user_ymax"}}),e._v(" "),a("b",[e._v("size")]),e._v(" (coordinate units) "+e._s(e.user_xmax-e.user_xmin)+" x "+e._s(e.user_ymax-e.user_ymin)+" = "+e._s((e.user_xmax-e.user_xmin)*(e.user_ymax-e.user_ymin))+" ")],1),a("br"),a("b",[e._v("Point-cloud to raster processing type")]),a("br"),void 0!=e.raster_processing_types?a("span",[a("multiselect",{attrs:{options:e.raster_processing_types,"show-labels":!1,allowEmpty:!1,placeholder:"point-cloud to raster processing type","track-by":"name",label:"label"},model:{value:e.raster_processing_type,callback:function(t){e.raster_processing_type=t},expression:"raster_processing_type"}})],1):e._e(),void 0!=e.metaMessage?a("span",[e._v(" "+e._s(e.metaMessage)+" ")]):e._e(),a("br"),a("b",[e._v("File-Format")]),a("br"),a("multiselect",{attrs:{options:e.outputTypes,"show-labels":!1,allowEmpty:!1,placeholder:"output format","track-by":"name",label:"title"},model:{value:e.outputType,callback:function(t){e.outputType=t},expression:"outputType"}}),a("br"),a("a",{staticStyle:{padding:"9px","background-color":"#f5f5f5","box-shadow":"0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)"},attrs:{title:"download points as file",href:e.downloadLink,download:e.downloadFilename}},[a("v-icon",{staticStyle:{color:"black"}},[e._v("cloud_download")]),e._v(" Download")],1),a("br"),a("br"),a("br"),a("admin-viewer-point-raster-export-format-description",{attrs:{"output-type":e.outputType}})],1):e._e()])])},Ei=[],Oi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-expansion-panel",[a("v-expansion-panel-content",[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("format description")]),a("hr"),a("h3",{class:{disabled:"zip"!==e.outputType.name}},[e._v("ZIP (experimantal)")]),a("br"),e._v(" ZIP file containing tiff files (described in section GeoTIFF - data) "),a("br"),a("br"),e._v("Contained tiff files are tiles of 1x1km size. All tiles covering the requested extent are returned. "),a("br"),e._v("Tiles are cropped by extend, so parts of tiles outside of extend are empty. "),a("br"),a("hr"),a("hr"),a("h3",{class:{disabled:"tiff"!==e.outputType.name}},[e._v("GeoTIFF - data")]),a("br"),e._v(" TIFF raster file format with projection information (GeoTIFF) "),a("br"),e._v(" As this format is intended for GIS-software general image-processing"),a("br"),e._v(" applications may not be able to read that files. "),a("br"),a("br"),e._v(' For compatibility with TIFF readers (e.g. GDAL) all bands need to be of same data type, for output "biggest" data type is chosen. '),a("br"),a("br"),e._v(" Tested with: "),a("a",{attrs:{href:"http://gdal.org/"}},[e._v("GDAL")]),e._v(", "),a("a",{attrs:{href:"https://qgis.org/"}},[e._v("QGIS")]),e._v(", "),a("a",{attrs:{href:"https://cran.r-project.org/web/packages/raster/"}},[e._v("R raster")]),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"png"!==e.outputType.name}},[e._v("PNG - visualisation")]),a("br"),e._v(" PNG image file format (transparency as alpha channel, no projection information) "),a("br"),e._v(" Files can be displayed in web browsers. "),a("br"),a("br"),e._v(" Output processing details are same as 'GeoTIFF - visualisation'. "),a("br"),a("br"),a("hr"),a("h3",{class:{disabled:"rDAT"!==e.outputType.name}},[e._v("rDAT - data")]),a("br"),e._v(" rDAT file format is transfer format of RSDB R-package. "),a("br"),e._v(" Extensive meta data is preserved by this format. "),a("br"),e._v("e.g. band names, wavelength "),a("br"),a("br"),e._v(' For compatibility with R rasters all bands need to be of same data type. For output "biggest" data type is chosen. '),a("br"),a("br"),e._v(" example: "),a("br"),a("i",[e._v("load file in "),a("a",{attrs:{href:"https://www.r-project.org/"}},[e._v("R")]),e._v(" as RasterLayer (one band) or as RasterStack (multiple bands) and plot it.")]),a("br"),a("br"),a("pre",[e._v('library(RSDB)\nr <- read.rdat("c:/downloads/raster.rdat")\nplot(r)\n      ')])])],1)},Si=[],Pi={name:"admin-viewer-point-raster-export-format-description",props:["outputType"],components:{},data:function(){return{}},methods:{},computed:{},watch:{},mounted:function(){}},Ti=Pi,Ci=(a("dfaa"),Object(p["a"])(Ti,Oi,Si,!1,null,"462a4125",null)),ji=Ci.exports,Mi={name:"admin-viewer-point-raster-export",props:["pointdb","pointcloud","selectedExtent"],components:{Multiselect:P.a,"admin-viewer-point-raster-export-format-description":ji},data:function(){return{user_xmin:void 0,user_ymin:void 0,user_xmax:void 0,user_ymax:void 0,outputTypes:[{name:"zip",title:".zip - containing tiled .tiff files (for arbitrarily large rasters)"},{name:"tiff",title:".tiff - GeoTIFF raster file (for small rasters only)"},{name:"png",title:".png - PNG image file (for small rasters only)"},{name:"rDAT",title:".rDAT - binary file (for small rasters only)"}],outputType:void 0,valid_processing_types:["basic_raster","index_raster","multi_raster"],raster_processing_type:void 0,meta:void 0,metaMessage:"init"}},methods:{toQuery:function(e){var t="";for(var a in e)0==t.length?t="?":t+="&",t+=a+"="+e[a];return t},refreshMeta:function(){var e=this;if(void 0!==this.pointdb)this.meta=void 0,this.metaMessage="loading meta data of layer ...",I.a.get(this.urlPrefix+"../../pointdb/info.json?db="+this.pointdb+"&statistics=false").then((function(t){e.meta=t.data,e.metaMessage=void 0})).catch((function(t){e.meta=void 0,e.metaMessage="ERROR loading meta data of layer "+t}));else{if(void 0===this.pointcloud)return this.meta=void 0,void(this.metaMessage="error in meta");this.meta=void 0,this.metaMessage="loading meta data of layer ...",I.a.get(this.urlPrefix+"../../pointclouds/"+this.pointcloud).then((function(t){e.meta=t.data,e.metaMessage=void 0})).catch((function(t){e.meta=void 0,e.metaMessage="ERROR loading meta data of layer "+t}))}}},computed:{xpixels:function(){return Math.floor(Math.floor((this.user_xmax-this.user_xmin)/1)/1)},ypixels:function(){return Math.floor(Math.floor((this.user_ymax-this.user_ymin)/1)/1)},pixelCountText:function(){var e=this.xpixels*this.ypixels;return e>=1e11?(e/1e12).toFixed(1)+" terapixel":e>=1e8?(e/1e9).toFixed(1)+" gigapixel":e>=1e6?(e/1e6).toFixed(1)+" megapixel":e>=1e5?(e/1e6).toFixed(2)+" megapixel":e+" pixel"},urlPrefix:function(){return this.$store.state.identity.urlPrefix},downloadLink:function(){if(void 0!==this.pointdb&&void 0!==this.outputType&&void 0!==this.raster_processing_type){var e=this.urlPrefix+"../../pointdb",t="unknown",a=[this.user_xmin,this.user_xmax,this.user_ymin,this.user_ymax].join(","),s={db:this.pointdb,ext:a,type:this.raster_processing_type.name};switch(this.outputType.name){case"tiff":t="raster.tiff",s.format="tiff";break;case"png":t="raster.png",s.format="png";break;case"rDAT":t="raster.rDAT",s.format="rDAT";break;case"zip":t="raster.zip",s.format="zip";break;default:throw s.format="unknown","unknown output type "+this.outputType.name}var r=e+"/"+t+this.toQuery(s);return r}if(void 0!==this.pointcloud&&void 0!==this.outputType&&void 0!==this.raster_processing_type){var i=this.urlPrefix+"../../pointclouds",n="unknown",o=[this.user_xmin,this.user_ymin,this.user_xmax,this.user_ymax].join(" "),c={ext:o,type:this.raster_processing_type.name,fill:10};switch(this.outputType.name){case"tiff":n="raster.tiff",c.format="tiff";break;case"png":n="raster.png",c.format="png";break;case"rDAT":n="raster.rDAT",c.format="rDAT";break;case"zip":n="raster.zip",c.format="zip";break;default:throw c.format="unknown","unknown output type "+this.outputType.name}var l=i+"/"+this.pointcloud+"/"+n+this.toQuery(c);return l}return"error"},downloadFilename:function(){var e="";switch(this.outputType.name){case"tiff":e=".tiff";break;case"png":e=".png";break;case"rDAT":e=".rdat";break;case"zip":e=".zip";break;default:throw"unknown output type "+this.outputType.name}var t=void 0!==this.pointdb?this.pointdb:void 0!==this.pointcloud?this.pointcloud:"raster";return t+e},raster_processing_types:function(){var e=this;if(void 0!==this.meta)return void 0!==this.meta.raster_processing_types?this.meta.raster_processing_types.filter((function(t){return e.valid_processing_types.indexOf(t.data_type)>=0})).map((function(e){return{name:e.name,label:e.name+" - "+e.title}})):void 0!==this.meta.pointcloud?this.meta.pointcloud.raster_types.map((function(e){return{name:e.name,label:e.name+" - "+e.description}})):void 0}},watch:{selectedExtent:function(){void 0!==this.selectedExtent&&(this.user_xmin=this.selectedExtent[0],this.user_ymin=this.selectedExtent[1],this.user_xmax=this.selectedExtent[2],this.user_ymax=this.selectedExtent[3])},pointdb:function(){this.refreshMeta()},pointcloud:function(){this.refreshMeta()},raster_processing_types:function(){this.raster_processing_type=void 0!==this.raster_processing_types&&0!==this.raster_processing_types.length?this.raster_processing_types[0]:void 0}},mounted:function(){this.outputType=this.outputTypes.find((function(e){return"zip"===e.name})),this.refreshMeta()}},$i=Mi,Ri=(a("453f"),Object(p["a"])($i,ki,Ei,!1,null,"984b62cc",null)),Ai=Ri.exports,Di=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vue-draggable-resizable",{attrs:{x:e.boxX,y:e.boxY}},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-header"},[e._v(" Viewer Settings "),a("button",{staticClass:"close-button",on:{click:function(t){return e.$emit("close")}}},[e._v("x")])]),a("b",[e._v("Background")]),a("multiselect",{attrs:{options:e.backgroundOptions,searchable:!0,"show-labels":!1,placeholder:"pick a background",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.title)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.title)+" ")]}}]),model:{value:e.selectedBackground,callback:function(t){e.selectedBackground=t},expression:"selectedBackground"}}),a("b",[e._v("Connection")]),e._v(" "),a("button",{staticClass:"button-connection-test",on:{click:e.connection_test}},[e._v("|conntection test|")]),e._v(" "+e._s(e.connectionSpeedMessage)+" "),a("multiselect",{attrs:{options:e.formatOptions,searchable:!0,"show-labels":!1,placeholder:"pick a format",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.title)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a.description)+" ")]}}]),model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}}),a("div",[a("br"),a("br"),a("hr"),a("b",[e._v("Raster visualisation")]),a("div",[a("b",[e._v("Value range")]),e._v(" "),a("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.autoValueRange,callback:function(t){e.autoValueRange=t},expression:"autoValueRange"}}),a("span",{class:{disabled:!e.autoValueRange}},[e._v("auto")]),e._v(" "),a("span",{class:{disabled:e.autoValueRange}},[e._v(" min: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.valueRangeMinText,expression:"valueRangeMinText"}],staticClass:"text-input",class:{"text-input-invalid":!e.autoValueRange&&isNaN(e.valueRangeMin)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:e.autoValueRange,placeholder:"minimum"},domProps:{value:e.valueRangeMinText},on:{input:function(t){t.target.composing||(e.valueRangeMinText=t.target.value)}}}),e._v(" max: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.valueRangeMaxText,expression:"valueRangeMaxText"}],staticClass:"text-input",class:{"text-input-invalid":!e.autoValueRange&&isNaN(e.valueRangeMax)},attrs:{type:"text",id:"name",name:"name",maxlength:"8",size:"10",disabled:e.autoValueRange,placeholder:"maximum"},domProps:{value:e.valueRangeMaxText},on:{input:function(t){t.target.composing||(e.valueRangeMaxText=t.target.value)}}})])],1),a("div",[a("b",[e._v("Gamma")]),e._v(" "),a("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.syncBands,callback:function(t){e.syncBands=t},expression:"syncBands"}}),e._v("sync bands "),a("multiselect",{attrs:{options:e.gammas,"show-labels":!1,allowEmpty:!1,placeholder:"gamma correction"},model:{value:e.selectedGamma,callback:function(t){e.selectedGamma=t},expression:"selectedGamma"}})],1),a("div",[a("b",[e._v("Single band mapping")]),a("multiselect",{attrs:{options:e.oneBandMappings,"show-labels":!1,allowEmpty:!1,placeholder:"value to pixel mapping of one band"},model:{value:e.selectedOneBandMapping,callback:function(t){e.selectedOneBandMapping=t},expression:"selectedOneBandMapping"}})],1)]),a("div",[a("br"),a("br"),a("hr"),a("b",[e._v("Vector overlay")]),a("div",[a("v-checkbox",{staticStyle:{display:"inline-block"},attrs:{"hide-details":""},model:{value:e.showLabels,callback:function(t){e.showLabels=t},expression:"showLabels"}}),e._v("Show vector feature labels ")],1)])],1)])},Ni=[],zi=a("fb19"),Li=a.n(zi);function Ii(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(s,r)}function Fi(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){Ii(i,s,r,n,o,"next",e)}function o(e){Ii(i,s,r,n,o,"throw",e)}n(void 0)}))}}var Bi={name:"admin-viewer-settings",props:[],components:{Multiselect:P.a,VueDraggableResizable:Li.a},data:function(){return{boxX:0,boxY:0,backgroundOptions:[{name:"checkerboard",title:"checkerboard"},{name:"osm",title:"OpenStreetMap"},{name:"OpenTopoMap",title:"OpenTopoMap"},{name:"StamenTerrain",title:"Stamen Terrain"},{name:"black",title:"black"},{name:"grey",title:"grey"},{name:"white",title:"white"}],selectedBackground:void 0,formatOptions:[{name:"image/png:0",title:"uncompressed ",description:"uncompressed - connection > 200 MBit/s"},{name:"image/png",title:"compressed",description:"compressed (default)"},{name:"image/jpeg",title:"lossy compressed (no transparency)",description:"lossy compressed (no transparency) - connection < 50 MBit/s"}],selectedFormat:void 0,connectionSpeedMessage:"(not measured)",gammas:["auto","0.1","0.2","0.5","1.0","1.5","2.0","2.5","3.0"],selectedGamma:"auto",syncBands:!1,oneBandMappings:["grey","inferno","viridis","jet","cividis"],selectedOneBandMapping:"grey",showLabels:!0,autoValueRange:!0,valueRangeMinText:"0",valueRangeMaxText:"255"}},methods:{connection_test:function(){var e=this;return Fi(Je.a.mark((function t(){var a,s,r,i,n;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("connection test start"),e.connectionSpeedMessage="measuring...",t.prev=2,a=performance.now(),t.next=6,I.a.get(e.$store.getters.apiUrl("api/connection_test"),{responseType:"arraybuffer"});case 6:s=performance.now(),r=s-a,i=(2e4/r).toFixed(0),n=(16e4/r).toFixed(0),e.connectionSpeedMessage="measured "+n+" Mbit/s ("+i+" MByte/s)",t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](2),console.log("connection test error"),e.connectionSpeedMessage="measuring error";case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},isNumber:function(e){return void 0!==e&&""!==e&&!isNaN(e)},parseNumber:function(e){return+e}},computed:{valueRangeMin:function(){return this.autoValueRange?NaN:this.isNumber(this.valueRangeMinText)?this.parseNumber(this.valueRangeMinText):NaN},valueRangeMax:function(){return this.autoValueRange?NaN:this.isNumber(this.valueRangeMaxText)?this.parseNumber(this.valueRangeMaxText):NaN}},watch:{selectedBackground:function(){this.$emit("selected-background",this.selectedBackground)},selectedFormat:function(){this.$emit("selected-format",this.selectedFormat)},selectedGamma:function(){this.$emit("selected-gamma",this.selectedGamma)},syncBands:function(){this.$emit("sync-bands",this.syncBands)},showLabels:function(){this.$emit("show-labels",this.showLabels)},selectedOneBandMapping:{immediate:!0,handler:function(){this.$emit("selected-mapping",this.selectedOneBandMapping)}},valueRangeMin:function(){this.$emit("value-range-min",this.valueRangeMin)},valueRangeMax:function(){this.$emit("value-range-max",this.valueRangeMax)}},mounted:function(){this.selectedBackground=this.backgroundOptions[2],this.selectedFormat=this.formatOptions[1]}},Vi=Bi,Gi=(a("02e2"),Object(p["a"])(Vi,Di,Ni,!1,null,"48d6e626",null)),qi=Gi.exports,Ui=a("c810"),Wi=a("81bd"),Ji=a("6792"),Hi=a("2ef1"),Yi=a("273e"),Ki=a("eb48"),Qi=a("3a39"),Zi=a("35d8"),Xi=a("8295"),en=a("a2e1"),tn=a("bc81"),an=a("a79f");function sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function rn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(a),!0).forEach((function(t){nn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function nn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function on(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(s,r)}function cn(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){on(i,s,r,n,o,"next",e)}function o(e){on(i,s,r,n,o,"throw",e)}n(void 0)}))}}var ln={name:"admin-viewer",props:["rasterdb","timestamp","product","vectordb"],components:{"admin-viewer-select":Gr,"admin-viewer-tools":Zr,"admin-viewer-raster-export":di,"admin-viewer-point-export":wi,"admin-viewer-point-raster-export":Ai,"admin-viewer-settings":qi,RingLoader:T["a"]},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,mapAliasToProj4:{},mapProj4ToAlias:{},viewOverlay:void 0,olmousePosition:void 0,layerBackgroundOSM:void 0,layerBackgroundOpenTopoMap:void 0,layerBackgroundStamenTerrain:void 0,selectedFormat:void 0,vectorSource:void 0,vectorLayer:void 0,vectorLabelLayer:void 0,sourceWMS:void 0,layerWMS:void 0,layerWMS_opacity:1,meta:void 0,selectShow:!0,selectedRasterdb:void 0,selectedTimestamp:void 0,selectedProduct:void 0,selectedBackground:void 0,selectedGamma:"auto",syncBands:!1,selectedOneBandMapping:void 0,valueRangeMin:NaN,valueRangeMax:NaN,toolsShow:!0,toolRasterExportShow:!1,toolPointExportShow:!1,toolPointRasterExportShow:!1,selectedVectordb:void 0,showLabels:!0,settingsDialog:!1,mouseModusButtonState:"move",mouseModusKeySelect:!1,interactionExtent:void 0,selectedExtent:void 0,globalEventListeners:{},olmap_viewer_padding_left:400,table:{attibutes:[],data:[]},featureDetailsShow:!1,selectedFeatures:[]}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return s["default"].set(this.notifications,t,e),t},removeNotification:function(e){s["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return s["default"].set(this.messages,t,e),t},removeMessage:function(e){s["default"].delete(this.messages,e)},refreshMeta:function(){var e=this;return cn(Je.a.mark((function t(){var a,s,r;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("refreshMeta"),e.meta=void 0,void 0!==e.selectedRasterdb&&null!==e.selectedRasterdb){t.next=5;break}return e.setVectorView(),t.abrupt("return");case 5:return a=e.addMessage("loading meta data of layer ..."),t.prev=6,s=e.$store.getters.apiUrl("rasterdb/"+e.selectedRasterdb.name+"/meta.json"),t.next=10,I.a.get(s);case 10:r=t.sent,e.meta=r.data,e.removeMessage(a),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](6),e.addnotification("ERROR loading meta data of layer "+t.t0),e.removeMessage(a);case 19:case"end":return t.stop()}}),t,null,[[6,15]])})))()},refreshWMS:function(){var e=this;if(void 0===this.meta)return this.sourceWMS=void 0,this.layerWMS.setSource(void 0),void this.refreshLayers();var t=function(t,a){var s=e.$store.state.identity.transactionCount;t.wmsReqestCount=s,t.getImage().src=a+"&cnt="+s,e.$store.commit("identity/incrementTransactionCount")},a="";void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(a=this.meta.ref.proj4.trim());var s=this.getProjectionAlias(a),r=this.$store.getters.apiUrl("rasterdb_wms");this.sourceWMS=new Ji["a"]({url:r,params:this.wmsParams,imageLoadFunction:t,projection:s,ratio:1}),this.sourceWMS.on("imageloadstart",(function(){e.$store.commit("identity/incrementTransactionRunCount")})),this.sourceWMS.on("imageloadend",(function(){e.$store.commit("identity/decrementTransactionRunCount")})),this.sourceWMS.on("imageloaderror",(function(t){e.$store.commit("identity/decrementTransactionRunCount");var a=e.$store.state.identity.transactionCount-1;t.image.wmsReqestCount===a&&e.addnotification("ERROR loading image")})),this.layerWMS.setSource(this.sourceWMS);var i=this.meta.ref.extent;this.layerWMS.setExtent(i),this.setWmsView()},setWmsView:function(){if(void 0!==this.meta)if(void 0!==this.meta.ref)if(void 0!==this.meta.ref.pixel_size)if(void 0!==this.meta.ref.extent){var e="";void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(e=this.meta.ref.proj4.trim());var t=this.getProjectionAlias(e);console.log("setWmsView "+e+" -> "+t),this.olmousePosition.setProjection(t);var a=this.meta.ref.extent,s=this.meta.ref.pixel_size.x<=this.meta.ref.pixel_size.y?this.meta.ref.pixel_size.x:this.meta.ref.pixel_size.y,r=a[2]-a[0],i=a[3]-a[1],n=r>=i?r:i,o=new vr["a"]({center:[(a[0]+a[2])/2,(a[1]+a[3])/2],projection:t,extent:a,constrainOnlyCenter:!0,minResolution:s/4,maxResolution:n/256});this.olmap.setView(o),o.fit(a),this.olmap.updateSize(),this.refreshLayers()}else this.refreshLayers();else this.refreshLayers();else this.refreshLayers();else this.refreshLayers()},setWebmercatorView:function(){var e="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",t=this.getProjectionAlias(e);this.olmousePosition.setProjection(t);var a=new vr["a"]({center:[0,0],projection:t,zoom:2});this.olmap.setView(a),this.olmap.updateSize(),this.refreshLayers()},setVectorView:function(){if(void 0===this.meta)if(void 0!==this.vectorSource){var e="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",t=this.getProjectionAlias(e);this.olmousePosition.setProjection(t);var a=new vr["a"]({center:[0,0],projection:t,zoom:2});this.olmap.setView(a);var s=this.vectorSource.getExtent();a.fit(s),this.olmap.updateSize(),this.refreshLayers()}else this.setWebmercatorView();else this.refreshLayers()},refreshRoute:function(){var e="/viewer",t={};void 0===this.selectedRasterdb?void 0!==this.rasterdb&&(e+="/"+this.rasterdb):null!==this.selectedRasterdb&&(e+="/"+this.selectedRasterdb.name),void 0===this.selectedTimestamp?void 0!==this.timestamp&&(t.timestamp=this.timestamp):null!==this.selectedTimestamp&&(t.timestamp=this.selectedTimestamp.timestamp),void 0===this.selectedProduct?void 0!==this.product&&(t.product=this.product):null!==this.selectedProduct&&("custom"===this.selectedProduct.title?t.product="custom":t.product=this.selectedProduct.name),void 0===this.selectedVectordb?void 0!==this.vectordb&&(t.vectordb=this.vectordb):null!==this.selectedVectordb&&(t.vectordb=this.selectedVectordb.name),this.$router.push({path:e,query:t})},refreshLayers:function(){var e=this.olmap.getLayers();if(e.clear(),void 0!==this.selectedBackground)switch(this.selectedBackground.name){case"osm":e.push(this.layerBackgroundOSM);break;case"OpenTopoMap":e.push(this.layerBackgroundOpenTopoMap);break;case"StamenTerrain":e.push(this.layerBackgroundStamenTerrain);break}void 0!==this.sourceWMS&&e.push(this.layerWMS),void 0!==this.vectorSource&&(e.push(this.vectorLayer),this.showLabels&&e.push(this.vectorLabelLayer))},selectFullExtent:function(){this.interactionExtent.setExtent(this.meta.ref.extent)},refreshVectordbLayer:function(){void 0!==this.selectedVectordb&&null!==this.selectedVectordb&&void 0!==this.epsgCode?(this.loadGeojson(),this.loadTable()):this.refreshVectorSource(void 0)},loadGeojson:function(){var e=this;return cn(Je.a.mark((function t(){var a,s,r,i;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.addMessage("loading vector data of layer ..."),s=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name+"/geometry.json"),t.prev=2,t.next=5,I.a.get(s,{params:{epsg:e.epsgCode,just_name_attribute:!0}});case 5:r=t.sent,i=r.data,e.removeMessage(a),e.refreshVectorSource(i),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.addnotification("ERROR vector data of layer"+t.t0),e.removeMessage(a);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},loadTable:function(){var e=this;return cn(Je.a.mark((function t(){var a,s,r;return Je.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.addMessage("loading table data of layer ..."),s=e.$store.getters.apiUrl("vectordbs/"+e.selectedVectordb.name+"/table.json"),t.prev=2,t.next=5,I.a.get(s);case 5:r=t.sent,e.table=r.data,e.removeMessage(a),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),e.addnotification("ERROR table data of layer"),e.removeMessage(a);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},refreshVectorSource:function(e){if(void 0===e)return this.vectorSource=void 0,this.vectorLayer.setSource(void 0),this.vectorLabelLayer.setSource(void 0),void this.setVectorView();var t=(new en["a"]).readFeatures(e);this.vectorSource=new dr["a"]({features:t}),this.vectorLayer.setSource(this.vectorSource),this.vectorLabelLayer.setSource(this.vectorSource),this.setVectorView()},onSettingsDialog:function(){this.settingsDialog=!this.settingsDialog;var e=document.getElementById("innergrid-item-nav").getBoundingClientRect();this.$refs.settingsDialog.boxX=e.right},showFeaturesDialog:function(e){var t=this.vectorSource.getClosestFeatureToCoordinate(e.coordinate);null!==t&&(console.log("clicked "+t.getId()+"  "+e.coordinate),this.selectedFeatures=[t],this.featureDetailsShow=!0)},featureToTableEntry:function(e){if(void 0===e)return[];var t=this.table.data[e];return void 0==t?[]:t},getProjectionAlias:function(e){var t=this.mapProj4ToAlias[e];if(void 0===t){var a=1;t="WMS_VIEW_PROJECTION_"+a;while(void 0!==this.mapAliasToProj4[t])a++,t="WMS_VIEW_PROJECTION_"+a;this.mapAliasToProj4[t]=e,this.mapProj4ToAlias[e]=t,an["a"].defs(t,e),Object(tn["a"])(an["a"])}return t}},computed:rn({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{mouseModus:function(){var e=this.mouseModusButtonState;return this.mouseModusKeySelect&&(e="select"),e},session:function(){var e=this.$store.state.identity.data;return void 0===e?void 0:e.session},transactionRunCount:function(){return this.$store.state.identity.transactionRunCount},selectedBackgroundClass:function(){if(void 0===this.selectedBackground)return"";switch(this.selectedBackground.name){case"checkerboard":return"background-checkerboard";case"black":return"background-black";case"white":return"background-white";default:return""}},wmsParams:function(){var e="color";e=void 0==this.selectedProduct||null==this.selectedProduct?void 0!==this.meta&&null!==this.meta&&void 0!==this.meta.bands&&1==this.meta.bands.length?"band"+this.meta.bands[0].index:"color":this.selectedProduct.name,"auto"!==this.selectedGamma&&(e+=" gamma"+this.selectedGamma),"undefined"!==this.selectedOneBandMapping&&"grey"!==this.selectedOneBandMapping&&(e+=" pal_"+this.selectedOneBandMapping),this.syncBands&&(e+=" sync_bands"),isNaN(this.valueRangeMin)||(e+=" min"+this.valueRangeMin),isNaN(this.valueRangeMax)||(e+=" max"+this.valueRangeMax);var t={LAYERS:this.rasterdb};return void 0!==this.selectedTimestamp&&null!==this.selectedTimestamp&&(t.TIME=this.selectedTimestamp.timestamp),""!==e&&(t.STYLES=e),void 0!==this.session&&(t.session=this.session),void 0!==this.selectedFormat&&(t.FORMAT=this.selectedFormat.name),t},epsgCode:function(){if(void 0===this.meta||void 0===this.meta.ref)return 3857;var e=this.meta.ref.code;if(void 0!==e&&e.startsWith("EPSG:")){var t=Number.parseInt(e.substring(5));return Number.isInteger(t)?t:void 0}}}),watch:{$route:function(e){console.log(e)},selectedRasterdb:function(){this.refreshMeta(),this.refreshRoute()},meta:function(){this.refreshWMS(),this.interactionExtent.setExtent();var e="unknown projection";void 0!==this.meta&&void 0!==this.meta.ref&&(void 0!==this.meta.ref.projectionTitle?e=this.meta.ref.projectionTitle:void 0!==this.meta.ref.proj4&&""!==this.meta.ref.proj4&&(e=this.meta.ref.proj4)),document.getElementById("foot-start-1").innerHTML=e},selectedTimestamp:function(){this.refreshWMS(),this.refreshRoute()},selectedProduct:function(){this.refreshRoute()},selectedVectordb:function(){this.refreshVectordbLayer(),this.refreshRoute()},mouseModusButtonState:function(){this.mouseModusKeySelect=!1},wmsParams:function(){void 0!==this.sourceWMS&&this.sourceWMS.updateParams(this.wmsParams)},session:function(){this.refreshWMS()},selectedBackground:function(){this.refreshLayers()},mouseModus:function(){switch(this.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),this.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),this.mouseModus){case"select":this.interactionExtent.setActive(!0),this.viewOverlay.classList.add("olmap-viewer-mouseModus-select");break;default:this.interactionExtent.setActive(!1),this.interactionExtent.createOrUpdatePointerFeature_([NaN,NaN]),this.viewOverlay.classList.add("olmap-viewer-mouseModus-move");break}},layerWMS_opacity:function(){void 0!==this.layerWMS&&this.layerWMS.setOpacity(this.layerWMS_opacity)},epsgCode:function(){this.refreshVectordbLayer()},showLabels:function(){this.refreshLayers()}},mounted:function(){var e=this,t=this;document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="";var a=document.getElementById("innergrid-item-nav").getBoundingClientRect();this.olmap_viewer_padding_left=a.right,this.globalEventListeners.keydown=function(t){17==t.keyCode&&(e.mouseModusKeySelect=!0)},this.globalEventListeners.keyup=function(t){17==t.keyCode&&(e.mouseModusKeySelect=!1)},document.addEventListener("keydown",this.globalEventListeners.keydown),document.addEventListener("keyup",this.globalEventListeners.keyup),this.$store.dispatch("identity/init"),this.layerWMS=new Ui["a"]({}),this.layerWMS.setOpacity(this.layerWMS_opacity),this.layerBackgroundOSM=new lr["a"]({source:new ur["b"]}),this.layerBackgroundOpenTopoMap=new lr["a"]({title:"OpenTopoMap",type:"base",visible:!0,source:new Hi["a"]({url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",attributions:'Kartendaten: © <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>-Mitwirkende, SRTM | Kartendarstellung: © <a href="http://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',wrapX:!1})}),this.layerBackgroundStamenTerrain=new lr["a"]({source:new Yi["a"]({layer:"terrain",wrapX:!1})});var s=new gr["a"]({color:"rgba(255,255,255,0.0)"}),r=new yr["a"]({color:"rgb(95, 112, 245)",width:2}),i=new yr["a"]({color:"rgb(200, 20, 35)",width:2});function n(){return new xr["c"]({image:new Zi["a"]({stroke:i,points:4,radius:10,radius2:0,angle:Math.PI/4}),fill:s,stroke:r})}this.vectorLayer=new Wi["a"]({style:n});var o=new gr["a"]({color:"rgba(255,255,255,0.6)"});function c(e){var t=new Xi["a"]({font:"15px sans-serif",text:e.getProperties().name,overflow:!0,backgroundFill:o,padding:[2,2,2,2]});return new xr["c"]({text:t})}this.vectorLabelLayer=new Wi["a"]({style:c,declutter:!0});var l=[new xr["c"]({fill:new gr["a"]({color:[255,255,255,.5]})}),new xr["c"]({stroke:new yr["a"]({color:[50,50,50],width:1,lineDash:[10]})})];this.interactionExtent=new Ki["a"]({boxStyle:l}),this.interactionExtent.on("extentchanged",(function(e){null===e.extent?t.selectedExtent=void 0:t.selectedExtent=e.extent})),this.interactionExtent.setActive(!1),this.olmousePosition=new br["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(kr["i"])(e,2)}}),this.olmap=new or["a"]({target:"olmap-viewer",controls:_r["a"]({attributionOptions:{collapsible:!1}}).extend([new hr["a"],this.olmousePosition]),interactions:Qi["a"]().extend([this.interactionExtent])}),this.viewOverlay=document.querySelector(".ol-overlaycontainer-stopevent"),this.olmap.on("click",(function(t){switch(e.mouseModus){case"move":e.showFeaturesDialog(t);break}})),this.olmap.on("movestart",(function(){switch(e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),e.mouseModus){case"select":e.viewOverlay.classList.add("olmap-viewer-mouseModus-select-on");break;default:e.viewOverlay.classList.add("olmap-viewer-mouseModus-move-on");break}})),this.olmap.on("moveend",(function(){switch(e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-move-on"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select"),e.viewOverlay.classList.remove("olmap-viewer-mouseModus-select-on"),e.mouseModus){case"select":e.viewOverlay.classList.add("olmap-viewer-mouseModus-select");break;default:e.viewOverlay.classList.add("olmap-viewer-mouseModus-move");break}})),this.setWebmercatorView()},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?",document.removeEventListener("keydown",this.globalEventListeners.keydown),document.removeEventListener("keyup",this.globalEventListeners.keyup)}},dn=ln,un=(a("3bce"),a("0e36"),Object(p["a"])(dn,Rr,Ar,!1,null,"03de5620",null)),vn=un.exports,mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("div",{staticClass:"innergrid-item-main"},["init"===e.uploadState?a("div",[a("h1",{staticStyle:{"text-align":"center"}},[e._v("Raster File Upload")]),a("uploader",{staticClass:"uploader-example",attrs:{options:e.options},on:{"file-success":function(t){e.inspectFilename=t.name,e.uploadState="done"}}},[a("uploader-unsupport"),a("uploader-drop",[a("p",[a("b",[e._v("Upload")]),e._v(" - Drop raster-file here or")]),a("uploader-btn",[a("v-icon",[e._v("cloud_upload")]),e._v("select raster-file")],1)],1),a("uploader-list")],1),a("div",{staticStyle:{padding:"50px"}},[void 0===e.identity||e.identity.secure?e._e():a("div",[a("h2",[e._v("For upload of big files you need to connect with HTTPS.")]),e._v(" You may switch to HTTPS at "),a("a",{attrs:{href:"#/tools"}},[e._v("tools-tab")]),a("br"),a("br"),a("br")]),e._m(0),e._m(1)])],1):e._e(),"done"===e.uploadState?a("div",[a("b",[e._v("raster file uploaded.")]),e._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:"done"!==e.importState,expression:"importState !== 'done'"}],on:{click:function(t){return e.cancel_upload()}}},[a("v-icon",[e._v("cancel")]),e._v(" (cancel import)")],1),e._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:"done"===e.importState,expression:"importState === 'done'"}],on:{click:function(t){return e.cancel_upload()}}},[a("v-icon",[e._v("arrow_right_alt")]),e._v(" leave and upload another file")],1),a("hr"),a("table",[a("tr",[e._m(2),a("td",[e._v(e._s(e.inspectFilename))])]),a("tr",[e._m(3),a("td",{staticStyle:{"white-space":"nowrap"}},[a("label",{attrs:{for:"checkbox"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.guessTimestamp,expression:"guessTimestamp"}],staticStyle:{width:"40px"},attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.guessTimestamp)?e._i(e.guessTimestamp,null)>-1:e.guessTimestamp},on:{change:function(t){var a=e.guessTimestamp,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.guessTimestamp=a.concat([i])):n>-1&&(e.guessTimestamp=a.slice(0,n).concat(a.slice(n+1)))}else e.guessTimestamp=r}}}),e._v(" Try to guess timestamp from filename.")])])]),a("tr",[e._m(4),a("td",[a("multiselect",{staticStyle:{"min-width":"550px"},attrs:{options:e.importStrategies,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import strategy"},model:{value:e.importStrategy,callback:function(t){e.importStrategy=t},expression:"importStrategy"}})],1)]),"existing_add"===e.importStrategy.id||"existing_merge"===e.importStrategy.id?a("tr",[e._m(5),a("td",[a("multiselect",{attrs:{options:e.rasterdbs,"track-by":"name",label:"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import strategy"},model:{value:e.existingRasterdb,callback:function(t){e.existingRasterdb=t},expression:"existingRasterdb"}})],1)]):e._e()]),a("br"),a("v-btn",{attrs:{disabled:"inspecting"===e.inspectState||"importing"===e.importState||("existing_add"===e.importStrategy.id||"existing_merge"===e.importStrategy.id)&&void 0===e.existingRasterdb.name},on:{click:function(t){return e.inspect()}}},[a("v-icon",[e._v("zoom_in")]),e._v("inspect")],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"done"===e.inspectState,expression:"inspectState === 'done'"}]},[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" press again to discard and reload meta data")],1),"inspecting"===e.inspectState?a("div",[a("pulse-loader"),e._v(" Inspecting file ... ")],1):e._e(),a("hr"),"done"===e.inspectState?a("div",[a("br"),a("div",[void 0!==e.specification.gdal_driver?a("span",[e._v("file type: "),a("b",[e._v(e._s(e.specification.gdal_driver))]),e._v(" ; ")]):e._e(),a("b",[e._v(e._s(e.specification.x_range)+" width")]),e._v(" x "),a("b",[e._v(e._s(e.specification.y_range)+" height")]),e._v(" ==> "),a("b",[e._v(e._s(e.specification.x_range*e.specification.y_range)+" pixels")]),e._v(" ; "),e.specification.bands.length<=1?a("span",[a("b",[e._v(e._s(e.specification.bands.length)+" band")])]):e._e(),e.specification.bands.length>1?a("span",[a("b",[e._v(e._s(e.specification.bands.length)+" bands")]),e._v(" ==> "),a("b",[e._v(e._s(e.specification.x_range*e.specification.y_range*e.specification.bands.length)+" values")])]):e._e(),a("br"),a("br"),a("span",{staticStyle:{"white-space":"nowrap",display:"inline-block"}},[a("span",{staticStyle:{"white-space":"nowrap",display:"inline-block"}},[e._v("mode ")]),e._v(" "),a("multiselect",{staticStyle:{"min-width":"550px","white-space":"nowrap",display:"inline-block"},attrs:{options:e.importModes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select import mode"},model:{value:e.importMode,callback:function(t){e.importMode=t},expression:"importMode"}})],1),a("br"),a("br"),"simple"===e.importMode.id?a("table",[a("tr",[e._m(6),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.timestamp,expression:"specification.timestamp"}],attrs:{placeholder:"timestamp"},domProps:{value:e.specification.timestamp},on:{input:function(t){t.target.composing||e.$set(e.specification,"timestamp",t.target.value)}}})]),a("td",[e._v(" "),a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("Format: "),a("b",[e._v("yyyy-MM-dd'T'HH:mm")]),e._v(" e.g. "),a("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31T23:59")]),e._v(" or shortened forms e.g. "),a("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31")]),e._v(" or "),a("span",{staticStyle:{color:"grey"}},[e._v("2001-12")]),e._v(" or "),a("span",{staticStyle:{color:"grey"}},[e._v("2001")])],1)])]):e._e()]),a("br"),e.create?a("table",[a("tr",[e._m(7),a("td",[e._v(e._s(e.specification.filename))])]),a("tr",[e._m(8),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.id,expression:"specification.id"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"id"},domProps:{value:e.specification.id},on:{input:function(t){t.target.composing||e.$set(e.specification,"id",t.target.value)}}})]),e.existingID?e._e():a("td",[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),a("b",[e._v("Caution")]),e._v(" with existing IDs: Layer will be deleted and overwritten with imported data.")],1),e.existingID?a("td",{staticStyle:{color:"red"}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" ID already exists: Layer will be deleted and overwritten with imported data.")],1):e._e()]),a("tr",[e._m(9),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.title,expression:"specification.title"}],attrs:{placeholder:"title"},domProps:{value:e.specification.title},on:{input:function(t){t.target.composing||e.$set(e.specification,"title",t.target.value)}}})])]),a("tr",[e._m(10),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.description,expression:"specification.description"}],attrs:{placeholder:"description"},domProps:{value:e.specification.description},on:{input:function(t){t.target.composing||e.$set(e.specification,"description",t.target.value)}}})])]),a("tr",[e._m(11),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.acquisition_date,expression:"specification.acquisition_date"}],attrs:{placeholder:"date or range of dates"},domProps:{value:e.specification.acquisition_date},on:{input:function(t){t.target.composing||e.$set(e.specification,"acquisition_date",t.target.value)}}})])]),a("tr",[e._m(12),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.corresponding_contact,expression:"specification.corresponding_contact"}],attrs:{placeholder:"e.g. user name (name@mail.com), user2 name2 (name@mail.com)"},domProps:{value:e.specification.corresponding_contact},on:{input:function(t){t.target.composing||e.$set(e.specification,"corresponding_contact",t.target.value)}}})])]),a("tr",[e._m(13),a("td",[a("multiselect",{attrs:{options:e.layer_tags,multiple:"",taggable:!0,placeholder:"select tags",tagPlaceholder:"Press enter to create a tag"},on:{tag:e.createTag},model:{value:e.specification.tags,callback:function(t){e.$set(e.specification,"tags",t)},expression:"specification.tags"}})],1)]),a("tr",[e._m(14),a("td",[a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclRole},model:{value:e.specification.acl,callback:function(t){e.$set(e.specification,"acl",t)},expression:"specification.acl"}})],1),a("td",[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" select a role that that you "),a("i",[e._v("have")]),e._v(", to view uploaded (meta-)data (if you are not admin).")],1)]),a("tr",[e._m(15),a("td",[a("multiselect",{attrs:{options:e.acl_roles,multiple:"",taggable:!0,placeholder:"select roles",tagPlaceholder:"Press enter to create a role"},on:{tag:e.createAclModRole},model:{value:e.specification.acl_mod,callback:function(t){e.$set(e.specification,"acl_mod",t)},expression:"specification.acl_mod"}})],1),a("td",[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" select a role that that you "),a("i",[e._v("have")]),e._v(", to modify uploaded (meta-)data (if you are not admin).")],1)])]):e._e(),e.create?e._e():a("table",[a("tr",[e._m(16),a("td",[e._v(e._s(e.specification.filename))])]),a("tr",[e._m(17),a("td",[e._v(e._s(e.specification.id))])]),a("tr",[e._m(18),a("td",[e._v(e._s(e.specification.title))])]),a("tr",[e._m(19),a("td",[e._v(e._s(e.specification.description))])]),a("tr",[e._m(20),a("td",[e._v(e._s(e.specification.acquisition_date))])]),a("tr",[e._m(21),a("td",[e._v(e._s(e.specification.tags))])]),a("tr",[e._m(22),a("td",[e._v(e._s(e.specification.acl))])]),a("tr",[e._m(23),a("td",[e._v(e._s(e.specification.acl_mod))])])]),e.create?a("table",[a("tr",[e._m(24),a("td",[e._v("x "+e._s(e.specification.pixel_size_x)+" y "+e._s(e.specification.pixel_size_y))])]),a("tr",[e._m(25),a("td",[e._v("x "+e._s(e.specification.rasterdb_geo_offset_x)+" y "+e._s(e.specification.rasterdb_geo_offset_y))])])]):e._e(),e.create?e._e():a("table",{staticStyle:{"text-align":"center"}},[e._m(26),a("tr",[e._m(27),a("td",[e._v(e._s(e.specification.pixel_size_x))]),a("td"),a("td",[e._v(e._s(e.specification.pixel_size_y))])]),a("tr",[e._m(28),a("td",[e._v(e._s(e.specification.file_pixel_size_x))]),a("td"),a("td",[e._v(e._s(e.specification.file_pixel_size_y))])])]),e.specification.pixel_size_x!=e.specification.file_pixel_size_x||e.specification.pixel_size_y!=e.specification.file_pixel_size_y?a("div",{staticStyle:{color:"red"}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" Pixel size of layer raster and pixel size of file raster do seem to differ. "),a("br"),e._v("If difference is more than a very small amount pixels are inserted at wrong positions. "),a("br"),a("b",{staticStyle:{"font-size":"1.2em"}},[e._v("No reprojection will be done.")])],1):e._e(),a("br"),e.create?a("table",[a("tr",[e._m(29),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.geo_code,expression:"specification.geo_code"}],attrs:{placeholder:"code"},domProps:{value:e.specification.geo_code},on:{input:function(t){t.target.composing||e.$set(e.specification,"geo_code",t.target.value)}}})]),e.validEPSG?a("td",[e._v("==> go to "),a("a",{attrs:{href:"https://epsg.io/"+e.epsg,target:"_blank"}},[e._v("epsg.io")])]):e._e(),e.validEPSG?e._e():a("td",[a("b",[e._v("no EPSG code")]),e._v(": typical geo codes start with "),a("i",[e._v("EPSG:")]),e._v(" e.g. "),a("i",[e._v("EPSG:4326")])])]),a("tr",[e._m(30),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.specification.proj4,expression:"specification.proj4"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"proj4"},domProps:{value:e.specification.proj4},on:{input:function(t){t.target.composing||e.$set(e.specification,"proj4",t.target.value)}}})]),e.proj4CompareOK?a("td",[a("b",{staticStyle:{color:"green"}},[a("v-icon",[e._v("check")])],1),e._v(" (checked on epsg.io)")]):e._e(),e.proj4CompareOK||void 0===e.proj4Compare?e._e():a("td",[a("b",[a("v-icon",[e._v("warning")]),e._v(" Does not match to epsg.io")],1),e._v(" "),a("v-btn",{on:{click:function(t){e.specification.proj4=e.proj4Compare}}},[e._v("==> adopt epsg.io")]),e._v(' "'+e._s(e.proj4Compare)+'"')],1),void 0!==e.proj4CompareError?a("td",[a("b",[e._v("ERROR")]),e._v(": could not get proj4 from epsg.io (invalid EPSG code?)")]):e._e()])]):e._e(),e.create?e._e():a("table",[a("tr",[e._m(31),a("td",[e._v(e._s(e.specification.geo_code))])]),a("tr",[e._m(32),a("td",[e._v(e._s(e.specification.file_geo_code))])]),a("tr",[e._m(33),a("td",[e._v(e._s(e.specification.proj4))])]),a("tr",[e._m(34),a("td",[e._v(e._s(e.specification.file_proj4))])])]),e.specification.geo_code!=e.specification.file_geo_code||e.specification.proj4!=e.specification.file_proj4?a("div",{staticStyle:{color:"red"}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" Projection of layer raster and projection of file raster do seem to differ. "),a("br"),e._v("Check if this is correct. "),a("br"),a("b",{staticStyle:{"font-size":"1.2em"}},[e._v("No reprojection will be done.")])],1):e._e(),a("br"),e.create?e._e():a("div",[a("b",[e._v("existing band indices:")]),e._v(" "),a("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(e.specification.existing_bands.map((function(e){return e.index}))))]),a("br"),a("br")]),a("hr"),"simple"===e.importMode.id?a("div",e._l(e.specification.bands,(function(t){return a("div",{key:t.file_band_index},[a("table",[a("tr",[a("td",[a("b",[e._v("file band index "),a("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(t.file_band_index))]),e._v(" ==> ")])]),a("td",[a("span",[e._v("layer band index")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rasterdb_band_index,expression:"band.rasterdb_band_index"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"band number in rasterdb. Leave empty to omit (not import) this band."},domProps:{value:t.rasterdb_band_index},on:{input:function(a){a.target.composing||e.$set(t,"rasterdb_band_index",a.target.value)}}})]),""===t.rasterdb_band_index||e.isNaturalNumber(t.rasterdb_band_index)?e._e():a("td",[a("b",{staticStyle:{color:"red"}},[e._v("Error:")]),e._v(" band index needs to be a non-negative integer number")]),""!==t.rasterdb_band_index?a("td",[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Leave empty to omit (not import) this band.")],1):e._e(),""===t.rasterdb_band_index?a("td",[e._v("band exlcuded from import")]):e._e()]),!e.create&&e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(35,!0),a("td",[a("b",[e._v(e._s(void 0===e.existing_bands_map[t.rasterdb_band_index]?"create new band":"into existing band"))])])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[a("td",[a("b",[e._v("file band data type ("+e._s(t.gdal_raster_data_type)+") ==> ")])]),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("v-select",{attrs:{items:["short","float"]},model:{value:t.rastedb_band_data_type,callback:function(a){e.$set(t,"rastedb_band_data_type",a)},expression:"band.rastedb_band_data_type"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.rastedb_band_data_type))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(36,!0),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.no_data_value,expression:"band.no_data_value"}],attrs:{placeholder:"no data value"},domProps:{value:t.no_data_value},on:{input:function(a){a.target.composing||e.$set(t,"no_data_value",a.target.value)}}})])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(37,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.band_name,expression:"band.band_name"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"name"},domProps:{value:t.band_name},on:{input:function(a){a.target.composing||e.$set(t,"band_name",a.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.band_name))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(38,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wavelength,expression:"band.wavelength"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"wavelength in nm"},domProps:{value:t.wavelength},on:{input:function(a){a.target.composing||e.$set(t,"wavelength",a.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.wavelength))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(39,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fwhm,expression:"band.fwhm"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"fwhm in nm"},domProps:{value:t.fwhm},on:{input:function(a){a.target.composing||e.$set(t,"fwhm",a.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.fwhm))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(40,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("v-select",{attrs:{items:["(not specified)","red","green","blue"]},model:{value:t.visualisation,callback:function(a){e.$set(t,"visualisation",a)},expression:"band.visualisation"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.visualisation))]):e._e()]):e._e()]),a("hr")])})),0):e._e(),"timeseries"===e.importMode.id?a("div",[a("br"),e._v(" "),a("admin-upload-generate-timestamps",{attrs:{specification:e.specification},on:{"timestamp-sequence":function(t){return e.fillTimestamps(t)}}}),a("br"),a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v("timestamp format: "),a("b",[e._v("yyyy-MM-dd'T'HH:mm")]),e._v(" e.g. "),a("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31T23:59")]),e._v(" or shortened forms e.g. "),a("span",{staticStyle:{color:"grey"}},[e._v("2001-12-31")]),e._v(" or "),a("span",{staticStyle:{color:"grey"}},[e._v("2001-12")]),e._v(" or "),a("span",{staticStyle:{color:"grey"}},[e._v("2001")]),a("br"),a("table",{staticStyle:{"border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#aaaaaa",cellpadding:"10"}},[e._m(41),e._m(42),e._l(e.specification.bands,(function(t){return a("tr",{key:t.file_band_index},[a("td",{staticStyle:{"background-color":"rgb(244, 250, 255)"},attrs:{align:"center"}},[e._v(e._s(t.file_band_index))]),a("td",{staticStyle:{"background-color":"rgb(244, 250, 255)"},attrs:{align:"center"}},[e._v(e._s(t.gdal_raster_data_type))]),a("td",{attrs:{align:"center"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.no_data_value,expression:"band.no_data_value"}],staticStyle:{"text-align":"center","background-color":"rgb(244, 250, 255)"},attrs:{placeholder:"no data value"},domProps:{value:t.no_data_value},on:{input:function(a){a.target.composing||e.$set(t,"no_data_value",a.target.value)}}})]),a("td",{attrs:{align:"center"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rasterdb_band_index,expression:"band.rasterdb_band_index"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"omit"},domProps:{value:t.rasterdb_band_index},on:{input:function(a){a.target.composing||e.$set(t,"rasterdb_band_index",a.target.value)}}})]),a("td",{attrs:{align:"center"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.timestamp,expression:"band.timestamp"}],staticStyle:{"min-width":"10px","text-align":"center","background-color":"rgb(247, 255, 244)"},attrs:{placeholder:"timestamp"},domProps:{value:t.timestamp},on:{input:function(a){a.target.composing||e.$set(t,"timestamp",a.target.value)}}})])])}))],2),a("br"),a("hr"),e._l(e.specification.addBands,(function(t){return a("div",{key:t.rasterdb_band_index},[a("table",[a("tr",[a("td",[a("b",{staticStyle:{"font-size":"1.5em"}},[e._v("layer band index "),a("span",{staticStyle:{"font-size":"1.5em"}},[e._v(e._s(t.rasterdb_band_index))])])])]),!e.create&&e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(43,!0),a("td",[a("b",[e._v(e._s(void 0===e.existing_bands_map[t.rasterdb_band_index]?"create new band":"into existing band"))])])]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(44,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("v-select",{attrs:{items:["short","float"]},model:{value:t.rastedb_band_data_type,callback:function(a){e.$set(t,"rastedb_band_data_type",a)},expression:"band.rastedb_band_data_type"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.rastedb_band_data_type))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(45,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.band_name,expression:"band.band_name"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"name"},domProps:{value:t.band_name},on:{input:function(a){a.target.composing||e.$set(t,"band_name",a.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.band_name))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(46,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wavelength,expression:"band.wavelength"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"wavelength in nm"},domProps:{value:t.wavelength},on:{input:function(a){a.target.composing||e.$set(t,"wavelength",a.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.wavelength))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(47,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fwhm,expression:"band.fwhm"}],staticStyle:{"min-width":"500px"},attrs:{placeholder:"fwhm in nm"},domProps:{value:t.fwhm},on:{input:function(a){a.target.composing||e.$set(t,"fwhm",a.target.value)}}})]):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.fwhm))]):e._e()]):e._e(),e.isNaturalNumber(t.rasterdb_band_index)?a("tr",[e._m(48,!0),void 0===e.existing_bands_map[t.rasterdb_band_index]?a("td",[a("v-select",{attrs:{items:["(not specified)","red","green","blue"]},model:{value:t.visualisation,callback:function(a){e.$set(t,"visualisation",a)},expression:"band.visualisation"}})],1):e._e(),void 0!==e.existing_bands_map[t.rasterdb_band_index]?a("td",[e._v(e._s(t.visualisation))]):e._e()]):e._e()]),a("hr")])}))],2):e._e(),a("br"),a("v-checkbox",{attrs:{label:"update pyramid"},model:{value:e.specification.update_pyramid,callback:function(t){e.$set(e.specification,"update_pyramid",t)},expression:"specification.update_pyramid"}}),a("v-checkbox",{attrs:{label:"update catalog"},model:{value:e.specification.update_catalog,callback:function(t){e.$set(e.specification,"update_catalog",t)},expression:"specification.update_catalog"}}),!e.create||void 0!==e.specification&&void 0!==e.specification.acl&&0!==e.specification.acl.length?e._e():a("div",{staticStyle:{color:"red"}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" No access role specified. ==> Only admin can view imported raster. ")],1),!e.create||void 0!==e.specification&&void 0!==e.specification.acl_mod&&0!==e.specification.acl_mod.length?e._e():a("div",{staticStyle:{color:"red"}},[a("v-icon",{staticStyle:{color:"red"}},[e._v("warning")]),e._v(" No modify role specified. ==> Only admin can modify imported raster and reimport raster with same id. ")],1),a("br"),a("v-btn",{attrs:{disabled:"importing"===e.importState||!e.create&&"init"!==e.importState},on:{click:function(t){return e.start_import()}}},[a("v-icon",[e._v("cloud_upload")]),e._v(" >> import <<")],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"done"===e.importState&&e.create,expression:"importState === 'done' && create"}]},[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" press again to reimport (e.g. with changed meta data)")],1),void 0!==e.remote_task?a("div",[e._v(" "+e._s((e.remote_task.runtime/1e3).toFixed(0))+" s "),a("br"),a("span",{staticStyle:{color:"grey"}},[e._v(e._s(e.remote_task.message))])]):e._e(),"init"===e.importState?a("div",[e._v(" Import not started. Press 'import' to start. ")]):e._e(),"importing"===e.importState?a("div",[a("pulse-loader"),e._v(" Import is running ... ")],1):e._e(),"error"===e.importState?a("div",[a("v-icon",{staticStyle:{color:"red"}},[e._v("error")]),e._v(" "),a("b",[e._v("Import error")]),a("br"),e._v(e._s(e.importErrorStatus)+" : "+e._s(e.importErrorStatusText)+" "),a("br"),a("br"),e._v(e._s(e.importErrorStatusMessage)+" ")],1):e._e(),"done"===e.importState?a("div",[a("v-icon",{staticStyle:{color:"green"}},[e._v("cloud_done")]),e._v(" Import done. "),a("br"),a("br"),e._v("view meta data: "),a("a",{attrs:{href:"#/layers/rasterdbs/"+e.specification.id}},[e._v(e._s(e.specification.id))]),a("br"),a("br"),e._v("view layer: "),a("a",{attrs:{href:"#/viewer/"+e.specification.id}},[e._v(e._s(e.specification.id))])],1):e._e()],1):e._e(),a("br"),a("br"),a("br")],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,s){return a("div",{key:s},[e._v(e._s(t))])})),0),e._l(e.notifications,(function(t,s){return a("v-snackbar",{key:s,attrs:{value:"true"}},[e._v(" "+e._s(t)),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(s)}}},[e._v("Close")])],1)}))],2)])},pn=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("b",[e._v("Procedure of raster file-import:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[e._v("user uploads a raster-file")]),a("li",[e._v("remote sensing database inspects raster-file")]),a("li",[e._v("remote sensing database prefills import-form")]),a("li",[e._v("user completes import-form")]),a("li",[e._v("remote sensing database imports raster-file based on import-form")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("timestamp:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticStyle:{"min-width":"150px"}},[a("b",[e._v("strategy:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("existing raster layer id:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[e._v("(optional) "),a("b",[e._v("timestamp")]),e._v(" of inserted data within this layer ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("ID")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("title")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("informal acquisition date")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("corresponding contact")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("modify roles")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("filename:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("ID")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("title")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("description")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("acquisition date")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("tags")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("access roles")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("modify roles")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("pixel size:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("offset:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td"),a("td",[a("b",[e._v("x")])]),a("td"),a("td",[a("b",[e._v("y")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("layer pixel size ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("file pixel size ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("code:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("layer code:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("file code:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("layer proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("file proj4:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("import")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("file no data value: ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("band name:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("wavelength (nm):")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("fwhm (nm):")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("visualisation:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticStyle:{"background-color":"rgb(196, 205, 213)"},attrs:{colspan:"3",align:"center"}},[a("b",[e._v("file")])]),a("td",{staticStyle:{"background-color":"rgb(189, 206, 184)"},attrs:{colspan:"2",align:"center"}},[a("b",[e._v("layer")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[a("b",[e._v("band")])]),a("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[a("b",[e._v("type")])]),a("td",{staticStyle:{"background-color":"#dee7ef"},attrs:{align:"center"}},[a("b",[e._v("NA-value")])]),a("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[a("b",[e._v("band")])]),a("td",{staticStyle:{"background-color":"rgb(211, 230, 205)"},attrs:{align:"center"}},[a("b",[e._v("timestamp")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("import")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("layer band data type")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("band name:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("wavelength (nm):")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("fwhm (nm):")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("b",[e._v("visualisation:")])])}],fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("v-dialog",{attrs:{lazy:"",absolute:"",width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",title:"generate sequence of timestamps"},slot:"activator"},[a("v-icon",{attrs:{left:""}},[e._v("folder_open")]),e._v("generate timestamps ")],1),a("v-card",[a("v-card-title",[a("div",{staticClass:"headline"},[e._v("generate sequence of timestamps ("+e._s(e.bandCount)+")")])]),a("span",{staticStyle:{color:"grey"}},[a("v-icon",{staticStyle:{color:"grey"},attrs:{title:"note"}},[e._v("event_note")]),e._v(" Click "),a("i",[e._v("apply")]),e._v("-button to commit generated timestamps. (You may need to scroll down.)")],1),a("br"),a("br"),a("multiselect",{attrs:{options:e.modes,"track-by":"id",label:"title",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select mode"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}}),a("br"),e._v(" first timestamp year (e.g. 2001) "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.first_year,expression:"first_year"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"year"},domProps:{value:e.first_year},on:{input:function(t){t.target.composing||(e.first_year=t.target.value)}}}),"month"===e.mode.id?a("span",[e._v(" month (e.g. 12) "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.first_month,expression:"first_month"}],staticStyle:{"background-color":"aliceblue"},attrs:{placeholder:"month"},domProps:{value:e.first_month},on:{input:function(t){t.target.composing||(e.first_month=t.target.value)}}})]):e._e(),a("br"),a("br"),a("hr"),a("div",{staticStyle:{"background-color":"#e4ebf54d"}},[a("div",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.inputError)+" ")]),void 0===e.inputError?a("table",[a("tr",[a("th",{attrs:{align:"center"}},[e._v("band")]),a("th",{attrs:{align:"center"}},[e._v("timestamp")])]),e._l(e.timestamps,(function(t,s){return a("tr",{key:t},[a("td",{attrs:{align:"center"}},[a("b",[e._v(e._s(s+1))])]),a("td",{attrs:{align:"center"}},[e._v(e._s(t))])])}))],2):e._e()]),a("hr"),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"grey--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{staticClass:"green--text darken-1",attrs:{flat:"flat",disabled:e.timestamps.length!==e.bandCount},nativeOn:{click:function(t){return e.execute()}}},[e._v("Apply")])],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},_n=[],hn={name:"admin-upload-generate-timestamps",props:["specification"],components:{Multiselect:P.a},data:function(){return{dialog:!1,setError:!1,setErrorMessage:void 0,bandCount:0,modes:[{id:"month",title:"sequence of months"},{id:"year",title:"sequence of years"}],mode:{id:"month",title:"sequence of months"},first_year:"2001",first_month:"12",inputError:void 0}},methods:{refresh:function(){this.bandCount=this.specification.bands.length},execute:function(){this.$emit("timestamp-sequence",this.timestamps),this.dialog=!1},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+JSON.stringify(e.response.data)}},computed:{timestamps:function(){var e=this;e.inputError="unknown error";var t=[],a=parseInt(this.first_year);if("year"===this.mode.id)if(a>=1e3&&a<=9999){a+=0;for(var s=0;s<this.bandCount;s++)t.push(a),a++;e.inputError=void 0}else e.inputError="not valid input";else if("month"===this.mode.id){var r=parseInt(this.first_month);if(a>=1e3&&a<=9999&&r>=1&&r<=12){a+=0,r+=0;for(var i=0;i<this.bandCount;i++){var n=r<=9?"0"+r:r,o=a+"-"+n;t.push(o),12==r?(a++,r=1):r++}e.inputError=void 0}else e.inputError="not valid input"}return t}},watch:{specification:function(){this.refresh()},dialog:function(){this.dialog&&this.refresh()}},mounted:function(){this.refresh()}},bn=hn,gn=(a("5b47"),Object(p["a"])(bn,fn,_n,!1,null,"39570e7c",null)),yn=gn.exports;function xn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function wn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(a),!0).forEach((function(t){kn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function kn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function En(e){return e.slice().sort((function(e,t){return e-t})).filter((function(e,t,a){return!t||e!=a[t-1]}))}s["default"].use(Ca.a);var On={name:"admin-upload",props:[],components:{PulseLoader:ft["a"],Multiselect:P.a,"admin-upload-generate-timestamps":yn},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,options:{target:this.$store.getters.apiUrl("api/upload"),testChunks:!1,chunkSize:10485760,simultaneousUploads:1},uploadState:"init",inspectState:"init",inspectFilename:void 0,guessTimestamp:!0,importStrategies:[{id:"create",title:"create new layer"},{id:"existing_add",title:"insert into existing layer with new (added) bands"},{id:"existing_merge",title:"insert into existing layer and (preferably) into exisiting bands"}],importStrategy:{},importModes:[{id:"simple",title:"simple (file represents one point in time)"},{id:"timeseries",title:"timeseries (bands of file represent multiple points in time)"}],importMode:{},existingRasterdb:{},specification:void 0,proj4Compare:void 0,proj4CompareError:void 0,createdTags:[],createdAclRoles:[],importState:"init",importResult:void 0,importErrorStatus:void 0,importErrorStatusText:void 0,importErrorStatusMessage:void 0,presetBands:[],presetTimestamp:void 0,remote_task:void 0}},methods:{createTag:function(e){this.createdTags.push(e),this.specification.tags.push(e)},createAclRole:function(e){this.createdAclRoles.push(e),this.specification.acl.push(e)},createAclModRole:function(e){this.createdAclRoles.push(e),this.specification.acl_mod.push(e)},addnotification:function(e){var t=this.notificationsIndex++;return s["default"].set(this.notifications,t,e),t},removeNotification:function(e){s["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return s["default"].set(this.messages,t,e),t},removeMessage:function(e){s["default"].delete(this.messages,e)},cancel_upload:function(){this.uploadState="init",this.inspectState="init",this.inspectFilename=void 0,this.specification=void 0,this.proj4Compare=void 0,this.proj4CompareError=void 0,this.importState="init",this.importResult=void 0},inspect:function(){var e=this;this.importState="init",this.remote_task=void 0,e.inspectState="inspecting",e.specification=void 0;var t={filename:this.inspectFilename,strategy:this.importStrategy.id};"existing_add"!=this.importStrategy.id&&"existing_merge"!=this.importStrategy.id||(t.rasterdb=this.existingRasterdb.name),this.guessTimestamp&&(t.guess_timestamp=!0),I.a.get(this.urlPrefix+"../../api/inspect",{params:t}).then((function(t){e.inspectState="done",e.specification=t.data.specification,e.presetBands=JSON.parse(JSON.stringify(e.specification.bands)),e.setPresetBands(),e.presetTimestamp=e.specification.timestamp})).catch((function(t){e.inspectState="error",e.addnotification("ERROR "+t)}))},start_import:function(){var e=this;this.remote_task=void 0;var t=this.$store.getters.apiUrl("api/import");e.importState="importing",I.a.post(t,{specification:e.specification}).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.query_remote_task()})).catch((function(t){e.importState="error",e.importErrorStatus="unknown",e.importErrorStatusText="unknown",e.importErrorStatusMessage="unknown",void 0!==t.response?(void 0!==t.response.status&&(e.importErrorStatus=t.response.status),void 0!==t.response.statusText&&(e.importErrorStatusText=t.response.statusText),void 0!==t.response.data&&(e.importErrorStatusMessage=t.response.data)):e.importErrorStatusMessage=e.errorToText(t),console.log("1------"),console.log(JSON.stringify(t)),console.log("2------"),console.log(e.errorToText(t)),console.log("3------"),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.refreshAfterImport()}))},refreshAfterImport:function(){this.$store.dispatch("layer_tags/refresh"),this.$store.dispatch("acl_roles/refresh"),this.$store.dispatch("rasterdbs/refresh")},isNaturalNumber:function(e){e=e.toString();var t=Math.abs(e),a=parseInt(e,10);return!isNaN(t)&&a===t&&t.toString()===e},setBand:function(e){var t=this.existing_bands_map[this.specification.bands[e].rasterdb_band_index];this.specification.bands[e].rastedb_band_data_type=t.type,this.specification.bands[e].band_name=t.name,this.specification.bands[e].wavelength=t.wavelength,this.specification.bands[e].fwhm=t.fwhm,this.specification.bands[e].visualisation=t.visualisation},clearBand:function(e){this.specification.bands[e].rastedb_band_data_type=this.presetBands[e].rastedb_band_data_type,this.specification.bands[e].band_name=this.presetBands[e].band_name,this.specification.bands[e].wavelength=this.presetBands[e].wavelength,this.specification.bands[e].fwhm=this.presetBands[e].fwhm,this.specification.bands[e].visualisation=this.presetBands[e].visualisation},setPresetBands:function(){console.log(this.specification),console.log(this.specification.bands);var e=this.specification.bands.length;if(!(e<1))if("simple"===this.importMode.id)for(var t=0;t<e;t++)this.specification.bands[t].rasterdb_band_index=this.presetBands[t].rasterdb_band_index,this.specification.bands[t].rastedb_band_data_type=this.presetBands[t].rastedb_band_data_type,this.specification.bands[t].band_name=this.presetBands[t].band_name,this.specification.bands[t].wavelength=this.presetBands[t].wavelength,this.specification.bands[t].fwhm=this.presetBands[t].fwhm,this.specification.bands[t].visualisation=this.presetBands[t].visualisation,this.specification.bands[t].no_data_value=this.presetBands[t].no_data_value,this.specification.bands[t].visualisation=this.presetBands[t].visualisation;else if("timeseries"===this.importMode.id)for(t=0;t<e;t++)this.specification.bands[t].rasterdb_band_index=this.presetBands[0].rasterdb_band_index,this.specification.bands[t].rastedb_band_data_type=this.presetBands[0].rastedb_band_data_type,this.specification.bands[t].band_name=this.presetBands[0].band_name,this.specification.bands[t].wavelength=this.presetBands[0].wavelength,this.specification.bands[t].fwhm=this.presetBands[0].fwhm,this.specification.bands[t].visualisation=this.presetBands[0].visualisation,this.specification.bands[t].no_data_value=this.presetBands[0].no_data_value,this.specification.bands[t].visualisation=this.presetBands[0].visualisation;else console.log("error")},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},query_remote_task:function(){var e=this;I.a.get(this.urlPrefix+"../../api/remote_tasks/"+this.remote_task.id).then((function(t){console.log(t.data.remote_task),e.remote_task=t.data.remote_task,e.remote_task.active?window.setTimeout((function(){e.query_remote_task()}),1e3):("DONE"===e.remote_task.status?e.importState="done":e.importState="error",console.log(t),e.refreshAfterImport())})).catch((function(t){e.importState="error",e.importErrorStatus="unknown",e.importErrorStatusText="unknown",e.importErrorStatusMessage="unknown",void 0!==t.response?(void 0!==t.response.status&&(e.importErrorStatus=t.response.status),void 0!==t.response.statusText&&(e.importErrorStatusText=t.response.statusText),void 0!==t.response.data&&(e.importErrorStatusMessage=t.response.data)):e.importErrorStatusMessage=e.errorToText(t),console.log("1------"),console.log(JSON.stringify(t)),console.log("2------"),console.log(e.errorToText(t)),console.log("3------"),e.setError=!0,e.setErrorMessage="Error setting property: "+e.errorToText(t),console.log(t),e.refreshAfterImport()}))},updateAddBands:function(){var e=this;if("simple"!==this.importMode.id){void 0===this.specification.addBands&&(this.specification.addBands=[]),this.specification.addBands=this.specification.addBands.filter((function(t){return e.selectedRasterDbBandIndicesUnique.includes(t.rasterdb_band_index)}));var t=e.selectedRasterDbBandIndicesUnique.filter((function(t){for(var a=0;a<e.specification.addBands.length;a++)if(t===e.specification.addBands[a].rasterdb_band_index)return!1;return!0}));console.log("toAddIndices"),console.log(t);var a=t.map((function(t){for(var a={},s=0;s<e.specification.bands.length;s++)if(e.specification.bands[s].rasterdb_band_index===t){console.log("found!"),a=e.specification.bands[s];break}return{rasterdb_band_index:t,band_name:a.band_name,fwhm:a.fwhm,rastedb_band_data_type:a.rastedb_band_data_type,visualisation:a.visualisation,wavelength:a.wavelength}}));this.specification.addBands=this.specification.addBands.concat(a)}else void 0!==this.specification&&(this.specification.addBands=void 0)},fillTimestamps:function(e){for(var t=0;t<e.length;t++)console.log("set"+e[t]),this.specification.bands[t].timestamp=e[t]}},computed:wn({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{validEPSG:function(){return void 0!==this.specification&&void 0!==this.specification.geo_code&&this.specification.geo_code.startsWith("EPSG:")},epsg:function(){return this.validEPSG?this.specification.geo_code.substr(5):void 0},proj4CompareOK:function(){return this.specification.proj4===this.proj4Compare},layer_tags:function(){return void 0===this.$store.state.layer_tags.data?this.createdTags:this.$store.state.layer_tags.data.concat(this.createdTags)},acl_roles:function(){return void 0===this.$store.state.acl_roles.data?this.createdAclRoles:this.$store.state.acl_roles.data.concat(this.createdAclRoles)},rasterdbs:function(){return void 0===this.$store.state.rasterdbs.data?[]:this.$store.state.rasterdbs.data},existingID:function(){return void 0!==this.specification&&void 0!==this.specification.id&&void 0!==this.rasterdbs&&this.rasterdbs.some((function(e){return e.name===this.specification.id}),this)},create:function(){return"create"===this.importStrategy.id},existing_bands_map:function(){return void 0===this.specification.existing_bands?{}:this.specification.existing_bands.reduce((function(e,t){return e[t.index]=t,e}),{})},selectedRasterDbBandIndices:function(){return void 0===this.specification?[]:this.specification.bands.map((function(e){return e.rasterdb_band_index}))},selectedRasterDbBandIndicesUnique:function(){return En(this.selectedRasterDbBandIndices)},identity:function(){return this.$store.state.identity.data}}),watch:{epsg:function(){var e=this;this.proj4Compare=void 0,this.proj4CompareError=void 0,void 0!==this.epsg&&I.a.get("https://epsg.io/"+this.epsg+".proj4").then((function(t){e.proj4Compare=t.data})).catch((function(t){console.log(t),e.proj4CompareError=JSON.stringify(t)}))},importStrategy:function(){this.inspectState="init",this.specification=void 0},existingRasterdb:function(){this.inspectState="init",this.specification=void 0},selectedRasterDbBandIndices:function(e,t){console.log(t),console.log(e);for(var a=e.length,s=0;s<a;s++)if(this.isNaturalNumber(e[s])){if(e[s]!==t[s]){var r=this.existing_bands_map[e[s]];if(void 0!==r)this.setBand(s);else{var i=this.existing_bands_map[t[s]];void 0!==i&&this.clearBand(s)}}}else void 0!==this.existing_bands_map[t[s]]&&this.clearBand(s)},remote_task:function(){},importMode:function(){var e=this;if(void 0!==this.specification)if(this.setPresetBands(),"simple"===this.importMode.id){e.specification.timestamp=e.presetTimestamp;for(var t=0;t<this.specification.bands.length;t++)this.specification.bands[t].timestamp=void 0}else"timeseries"===this.importMode.id&&(e.specification.timestamp=void 0);this.updateAddBands()},selectedRasterDbBandIndicesUnique:function(){this.updateAddBands()}},mounted:function(){this.$store.dispatch("layer_tags/init"),this.$store.dispatch("acl_roles/init"),this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("identity/init"),this.importStrategy=this.importStrategies[0],this.importMode=this.importModes[0];var e=this;window.injectFile=function(t){e.inspectFilename=t}}},Sn=On,Pn=(a("0ea1"),Object(p["a"])(Sn,mn,pn,!1,null,"09193cd9",null)),Tn=Pn.exports,Cn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("div",{staticClass:"innergrid-item-main"},[a("v-layout",[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",[a("h3",{staticClass:"headline mb-0"},[e._v("Accounts "),a("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"reload accounts from source and refresh view"},on:{click:function(t){return e.refresh()}}},[a("v-icon",[e._v("refresh")])],1)],1),a("v-divider"),void 0!=e.accounts?a("v-data-table",{attrs:{headers:e.headers,items:e.accounts,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{class:{admin:e.accountIsAdmin(t.item),empty:0==t.item.roles.length}},[a("span",{staticClass:"user-list"},[e._v(e._s(t.item.name))])]),a("td",[e._l(t.item.roles,(function(t){return a("span",{key:t},[a("span",{staticClass:"role-list"},[e._v(e._s(t))])])})),0===t.item.roles.length?a("span",{staticStyle:{color:"grey"}},[e._v("(none)")]):e._e()],2)]}}],null,!1,3914727857)}):e._e(),a("v-divider"),a("v-divider"),a("br"),a("h3",{staticClass:"headline mb-0"},[e._v("Roles")]),a("v-divider"),void 0!=e.acl_roles?a("v-data-table",{attrs:{headers:e.roles_headers,items:e.roles,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("span",{staticClass:"role-list"},[e._v(e._s(t.item.role))])]),a("td",e._l(t.item.users,(function(t){return a("span",{key:t},[a("span",{staticClass:"user-list"},[e._v(e._s(t))])])})),0)]}}],null,!1,1823264137)}):e._e(),a("v-divider")],1)],1)],1),a("v-snackbar",{attrs:{top:!0},model:{value:e.accountsError,callback:function(t){e.accountsError=t},expression:"accountsError"}},[e._v(" "+e._s(e.accountsErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.accountsError=!1}}},[e._v("Close")])],1)],1)])},jn=[];function Mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function $n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(a),!0).forEach((function(t){Rn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Rn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var An={name:"admin-overview",data:function(){return{accounts:void 0,accountsError:!1,accountsErrorMessage:void 0,headers:[{text:"user",value:"name"},{text:"roles",value:"roles"}],roles_headers:[{text:"role",value:"role"},{text:"users",value:"users"}]}},methods:{refresh:function(){var e=this;I.a.get(this.urlPrefix+"../../api/accounts").then((function(t){e.accounts=t.data.accounts})).catch((function(t){console.log(t),e.accountsError=!0,e.accountsErrorMessage="ERROR getting accounts: "+t}))},accountIsAdmin:function(e){return e.roles.indexOf("admin")>=0}},computed:$n({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{acl_roles:function(){return this.$store.state.acl_roles.data},roles:function(){var e=this;if(void 0!==this.acl_roles){var t=this.acl_roles.map((function(t){var a=[];return void 0!==e.accounts&&(a=e.accounts.filter((function(e){return e.roles.some((function(e){return e===t}))})).map((function(e){return e.name}))),{role:t,users:a}}));return t}}}),mounted:function(){this.$store.dispatch("acl_roles/init"),this.refresh()}},Dn=An,Nn=(a("3d2b"),a("607d"),Object(p["a"])(Dn,Cn,jn,!1,null,"144cdf30",null)),zn=Nn.exports,Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tools-grid-container"},[a("v-tabs",{staticClass:"sub-tab-bar",attrs:{color:"grey lighten-1","slider-color":"yellow","show-arrows":""}},[a("v-tab",{attrs:{to:"/tools/info"}},[a("v-icon",[e._v("view_compact")]),e._v(" Info")],1),a("v-tab",{attrs:{to:"/tools/status"}},[a("v-icon",[e._v("schedule")]),e._v(" Status")],1),a("v-tab",{attrs:{to:"/tools/task"}},[a("v-icon",[e._v("card_travel")]),e._v(" Task")],1),e.isAdmin?a("v-tab",{attrs:{to:"/tools/accounts"}},[a("v-icon",[e._v("contact_mail")]),e._v(" Accounts")],1):e._e(),a("v-tab",{attrs:{to:"/tools/vectorviewer"}},[a("v-icon",[e._v("map")]),e._v(" vectorviewer")],1)],1),a("router-view",{staticClass:"tools-grid-item-content"})],1)},In=[];function Fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Bn(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(a),!0).forEach((function(t){Vn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Vn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Gn={name:"admin-tools",components:{},data:function(){return{}},methods:{},computed:Bn({},Object(c["b"])({isAdmin:"identity/isAdmin"})),mounted:function(){}},qn=Gn,Un=(a("2e8a"),Object(p["a"])(qn,Ln,In,!1,null,"089e948c",null)),Wn=Un.exports,Jn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("div",{staticClass:"innergrid-item-main"},[a("v-layout",[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-card",[a("h3",{staticClass:"headline mb-0"},[e._v("Remote Sensing Database Administration "),a("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refresh()}}},[a("v-icon",[e._v("refresh")])],1)],1),a("v-divider"),void 0!=e.identity?a("v-card-title",[a("div",[a("div",[a("b",[e._v("identity")]),e._v(": "+e._s(e.identity.user))]),a("div",[a("b",[e._v("roles")]),e._v(": "+e._s(e.identity.roles.join(", ")))]),a("div",[a("b",[e._v("connection")]),e._v(": "+e._s(e.identity.secure?"secure":"plain"))]),a("div",[a("b",[e._v("ip")]),e._v(": "+e._s(e.identity.ip))]),a("div",[a("b",[e._v("authentication")]),e._v(": "+e._s(e.identity.auth_method))]),void 0===e.identity||"DIGEST"!==e.identity.auth_method&&"BASIC"!==e.identity.auth_method?e._e():a("div",[a("br"),a("a",{attrs:{href:e.logout_url}},[a("v-icon",[e._v("call_end")]),e._v(" logout")],1),"DIGEST"===e.identity.auth_method?a("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(HTTP "+e._s(e.identity.auth_method)+" authentication)")]):e._e(),"BASIC"===e.identity.auth_method?a("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(HTTPS "+e._s(e.identity.auth_method)+" authentication)")]):e._e()]),void 0!==e.identity&&"jws"===e.identity.auth_method?a("div",[a("br"),a("a",{attrs:{href:e.logout_jws_url}},[a("v-icon",[e._v("call_end")]),e._v(" logout")],1),e._v(" "),a("span",{staticStyle:{"font-size":"0.8em"}},[e._v("(JWS authentication)")])]):e._e()])]):e._e()],1)],1)],1),"init"===e.identityMode||"load"===e.identityMode?a("div",[a("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e(),"error"===e.identityMode?a("div",[a("v-icon",[e._v("error")]),e._v(" "+e._s(e.identityMessage)+" ")],1):e._e()],1)])},Hn=[],Yn={name:"admin-tools-info",components:{RingLoader:T["a"]},data:function(){return{}},methods:{refresh:function(){this.$store.dispatch("identity/refresh")}},computed:{identity:function(){return this.$store.state.identity.data},identityMode:function(){return this.$store.state.identity.mode},identityMessage:function(){return this.$store.state.identity.message},logout_url:function(){var e=window.location.protocol+"//";e+="logout:logout@",e+=window.location.host;var t=window.location.pathname;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e+=t,e},http_url:function(){var e=this.identity.http_port,t=window.location.host,a=t.indexOf(":");return a>=0&&(t=t.slice(0,a)),t=t+":"+e,"http://"+t+window.location.pathname},https_url:function(){var e=this.identity.https_port,t=window.location.host,a=t.indexOf(":");return a>=0&&(t=t.slice(0,a)),t=t+":"+e,"https://"+t+window.location.pathname},jws_url:function(){var e=this.identity.jws_protocol,t=this.identity.jws_port,a=window.location.host,s=a.indexOf(":");return s>=0&&(a=a.slice(0,s)),a=a+":"+t,e+"//"+a+window.location.pathname},logout_jws_url:function(){var e=window.location.protocol,t=window.location.host,a=window.location.pathname,s="?jws=logout";return e+"//"+t+a+s}},mounted:function(){this.refresh()}},Kn=Yn,Qn=(a("fcb8"),Object(p["a"])(Kn,Jn,Hn,!1,null,"90ec81e0",null)),Zn=Qn.exports,Xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("div",{staticClass:"innergrid-item-main"},[a("v-btn",{staticStyle:{display:"inline-block"},attrs:{disabled:e.autoRefresh,flat:"",icon:"",color:"green",title:"refresh status"},on:{click:function(t){return e.refresh()}}},[a("v-icon",[e._v("refresh")])],1),a("v-switch",{staticStyle:{display:"inline-block"},attrs:{label:"auto refresh"},model:{value:e.autoRefresh,callback:function(t){e.autoRefresh=t},expression:"autoRefresh"}}),a("table",{staticClass:"table-status"},[e._m(0),a("tbody",e._l(e.data,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(t.id))]),a("td",[e._v(e._s(t.name))]),a("td",["READY"===t.status?a("v-icon",{attrs:{color:"yellow"}},[e._v("directions_walk")]):e._e(),"RUNNING"===t.status?a("v-icon",{attrs:{color:"black"}},[e._v("directions_run")]):e._e(),"DONE"===t.status?a("v-icon",{attrs:{color:"green"}},[e._v("done")]):e._e(),"ERROR"===t.status?a("v-icon",{attrs:{color:"red"}},[e._v("error")]):e._e(),e._v(" "+e._s(t.status)+" ")],1),a("td",[e._v(e._s(t.message))]),a("td",[e._v(e._s((t.runtime/1e3).toFixed(3))+"s")]),"READY"!==t.status&&"RUNNING"!==t.status||t.canceled||!t.cancelable?e._e():a("td",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.cancel(t.id)}}},[a("v-icon",[e._v("cancel")])],1)],1),t.canceled||t.cancelable?e._e():a("td",[e._v("---")]),t.canceled?a("td",[e._v("cancel requested")]):e._e()])})),0)]),a("transition",{attrs:{name:"fade"}},["init"===e.mode||"load"===e.mode?a("div",[a("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e()]),"error"===e.mode?a("div",[a("v-icon",[e._v("error")]),e._v(" "+e._s(e.message)+" ")],1):e._e()],1)])},eo=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("ID")]),a("th",[e._v("Name")]),a("th",[e._v("Status")]),a("th",[e._v("Message")]),a("th",[e._v("Runtime")]),a("th",[e._v("Cancel")])])])}];function to(e,t,a,s,r,i,n){try{var o=e[i](n),c=o.value}catch(l){return void a(l)}o.done?t(c):Promise.resolve(c).then(s,r)}function ao(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var i=e.apply(t,a);function n(e){to(i,s,r,n,o,"next",e)}function o(e){to(i,s,r,n,o,"throw",e)}n(void 0)}))}}var so={name:"admin-tools-status",components:{RingLoader:T["a"]},data:function(){return{data:void 0,mode:"init",message:"",messageActive:!1,autoRefresh:!1,autoRefreshTimer:void 0}},methods:{refresh:function(){var e=this;this.mode="load";var t=this.$store.getters.apiUrl("api/remote_tasks");I.a.get(t).then((function(t){e.data=t.data.remote_tasks,e.mode="ready"})).catch((function(t){e.mode="error",e.message=e.interpretError(t),e.messageActive=!0}))},interpretError:function(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e},cancel:function(e){var t=this;return ao(Je.a.mark((function a(){var s;return Je.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,console.log(e),s=t.$store.getters.apiUrl("api/remote_tasks/"+e+"/cancel"),a.next=5,I.a.post(s);case 5:t.refresh(),a.next=13;break;case 8:a.prev=8,a.t0=a["catch"](0),t.mode="error",t.message=t.interpretError(a.t0),t.messageActive=!0;case 13:return a.prev=13,a.finish(13);case 15:case"end":return a.stop()}}),a,null,[[0,8,13,15]])})))()},updateAutoRefresh:function(){var e=this;void 0!==this.autoRefreshTimer&&(window.clearInterval(this.autoRefreshTimer),this.autoRefreshTimer=void 0),this.autoRefresh&&(this.autoRefreshTimer=window.setInterval((function(){e.refresh()}),1e3))}},computed:{},watch:{autoRefresh:function(){this.updateAutoRefresh()}},mounted:function(){this.refresh(),this.updateAutoRefresh()}},ro=so,io=(a("1dd8"),Object(p["a"])(ro,Xn,eo,!1,null,"e4b16ade",null)),no=io.exports,oo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("div",{staticClass:"innergrid-item-main"},[e._m(0),void 0!==e.data?a("multiselect",{staticStyle:{display:"inline-block","max-width":"200px"},attrs:{options:e.data,"track-by":"category",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select category"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(e.categoryToTitle(t.option.category)))]}},{key:"option",fn:function(t){return[e._v(e._s(e.categoryToTitle(t.option.category)))]}}],null,!1,2563334390),model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}}):e._e(),e._m(1),void 0!==e.selectedCategory?a("multiselect",{staticStyle:{display:"inline-block","max-width":"300px"},attrs:{options:e.selectedCategory.remote_task_entries,"track-by":"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select task"},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(t.option.name))]}},{key:"option",fn:function(t){return[e._v(e._s(t.option.name))]}}],null,!1,1766883606),model:{value:e.selectedRemoteTaskEntry,callback:function(t){e.selectedRemoteTaskEntry=t},expression:"selectedRemoteTaskEntry"}}):e._e(),a("v-btn",{attrs:{flat:"",icon:"",color:"green",title:"refresh layers"},on:{click:function(t){return e.refreshLayers()}}},[a("v-icon",[e._v("refresh")])],1),void 0!==e.selectedRemoteTaskEntry?a("div",[void 0!==e.selectedRemoteTaskEntry.description?a("div",[a("br"),a("b",[e._v("Description: ")]),e._v(e._s(e.selectedRemoteTaskEntry.description)+" ")]):e._e(),a("div",[a("br"),a("div",[a("hr"),a("b",[e._v("Task Parameters")]),a("table",[e._m(2),e._l(e.selectedRemoteTaskEntry.params,(function(t){return a("tr",{key:t.name},[a("td",{class:[t.required?"param-required":"param-optional",!t.required||void 0!==t.value&&""!==t.value?"":"param-required-missing"]},[e._v(e._s(t.name)+e._s(t.required?"*":""))]),"rasterdb"===t.type?a("td",[a("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.rasterdbs,searchable:!0,"show-labels":!1,placeholder:"pick a rasterdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"param.value"}})],1):"pointdb"===t.type?a("td",[a("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.pointdbs,searchable:!0,"show-labels":!1,placeholder:"pick a pointdb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"param.value"}})],1):"pointcloud"===t.type?a("td",[a("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.pointclouds,searchable:!0,"show-labels":!1,placeholder:"pick a pointcloud",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"param.value"}})],1):"vectordb"===t.type?a("td",[a("multiselect",{staticStyle:{"min-width":"600px"},attrs:{options:e.vectordbs,searchable:!0,"show-labels":!1,placeholder:"pick a vectordb",allowEmpty:!1},scopedSlots:e._u([{key:"singleLabel",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}},{key:"option",fn:function(t){var a=t.option;return[e._v(" "+e._s(a)+" ")]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"param.value"}})],1):"string"===t.type||"layer_id"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[!t.required||void 0!==t.value&&""!==t.value?"":"param-required-missing"],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"string_array"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isStringArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"number"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumber(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"number_array"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumberArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"number_rect"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isNumberRect(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"integer"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isInteger(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"integer_array"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isIntegerArray(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):"boolean"===t.type?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],class:[e.isParamRequiredOrNotEmpty(t)&&!e.isBoolean(t.value)?"param-required-missing":""],attrs:{placeholder:"(empty)"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):a("td",[e._v("["+e._s(t.type)+"] unknown parameter type")]),a("td",{staticClass:"param-desc"},[e._v(e._s(t.desc))]),a("td",{staticClass:"param-format"},[e._v(e._s(t.format))]),void 0!==t.example&&""!==t.example?a("td",{staticClass:"param-example"},[e._v(e._s(t.example))]):e._e()])}))],2),e._m(3),a("hr")]),a("br"),a("b",[e._v("resulting task")]),a("div",{staticStyle:{"background-color":"white"}},[e._v(" "+e._s(e.taskJSON)+" ")])]),a("br"),a("div",[a("v-btn",{attrs:{disabled:!e.isValidTask},on:{click:e.submit_task}},[a("v-icon",[e._v("input")]),e._v(" submit")],1),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.isValidTask,expression:"!isValidTask"}],staticStyle:{color:"#ff3f01e6"}},[e._v("some missing required parameters")])],1)]):e._e(),"init"===e.mode||"load"===e.mode?a("div",[a("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"20px"}}),e._v(" loading... ")],1):e._e(),"error"===e.mode?a("div",[a("v-icon",[e._v("error")]),e._v(" "+e._s(e.message)+" ")],1):e._e()],1),a("admin-task-console",{attrs:{id:e.remote_task_id}}),a("v-snackbar",{attrs:{top:!0},model:{value:e.setError,callback:function(t){e.setError=t},expression:"setError"}},[e._v(" "+e._s(e.setErrorMessage)+" "),a("v-btn",{staticClass:"pink--text",attrs:{flat:""},nativeOn:{click:function(t){e.setError=!1}}},[e._v("Close")])],1)],1)},co=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("b",[e._v("Category")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("b",[e._v("Task")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("th",[e._v("Parameter")]),a("th",[e._v("Value")]),a("th",[e._v("Description")]),a("th",[e._v("Format")]),a("th",[e._v("Example")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticStyle:{"font-size":"0.8em",color:"#6c6c6c"}},[a("br"),a("b",[e._v("*")]),e._v(" marked parameters are required. Red marked parameter values are not valid.")])}],lo={name:"admin-tools-task",components:{RingLoader:T["a"],Multiselect:P.a,"admin-task-console":at},data:function(){return{data:void 0,mode:"init",message:"",messageActive:!1,selectedCategory:void 0,selectedRemoteTaskEntry:void 0,remote_task_id:void 0,setError:!1,setErrorMessage:void 0}},methods:{refresh:function(){var e=this;this.mode="load";var t=this.$store.getters.apiUrl("api/remote_task_entries");I.a.get(t).then((function(t){e.data=t.data.remote_task_categories,e.mode="ready"})).catch((function(t){e.mode="error",e.message=e.interpretError(t),e.messageActive=!0})),this.$store.dispatch("rasterdbs/init"),this.$store.dispatch("pointdbs/init"),this.$store.dispatch("pointclouds/init"),this.$store.dispatch("vectordbs/init")},interpretError:function(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e},categoryToTitle:function(e){switch(e){case"task_rasterdb":return"RasterDB";case"task_pointdb":return"PointDB";case"task_pointcloud":return"PointCloud";case"task_vectordb":return"VectorDB";default:return e}},submit_task:function(){var e=this;e.remote_task_id=void 0;var t=this.$store.getters.apiUrl("api/remote_tasks");I.a.post(t,{remote_task:e.taskJSON}).then((function(t){console.log(t);var a=t.data.remote_task;e.remote_task_id=a.id})).catch((function(t){console.log(t),console.log(e.errorToText(t)),e.setError=!0,e.setErrorMessage="Error: "+e.errorToText(t),console.log(t)}))},errorToText:function(e){return void 0===e?"unknown error":void 0===e.message?e:void 0===e.response||void 0===e.response.data?e.message:e.message+" - "+e.response.data},isParamRequiredOrNotEmpty:function(e){return e.required||!this.isEmpty(e.value)},isEmpty:function(e){return void 0===e||""===e.trim()},isNumber:function(e){return void 0!==e&&""!==e&&!isNaN(e)},isInteger:function(e){return void 0!==e&&""!==e&&!isNaN(e)&&Number.isInteger(+e)},isBoolean:function(e){return"true"===e||"false"==e},isStringArray:function(e){return this.parseStringArray(e).length>0},isNumberArray:function(e){return this.parseNumberArray(e).length>0},isNumberRect:function(e){return 4===this.parseNumberArray(e).length},parseNumber:function(e){return+e},parseInteger:function(e){return Number.parseInt(e)},isIntegerArray:function(e){return this.parseIntegerArray(e).length>0},parseBoolean:function(e){return"true"===e||"false"!=e&&void 0},parseStringArray:function(e){return void 0===e||""===e?[]:e.split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e}))},parseNumberArray:function(e){var t=this,a=this.parseStringArray(e);return a.every((function(e){return t.isNumber(e)}))?a.map((function(e){return t.parseNumber(e)})):[]},parseNumberRect:function(e){return this.parseNumberArray(e)},parseIntegerArray:function(e){var t=this,a=this.parseStringArray(e);return a.every((function(e){return t.isInteger(e)}))?a.map((function(e){return t.parseInteger(e)})):[]},refreshLayers:function(){this.$store.dispatch("rasterdbs/refresh"),this.$store.dispatch("pointdbs/refresh"),this.$store.dispatch("pointclouds/refresh"),this.$store.dispatch("vectordbs/refresh"),this.$store.dispatch("poi_groups/refresh"),this.$store.dispatch("roi_groups/refresh"),this.$store.dispatch("layer_tags/refresh")}},computed:{taskJSON:function(){var e=this;if(void 0!==this.selectedCategory&&void 0!==this.selectedRemoteTaskEntry){var t={};return t[this.selectedCategory.category]=this.selectedRemoteTaskEntry.name,this.selectedRemoteTaskEntry.params.forEach((function(a){if(!e.isEmpty(a.value))switch(a.type){case"string_array":e.isStringArray(a.value)&&(t[a.name]=e.parseStringArray(a.value));break;case"number":e.isNumber(a.value)&&(t[a.name]=e.parseNumber(a.value));break;case"number_array":e.isNumberArray(a.value)&&(t[a.name]=e.parseNumberArray(a.value));break;case"number_rect":e.isNumberRect(a.value)&&(t[a.name]=e.parseNumberRect(a.value));break;case"integer":e.isInteger(a.value)&&(t[a.name]=e.parseInteger(a.value));break;case"integer_array":e.isIntegerArray(a.value)&&(t[a.name]=e.parseIntegerArray(a.value));break;case"boolean":e.isBoolean(a.value)&&(t[a.name]=e.parseBoolean(a.value));break;default:t[a.name]=a.value}})),t}},isValidTask:function(){var e=this;return this.selectedRemoteTaskEntry.params.filter((function(e){return e.required})).every((function(t){return void 0!==e.taskJSON[t.name]}))},rasterdbs:function(){if(void 0===this.$store.state.rasterdbs.data)return[];var e=this.$store.state.rasterdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},pointdbs:function(){if(void 0===this.$store.state.pointdbs.data)return[];var e=this.$store.state.pointdbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},pointclouds:function(){if(void 0===this.$store.state.pointclouds.data)return[];var e=this.$store.state.pointclouds.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))},vectordbs:function(){if(void 0===this.$store.state.vectordbs.data)return[];var e=this.$store.state.vectordbs.data.map((function(e){return e.name}));return void 0===e?[]:e.slice().sort((function(e,t){return e.localeCompare(t)}))}},watch:{data:function(){void 0===this.selectedCategory&&void 0!==this.data&&this.data.length>0&&(this.selectedCategory=this.data[0])},selectedCategory:function(){void 0!==this.selectedCategory&&this.selectedCategory.remote_task_entries.length>0?this.selectedRemoteTaskEntry=this.selectedCategory.remote_task_entries[0]:this.selectedRemoteTaskEntry=void 0}},mounted:function(){this.refresh()}},uo=lo,vo=(a("30db"),Object(p["a"])(uo,oo,co,!1,null,"e6c26e9c",null)),mo=vo.exports,po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"innergrid-container"},[a("iframe",{staticClass:"innergrid-item-main",attrs:{src:e.urlPrefix+"../../files/",frameborder:"0"}})])},fo=[],_o={name:"admin-files",data:function(){return{}},methods:{refresh:function(){}},computed:{urlPrefix:function(){return this.$store.state.identity.urlPrefix}},mounted:function(){this.refresh()}},ho=_o,bo=(a("9883"),Object(p["a"])(ho,po,fo,!1,null,"62e595ea",null)),go=bo.exports,yo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"main"},[a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"olmap-vectorviewer"}}),a("div",{staticClass:"innergrid-container",class:[e.filter_focus?"innergrid-item-nav-fill":"innergrid-item-nav-compact"]},[a("v-list",{staticClass:"innergrid-item-nav"},[a("v-list-tile",[void 0!==e.vectordbs?a("multiselect",{attrs:{options:e.vectordbs,"track-by":"name",allowEmpty:!1,searchable:!1,"show-labels":!1,placeholder:"select vectordb"},on:{open:function(t){e.filter_focus=!0},close:function(t){e.filter_focus=!1}},scopedSlots:e._u([{key:"singleLabel",fn:function(t){return[e._v(e._s(void 0===t.option.title?t.option.name:t.option.title))]}},{key:"option",fn:function(t){return[e._v(e._s(void 0===t.option.title?t.option.name:t.option.title))]}}],null,!1,133643734),model:{value:e.selectedVectordb,callback:function(t){e.selectedVectordb=t},expression:"selectedVectordb"}}):e._e()],1),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?a("v-list-tile",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showLabels,expression:"showLabels"}],attrs:{type:"checkbox",id:"labels"},domProps:{checked:Array.isArray(e.showLabels)?e._i(e.showLabels,null)>-1:e.showLabels},on:{change:function(t){var a=e.showLabels,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.showLabels=a.concat([i])):n>-1&&(e.showLabels=a.slice(0,n).concat(a.slice(n+1)))}else e.showLabels=r}}}),a("label",{attrs:{for:"labels"}},[e._v("Show Labels")])]):e._e(),void 0!==e.selectedVectordb&&null!==e.selectedVectordb?a("a",{attrs:{href:e.urlPrefix+"../../vectordbs/"+e.selectedVectordb.name+"/package.zip",download:e.selectedVectordb.name+".zip",title:"download as ZIP-file"}},[a("v-icon",{attrs:{color:"blue"}},[e._v("cloud_download")]),e._v("(download vector layer)")],1):e._e()],1)],1),a("v-dialog",{attrs:{value:e.featureDetailsShow,lazy:"",persistent:"","max-width":"500px"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Attributes")]),a("v-card-text",e._l(e.selectedFeatures,(function(t){return a("table",{key:t.getId()},e._l(e.table.attributes,(function(s,r){return a("tr",{key:r},[a("td",[a("b",[e._v(e._s(s))])]),a("td",[e._v(e._s(e.table.data[t.getId()][r]))])])})),0)})),0),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(t){e.featureDetailsShow=!1}}},[e._v("Close")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(e.messages).length>0,expression:"Object.keys(messages).length > 0"}],staticClass:"message_box"},e._l(e.messages,(function(t,s){return a("div",{key:s},[a("ring-loader",{staticStyle:{display:"inline-block"},attrs:{color:"#000000",size:"25px"}}),e._v(" "+e._s(t)+" ")],1)})),0),e._l(e.notifications,(function(t,s){return a("v-snackbar",{key:s,attrs:{value:"true"}},[e._v(" "+e._s(t)),a("v-btn",{attrs:{flat:"",color:"pink"},nativeOn:{click:function(t){return e.removeNotification(s)}}},[e._v("Close")])],1)}))],2)])},xo=[];function wo(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function ko(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(a),!0).forEach((function(t){Eo(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wo(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Eo(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Oo=function(){var e=(new Intl.Collator).compare;return function(t,a){return e(void 0===t.title?t.name:t.title,void 0===a.title?a.name:a.title)}}(),So={name:"admin-vectorviewer",props:["vectordb"],components:{RingLoader:T["a"],Multiselect:P.a},data:function(){return{messages:{},messagesIndex:0,notifications:{},notificationsIndex:0,olmap:void 0,vectorSource:void 0,vectorLayer:void 0,vectorLabelLayer:void 0,filter_focus:!1,geojson:void 0,table:{attibutes:[],data:[]},selectedVectordb:void 0,showLabels:!0,featureDetailsShow:!1,selectedFeatures:[]}},methods:{addnotification:function(e){var t=this.notificationsIndex++;return s["default"].set(this.notifications,t,e),t},removeNotification:function(e){s["default"].delete(this.notifications,e)},addMessage:function(e){var t=this.messagesIndex++;return s["default"].set(this.messages,t,e),t},removeMessage:function(e){s["default"].delete(this.messages,e)},loadGeojson:function(){var e=this,t=this.addMessage("loading vector data of layer ..."),a=this.$store.getters.apiUrl("vectordbs/"+this.selectedVectordb.name+"/geometry.json?epsg=3857");I.a.get(a).then((function(a){e.geojson=a.data,e.removeMessage(t),e.refreshVectorSource()})).catch((function(){e.addnotification("ERROR vector data of layer"),e.removeMessage(t)}))},loadTable:function(){var e=this,t=this.addMessage("loading table data of layer ..."),a=this.$store.getters.apiUrl("vectordbs/"+this.selectedVectordb.name+"/table.json");I.a.get(a).then((function(a){e.table=a.data,e.removeMessage(t)})).catch((function(){e.addnotification("ERROR table data of layer"),e.removeMessage(t)}))},refreshVectorSource:function(){var e=void 0===this.geojson?[]:(new en["a"]).readFeatures(this.geojson);if(this.vectorSource=new dr["a"]({features:e}),this.vectorLayer.setSource(this.vectorSource),this.vectorLabelLayer.setSource(this.vectorSource),e.length>0){var t=this.vectorSource.getExtent();this.olmap.getView().fit(t)}},refreshRoute:function(){void 0===this.selectedVectordb?this.$router.push({path:"/vectorviewer"}):this.$router.push({path:"/vectorviewer/"+this.selectedVectordb.name})},updateSelectedVectordb:function(){var e=this;if(void 0!==e.vectordbs&&void 0!==e.vectordb){var t=e.vectordbs.find((function(t){return t.name===e.vectordb}));void 0===t&&this.addnotification("vectordb not found: "+e.vectordb),e.selectedVectordb=t}}},computed:ko({},Object(c["c"])({urlPrefix:function(e){return e.identity.urlPrefix}}),{vectordbs:function(){var e=this.$store.state.vectordbs.data;return void 0===e?void 0:e.slice().sort(Oo)},vectordbsError:{get:function(){return"error"===this.$store.state.vectordbs.mode&&this.$store.state.vectordbs.messageActive},set:function(e){0==e&&this.$store.commit("vectordbs/closeMessage")}},vectordbsErrorMessage:function(){return this.$store.state.vectordbs.message},urlPrefix:function(){return this.$store.state.identity.urlPrefix}}),watch:{vectordbs:function(){this.updateSelectedVectordb()},selectedVectordb:function(){void 0!==this.selectedVectordb?(this.loadGeojson(),this.loadTable()):(this.geojson=void 0,this.table={attibutes:[],data:[]},this.refreshVectorSource()),this.refreshRoute()},vectordb:function(){this.updateSelectedVectordb()},showLabels:function(){this.vectorLabelLayer.setVisible(this.showLabels)}},mounted:function(){var e=this;this.$store.dispatch("vectordbs/init"),document.getElementById("foot-start-1").innerHTML="WGS 84/Pseudo-Mercator",document.getElementById("foot-end-1").innerHTML="";var t=new gr["a"]({color:"rgba(255,255,255,0.0)"}),a=new yr["a"]({color:"rgb(95, 112, 245)",width:2}),s=new yr["a"]({color:"rgb(200, 20, 35)",width:2});function r(){return new xr["c"]({image:new Zi["a"]({stroke:s,points:4,radius:10,radius2:0,angle:Math.PI/4}),fill:t,stroke:a})}this.vectorLayer=new Wi["a"]({style:r});var i=new gr["a"]({color:"rgba(255,255,255,0.6)"});function n(e){var t=new Xi["a"]({font:"15px sans-serif",text:e.getProperties().name,overflow:!0,backgroundFill:i,padding:[2,2,2,2]});return new xr["c"]({text:t})}this.vectorLabelLayer=new Wi["a"]({style:n,declutter:!0,renderMode:"image"});var o=new ur["b"]({});e.olmap=new or["a"]({target:"olmap-vectorviewer",layers:[new lr["a"]({source:o}),this.vectorLayer,this.vectorLabelLayer],view:new vr["a"]({center:mr["g"]([11,20.82]),zoom:3}),controls:_r["a"]({attributionOptions:{collapsible:!1}}).extend([new hr["a"],new br["a"]({projection:"EPSG:4326",target:"foot-end-1",coordinateFormat:function(e){return Object(kr["i"])(e,4)}})])}),e.olmap.on("click",(function(t){var a=e.vectorSource.getClosestFeatureToCoordinate(t.coordinate);e.selectedFeatures=[a],e.featureDetailsShow=!0})),this.refreshVectorSource()},destroyed:function(){document.getElementById("foot-start-1").innerHTML="?",document.getElementById("foot-end-1").innerHTML="?"}},Po=So,To=(a("e937"),a("799c"),Object(p["a"])(Po,yo,xo,!1,null,"17956afc",null)),Co=To.exports;s["default"].use(h["a"]);var jo=new h["a"]({routes:[{path:"/",component:k},{path:"/layers",component:R,children:[{path:"overview",component:X},{path:"rasterdbs/:rasterdb",component:wt,props:!0},{path:"pointdbs/:pointdb",component:As,props:!0},{path:"pointclouds/:pointcloud",component:ha,props:!0},{path:"vectordbs/:vectordb",component:Os,props:!0},{path:"poi_groups/:poi_group",component:Gs,props:!0},{path:"roi_groups/:roi_group",component:Zs,props:!0},{path:"*",redirect:"overview"},{path:"",redirect:"overview"}]},{path:"/explorer",component:$r},{path:"/viewer/:rasterdb?",component:vn,props:function(e){return{rasterdb:e.params.rasterdb,timestamp:e.query.timestamp,product:e.query.product,vectordb:e.query.vectordb}}},{path:"/upload",component:Tn},{path:"/tools",component:Wn,children:[{path:"info",component:Zn},{path:"status",component:no},{path:"task",component:mo},{path:"accounts",component:zn},{path:"vectorviewer/:vectordb?",component:Co,props:!0},{path:"*",redirect:"info"},{path:"",redirect:"info"}]},{path:"/files",component:go},{path:"/vectorviewer/:vectordb?",redirect:function(e){return console.log(e),{path:"/viewer",query:{vectordb:e.params.vectordb}}}},{path:"*",redirect:"/"}]}),Mo={data:void 0,mode:"init",message:"",messageActive:!1},$o={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Ro={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../rasterdbs.json?vuex").then((function(e){t.data=e.data.rasterdbs,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},Ao={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Do={namespaced:!0,state:Mo,getters:$o,actions:Ro,mutations:Ao},No={data:void 0,mode:"init",message:"",messageActive:!1},zo={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Lo={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../pointclouds?vuex").then((function(e){t.data=e.data.pointclouds,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},Io={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Fo={namespaced:!0,state:No,getters:zo,actions:Lo,mutations:Io},Bo={data:void 0,mode:"init",message:"",messageActive:!1},Vo={},Go={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../vectordbs?vuex").then((function(e){t.data=e.data.vectordbs,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},qo={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Uo={namespaced:!0,state:Bo,getters:Vo,actions:Go,mutations:qo},Wo={data:void 0,mode:"init",message:"",messageActive:!1},Jo={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},Ho={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../pointdbs?vuex").then((function(e){t.data=e.data.pointdbs,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},Yo={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},Ko={namespaced:!0,state:Wo,getters:Jo,actions:Ho,mutations:Yo},Qo=!1,Zo={data:void 0,mode:"init",message:"",messageActive:!1,transactionCount:0,transactionRunCount:0,urlPrefix:Qo?"http://127.0.0.1:8081/":""},Xo={isAdmin:function(e){return void 0!==e.data&&(void 0!==e.data.roles&&e.data.roles.includes("admin"))}},ec={closeMessage:function(e){e.messageActive=!1},incrementTransactionCount:function(e){e.transactionCount++},incrementTransactionRunCount:function(e){e.transactionRunCount++},decrementTransactionRunCount:function(e){e.transactionRunCount--},setUrlPrefix:function(e,t){e.urlPrefix=t},setData:function(e,t){e.data=t,e.mode="ready"},setError:function(e,t){e.message=t,e.messageActive=!0,e.mode="error"}},tc={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../api/identity").then((function(e){a("setData",e.data)})).catch((function(e){a("setError",ac(e))}))}};function ac(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e}var sc={namespaced:!0,state:Zo,getters:Xo,mutations:ec,actions:tc},rc={data:void 0,mode:"init",message:"",messageActive:!1},ic={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},nc={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../poi_groups?vuex").then((function(e){t.data=e.data.poi_groups,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},oc={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},cc={namespaced:!0,state:rc,getters:ic,actions:nc,mutations:oc},lc={data:void 0,mode:"init",message:"",messageActive:!1},dc={names:function(e){return void 0===e.data?[]:e.data.map((function(e){return e.name}))}},uc={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../roi_groups?vuex").then((function(e){t.data=e.data.roi_groups,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},vc={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},mc={namespaced:!0,state:lc,getters:dc,actions:uc,mutations:vc},pc={data:void 0,mode:"init",message:"",messageActive:!1},fc={},_c={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../api/layer_tags?vuex").then((function(e){t.data=e.data.layer_tags,t.mode="ready"})).catch((function(e){t.mode="error",a("setMessage",e)}))}},hc={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1}},bc={namespaced:!0,state:pc,getters:fc,actions:_c,mutations:hc},gc={data:void 0,mode:"init",message:"",messageActive:!1},yc={},xc={setMessage:function(e,t){e.message=t,e.messageActive=!0},closeMessage:function(e){e.messageActive=!1},setData:function(e,t){e.data=t,e.mode="ready"},setError:function(e,t){e.message=t,e.messageActive=!0,e.mode="error"}},wc={init:function(e){var t=e.state,a=e.dispatch,s=t.mode;"init"!==s&&"error"!==s||a("refresh")},refresh:function(e){var t=e.state,a=e.commit,s=e.rootState;t.mode="load",I.a.get(s.identity.urlPrefix+"../../api/roles").then((function(e){a("setData",e.data.roles)})).catch((function(e){a("setError",kc(e))}))}};function kc(e){return e.response?e.response.data?e.response.data:e.response:e.request?"network error":e.message?e.message:e}var Ec={namespaced:!0,state:gc,getters:yc,mutations:xc,actions:wc};s["default"].use(c["a"]);var Oc=!1,Sc={rasterdbs:Do,pointclouds:Fo,vectordbs:Uo,pointdbs:Ko,identity:sc,poi_groups:cc,roi_groups:mc,layer_tags:bc,acl_roles:Ec},Pc={},Tc={apiUrl:function(){return function(e){return Oc?"http://127.0.0.1:8081/"+e:"../../"+e}}},Cc={init:function(e){var t=e.dispatch;t("identity/init")}},jc={},Mc=new c["a"].Store({modules:Sc,state:Pc,getters:Tc,actions:Cc,mutations:jc});function $c(e){while(void 0!==e&&null!==e){if(e.classList.contains("uploader-drop"))return!0;e=e.parentElement}return!1}s["default"].config.productionTip=!1,window.addEventListener("dragenter",(function(e){$c(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")}),!1),window.addEventListener("dragover",(function(e){$c(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")})),window.addEventListener("drop",(function(e){$c(e.target)||(e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none")})),window.addEventListener("dragstart",(function(e){e.preventDefault(),e.dataTransfer.effectAllowed="none",e.dataTransfer.dropEffect="none"})),new s["default"]({router:jo,store:Mc,render:function(e){return e(_)}}).$mount("#app")},"5b47":function(e,t,a){"use strict";var s=a("df69"),r=a.n(s);r.a},"607d":function(e,t,a){"use strict";var s=a("a431"),r=a.n(s);r.a},6541:function(e,t,a){"use strict";var s=a("3d53"),r=a.n(s);r.a},"65d4":function(e,t,a){},"66db":function(e,t,a){"use strict";var s=a("e833"),r=a.n(s);r.a},"69cc":function(e,t,a){},"6c52":function(e,t,a){},"6c90":function(e,t,a){"use strict";var s=a("4cd6"),r=a.n(s);r.a},"6f24":function(e,t,a){"use strict";var s=a("1e89"),r=a.n(s);r.a},7120:function(e,t,a){"use strict";var s=a("8d4b"),r=a.n(s);r.a},"712e":function(e,t,a){"use strict";var s=a("831a"),r=a.n(s);r.a},"799c":function(e,t,a){"use strict";var s=a("8101"),r=a.n(s);r.a},"7ac7":function(e,t,a){"use strict";var s=a("6c52"),r=a.n(s);r.a},"7e60":function(e,t,a){"use strict";var s=a("2290"),r=a.n(s);r.a},8101:function(e,t,a){},"831a":function(e,t,a){},"85ec":function(e,t,a){},8890:function(e,t,a){"use strict";var s=a("c7e8"),r=a.n(s);r.a},"8d4b":function(e,t,a){},"8f33":function(e,t,a){},9571:function(e,t,a){},9757:function(e,t,a){},9883:function(e,t,a){"use strict";var s=a("2b55"),r=a.n(s);r.a},a28d:function(e,t,a){},a431:function(e,t,a){},a851:function(e,t,a){"use strict";var s=a("c3f6"),r=a.n(s);r.a},adfc:function(e,t,a){"use strict";var s=a("a28d"),r=a.n(s);r.a},ae68:function(e,t,a){},b7b4:function(e,t,a){"use strict";var s=a("e845"),r=a.n(s);r.a},bfd8:function(e,t,a){},c3f6:function(e,t,a){},c7e8:function(e,t,a){},c9b1:function(e,t,a){},cb36:function(e,t,a){"use strict";var s=a("4c5a"),r=a.n(s);r.a},d57c:function(e,t,a){},df69:function(e,t,a){},dfaa:function(e,t,a){"use strict";var s=a("1d7a"),r=a.n(s);r.a},e019:function(e,t,a){},e244:function(e,t,a){},e673:function(e,t,a){},e7b2:function(e,t,a){"use strict";var s=a("65d4"),r=a.n(s);r.a},e833:function(e,t,a){},e845:function(e,t,a){},e937:function(e,t,a){"use strict";var s=a("4dd6"),r=a.n(s);r.a},ea1d:function(e,t,a){"use strict";var s=a("22ec"),r=a.n(s);r.a},ead8:function(e,t,a){"use strict";var s=a("9571"),r=a.n(s);r.a},f622:function(e,t,a){},fcb8:function(e,t,a){"use strict";var s=a("ae68"),r=a.n(s);r.a}});